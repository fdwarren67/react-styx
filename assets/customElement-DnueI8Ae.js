import{e as o,m as u,x as r,j as h,S as m}from"./index-5Uv45sI4.js";import{a as c,x as n,u as d,t as p}from"./dom-DJEv2Q-P.js";import{m as y}from"./component-Dxbaltlt.js";import{s as f}from"./useT9n-Cwowg6_C.js";import"./guid-BDWAkmkV.js";import"./logger-CuHV5ymd.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const I=h`:host{display:flex}ul{margin:0;display:inline-flex;block-size:100%;align-items:center;padding:0}:host([layout=vertical]) ul{display:flex;inline-size:100%;flex-direction:column}:host([hidden]){display:none}[hidden]{display:none}`,i=class i extends o{constructor(){super(),this.attributeWatch=u(["role"],this.handleGlobalAttributesChanged),this.menuItems=[],this.layout="horizontal",this.messages=f(),this.listen("calciteInternalMenuItemKeyEvent",this.calciteInternalNavMenuItemKeyEvent)}async setFocus(){await y(this),c(this.menuItems[0])}willUpdate(t){t.has("layout")&&(this.hasUpdated||this.layout!=="horizontal")&&this.setMenuItemLayout(this.menuItems,this.layout)}handleGlobalAttributesChanged(){this.requestUpdate(),this.setMenuItemLayout(this.menuItems,this.layout)}calciteInternalNavMenuItemKeyEvent(t){const e=t.target,s=t.detail.children,a=t.detail.event.key;t.stopPropagation(),a==="ArrowDown"?e.layout==="vertical"?n(this.menuItems,e,"next",!1):t.detail.isSubmenuOpen&&s[0].setFocus():a==="ArrowUp"?this.layout==="vertical"?n(this.menuItems,e,"previous",!1):t.detail.isSubmenuOpen&&s[s.length-1].setFocus():a==="ArrowRight"?this.layout==="horizontal"?n(this.menuItems,e,"next",!1):t.detail.isSubmenuOpen&&s[0].setFocus():a==="ArrowLeft"?this.layout==="horizontal"?n(this.menuItems,e,"previous",!1):t.detail.isSubmenuOpen&&this.focusParentElement(t.target):a==="Escape"&&this.focusParentElement(t.target),t.preventDefault()}handleMenuSlotChange(t){this.menuItems=d(t),this.setMenuItemLayout(this.menuItems,this.layout)}focusParentElement(t){const e=t.parentElement;e&&(p(e),e.open=!1)}setMenuItemLayout(t,e){t.forEach(s=>{s.layout=e,this.getEffectiveRole()==="menubar"&&(s.isTopLevelItem=!0,s.topLevelMenuLayout=this.layout)})}getEffectiveRole(){return this.el.role||"menubar"}render(){return r`<ul .ariaLabel=${this.label} .role=${this.getEffectiveRole()}><slot @slotchange=${this.handleMenuSlotChange}></slot></ul>`}};i.properties={label:1,layout:3,messageOverrides:0},i.shadowRootOptions={mode:"open",delegatesFocus:!0},i.styles=I;let l=i;m("calcite-menu",l);export{l as Menu};
