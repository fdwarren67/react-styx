import{b6 as w,b7 as $,bc as A,bd as M,be as b,bf as p,bg as x,bh as j,b8 as C}from"./index-5Uv45sI4.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const k=(r,f,c)=>{const h=new Map;for(let e=f;e<=c;e++)h.set(r[e],e);return h},E=w(class extends ${constructor(r){if(super(r),r.type!==A.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,f,c){let h;c===void 0?c=f:f!==void 0&&(h=f);const e=[],i=[];let l=0;for(const a of r)e[l]=h?h(a,l):l,i[l]=c(a,l),l++;return{values:i,keys:e}}render(r,f,c){return this.dt(r,f,c).values}update(r,[f,c,h]){const e=M(r),{values:i,keys:l}=this.dt(f,c,h);if(!Array.isArray(e))return this.ut=l,i;const a=this.ut??(this.ut=[]),u=[];let v,g,t=0,n=e.length-1,s=0,o=i.length-1;for(;t<=n&&s<=o;)if(e[t]===null)t++;else if(e[n]===null)n--;else if(a[t]===l[s])u[s]=b(e[t],i[s]),t++,s++;else if(a[n]===l[o])u[o]=b(e[n],i[o]),n--,o--;else if(a[t]===l[o])u[o]=b(e[t],i[o]),p(r,u[o+1],e[t]),t++,o--;else if(a[n]===l[s])u[s]=b(e[n],i[s]),p(r,e[t],e[n]),n--,s++;else if(v===void 0&&(v=k(l,s,o),g=k(a,t,n)),v.has(a[t]))if(v.has(a[n])){const d=g.get(l[s]),y=d!==void 0?e[d]:null;if(y===null){const m=p(r,e[t]);b(m,i[s]),u[s]=m}else u[s]=b(y,i[s]),p(r,e[t],y),e[d]=null;s++}else x(e[n]),n--;else x(e[t]),t++;for(;s<=o;){const d=p(r,u[o+1]);b(d,i[s]),u[s++]=d}for(;t<=n;){const d=e[t++];d!==null&&x(d)}return this.ut=l,C(r,u),j}});export{E as c};
