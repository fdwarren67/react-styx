import {
  S
} from "./chunk-6ODLL4CO.js";
import {
  y
} from "./chunk-ZMZA5FVA.js";
import "./chunk-IZJLQDI2.js";
import "./chunk-MAX4GY2G.js";
import "./chunk-I75Q3UU4.js";
import "./chunk-TOU5KPOG.js";
import "./chunk-5BSH2ZN2.js";
import "./chunk-HQ2GCCLQ.js";
import "./chunk-PBHST2SF.js";
import "./chunk-PONPGREB.js";
import "./chunk-QNYMCEB7.js";
import "./chunk-VPRLLNNO.js";
import "./chunk-YUQ6PSJ2.js";
import "./chunk-SB6LU3VH.js";
import "./chunk-C33DSFWF.js";
import "./chunk-WBBL3X3F.js";
import "./chunk-GFEMKR2U.js";
import "./chunk-G2OXL5Y3.js";
import "./chunk-W7QCICS6.js";
import "./chunk-AYLNWVVJ.js";
import {
  r as r2
} from "./chunk-RAVPBO4Z.js";
import "./chunk-P6IUM5K3.js";
import "./chunk-GY7XU54K.js";
import "./chunk-D3P3E2RE.js";
import "./chunk-UKY33OJN.js";
import "./chunk-HAWCNM3C.js";
import {
  V
} from "./chunk-BQYXRSVC.js";
import "./chunk-BJEQ2APY.js";
import "./chunk-WKNMEFRQ.js";
import "./chunk-N5E3DEQN.js";
import "./chunk-FZPO5AYT.js";
import "./chunk-5VM3BO4P.js";
import "./chunk-EYUJRAXJ.js";
import "./chunk-552ZCNNH.js";
import "./chunk-XG7T2Y7N.js";
import "./chunk-SQOMDKJS.js";
import "./chunk-HB6TKF6E.js";
import "./chunk-OXPM753Y.js";
import "./chunk-N4U5VIP2.js";
import "./chunk-IVS2JCO6.js";
import "./chunk-4GOW35CM.js";
import "./chunk-TEJXT4W6.js";
import "./chunk-LW62SPEN.js";
import "./chunk-LSOJIRW6.js";
import "./chunk-FSFEOCO5.js";
import "./chunk-ZVIMKAJW.js";
import "./chunk-BIURGGHV.js";
import "./chunk-VSLEAHOZ.js";
import "./chunk-6K2FAOQG.js";
import "./chunk-N5DN7S3H.js";
import "./chunk-BECTSF5P.js";
import "./chunk-FX46DC27.js";
import "./chunk-2FUEBHWI.js";
import {
  m
} from "./chunk-VTWDBFQT.js";
import {
  a2 as a
} from "./chunk-BM4B3CH5.js";
import "./chunk-G2YC5GCV.js";
import "./chunk-GD5AHXAI.js";
import "./chunk-YWGYHRSH.js";
import "./chunk-DP2IAJQN.js";
import "./chunk-EAFC6V23.js";
import {
  d,
  e2 as e,
  k,
  t2 as t
} from "./chunk-SMH2GUF6.js";
import "./chunk-AZP4AFW7.js";
import {
  r
} from "./chunk-SCZRL2WP.js";
import "./chunk-OSHCNHH7.js";
import "./chunk-7LCEUMDD.js";
import {
  n2 as n
} from "./chunk-6II7WQ2F.js";
import "./chunk-L7QO6TDW.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@arcgis/core/views/layers/CatalogDynamicGroupLayerView.js
var l = Symbol();
var u = (u2) => {
  let y2 = class extends u2 {
    constructor() {
      super(...arguments), this.layerViews = new V(), this._debouncedUpdate = k(async () => {
        const { layer: e2, parent: r3 } = this, t2 = r3 == null ? void 0 : r3.footprintLayerView;
        let s = [];
        const i2 = this._createQuery();
        if (i2 && t2) {
          const { features: r4 } = await t2.queryFeatures(i2);
          this.suspended || (s = r4.map((r5) => e2.acquireLayer(r5)));
        }
        this.removeHandles(l), this.addHandles(s, l);
      });
    }
    get creatingLayerViews() {
      var _a;
      return ((_a = this.view) == null ? void 0 : _a.layerViewManager.isCreatingLayerViewsForLayer(this.layer)) ?? false;
    }
    isUpdating() {
      return this.creatingLayerViews || this.layer.updating || this.layerViews.some((e2) => e2.updating);
    }
    enableLayerUpdates() {
      return t([this._updatingHandles.addWhen(() => {
        var _a, _b;
        return false === ((_b = (_a = this.parent) == null ? void 0 : _a.footprintLayerView) == null ? void 0 : _b.dataUpdating);
      }, () => this.updateLayers()), this._updatingHandles.add(() => {
        var _a, _b, _c, _d, _e;
        return [this.layer.maximumVisibleSublayers, (_a = this.layer.parent) == null ? void 0 : _a.orderBy, (_c = (_b = this.parent) == null ? void 0 : _b.footprintLayerView) == null ? void 0 : _c.filter, (_e = (_d = this.parent) == null ? void 0 : _d.footprintLayerView) == null ? void 0 : _e.timeExtent, this.suspended];
      }, () => this.updateLayers()), e(() => this.removeHandles(l))]);
    }
    updateLayers() {
      this.suspended ? this.removeHandles(l) : this._updatingHandles.addPromise(d(this._debouncedUpdate()).catch((e2) => {
        n.getLogger(this).error(e2);
      }));
    }
    _createQuery() {
      var _a, _b;
      const e2 = (_a = this.parent) == null ? void 0 : _a.footprintLayerView, r3 = (_b = this.layer) == null ? void 0 : _b.parent;
      if (!e2 || !r3 || r3.destroyed) return null;
      const { layer: { maximumVisibleSublayers: t2 }, view: { scale: s } } = this;
      if (!t2) return null;
      const { itemTypeField: i2, itemSourceField: a2, itemNameField: o, minScaleField: d2, maxScaleField: p, objectIdField: l2, orderBy: u3 } = r3, y3 = r2(`${d2} IS NULL OR ${s} <= ${d2} OR ${d2} = 0`, `${p} IS NULL OR ${s} >= ${p}`), c2 = u3 == null ? void 0 : u3.find((e3) => e3.field && !e3.valueExpression), m2 = e2.createQuery();
      if (m2.returnGeometry = false, m2.num = t2, m2.outFields = [l2, a2, o], m2.where = r2(m2.where, y3), null != this.unsupportedItemTypes) {
        const e3 = `${i2} NOT IN (${this.unsupportedItemTypes.map((e4) => `'${e4}'`)})`;
        m2.where = r2(m2.where, e3);
      }
      return (c2 == null ? void 0 : c2.field) && (m2.orderByFields = [`${c2.field} ${"descending" === c2.order ? "DESC" : "ASC"}`], m2.outFields.push(c2.field)), m2;
    }
  };
  return r([m({ readOnly: true })], y2.prototype, "creatingLayerViews", null), r([m()], y2.prototype, "layer", void 0), r([m()], y2.prototype, "layerViews", void 0), r([m({ readOnly: true })], y2.prototype, "unsupportedItemTypes", void 0), r([m()], y2.prototype, "parent", void 0), r([m({ readOnly: true })], y2.prototype, "isUpdating", null), y2 = r([a("esri.views.layers.CatalogDynamicGroupLayerView")], y2), y2;
};

// node_modules/@arcgis/core/views/2d/layers/CatalogDynamicGroupLayerView2D.js
var i = class extends u(S(y)) {
  constructor() {
    super(...arguments), this.unsupportedItemTypes = ["Scene Service"], this.layerViews = new V();
  }
  attach() {
    this.addAttachHandles([this.layerViews.on("after-changes", () => this._updateStageChildren()), this.enableLayerUpdates()]);
  }
  detach() {
    this.container.removeAllChildren();
  }
  update(e2) {
    this.updateLayers();
  }
  viewChange() {
  }
  moveEnd() {
    this.requestUpdate();
  }
  _updateStageChildren() {
    this.container.removeAllChildren(), this.layerViews.forEach((e2, r3) => this.container.addChildAt(e2.container, r3));
  }
};
i = r([a("esri.views.2d.layers.CatalogDynamicGroupLayerView2D")], i);
var c = i;
export {
  c as default
};
//# sourceMappingURL=CatalogDynamicGroupLayerView2D-DIXWSKAP.js.map
