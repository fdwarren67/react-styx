import {
  l as l2
} from "./chunk-NOX6ZOVL.js";
import {
  Cg,
  L,
  P as P4,
  d as d3,
  f as f2,
  g as g3,
  l,
  n
} from "./chunk-UOWDJXTB.js";
import "./chunk-YZF7OTID.js";
import "./chunk-OBRCQKKM.js";
import "./chunk-QY6LLTZM.js";
import "./chunk-FWVSIQMR.js";
import "./chunk-ON7GWFUW.js";
import {
  A
} from "./chunk-BMOULVP4.js";
import {
  e
} from "./chunk-RTA3XNM7.js";
import "./chunk-ZXHHBJMH.js";
import {
  y
} from "./chunk-DJ5HVIE7.js";
import {
  S as S2
} from "./chunk-KPY4ZIC2.js";
import "./chunk-EGSJQZXU.js";
import {
  p
} from "./chunk-SVWZAOD7.js";
import "./chunk-4ANUERFT.js";
import "./chunk-C33DSFWF.js";
import {
  t
} from "./chunk-MILRZFWI.js";
import "./chunk-RPPIM555.js";
import "./chunk-4FQDWSFN.js";
import "./chunk-JOQ2ZFQV.js";
import {
  f
} from "./chunk-3UBDE4PK.js";
import "./chunk-LILYILCM.js";
import "./chunk-WBBL3X3F.js";
import "./chunk-OJGPUKVG.js";
import "./chunk-GFEMKR2U.js";
import "./chunk-G2OXL5Y3.js";
import "./chunk-B6ORYDBK.js";
import "./chunk-AYLNWVVJ.js";
import "./chunk-PQVKYMOX.js";
import "./chunk-DCSYHXZG.js";
import {
  a as a2
} from "./chunk-SPVEONZ2.js";
import "./chunk-BMNDO4JW.js";
import "./chunk-RAVPBO4Z.js";
import "./chunk-PHADC6NW.js";
import "./chunk-3ODJ3YKN.js";
import "./chunk-P6IUM5K3.js";
import "./chunk-P4D4HTH2.js";
import "./chunk-Y4AQXF4J.js";
import "./chunk-D3P3E2RE.js";
import {
  P,
  d as d2
} from "./chunk-UKY33OJN.js";
import "./chunk-HAWCNM3C.js";
import "./chunk-BQYXRSVC.js";
import "./chunk-BJEQ2APY.js";
import "./chunk-WKNMEFRQ.js";
import "./chunk-Q7TEBZSN.js";
import "./chunk-CIALVDRG.js";
import "./chunk-N5E3DEQN.js";
import "./chunk-FZPO5AYT.js";
import "./chunk-EYUJRAXJ.js";
import "./chunk-BDOGPNOY.js";
import {
  P as P3
} from "./chunk-XG7T2Y7N.js";
import "./chunk-SQOMDKJS.js";
import "./chunk-HB6TKF6E.js";
import "./chunk-OXPM753Y.js";
import {
  w
} from "./chunk-N4U5VIP2.js";
import {
  j2 as j
} from "./chunk-IVS2JCO6.js";
import {
  g as g2
} from "./chunk-4GOW35CM.js";
import "./chunk-TEJXT4W6.js";
import "./chunk-LW62SPEN.js";
import "./chunk-LSOJIRW6.js";
import {
  o
} from "./chunk-FSFEOCO5.js";
import {
  r as r3
} from "./chunk-ZVIMKAJW.js";
import "./chunk-BIURGGHV.js";
import {
  r
} from "./chunk-VSLEAHOZ.js";
import "./chunk-6K2FAOQG.js";
import "./chunk-N5DN7S3H.js";
import {
  P2,
  d
} from "./chunk-BECTSF5P.js";
import "./chunk-FX46DC27.js";
import {
  S
} from "./chunk-2FUEBHWI.js";
import {
  g,
  m
} from "./chunk-VTWDBFQT.js";
import {
  a2 as a
} from "./chunk-BM4B3CH5.js";
import "./chunk-G2YC5GCV.js";
import "./chunk-GD5AHXAI.js";
import "./chunk-YWGYHRSH.js";
import "./chunk-DP2IAJQN.js";
import "./chunk-EAFC6V23.js";
import "./chunk-SMH2GUF6.js";
import "./chunk-AZP4AFW7.js";
import {
  r as r2
} from "./chunk-SCZRL2WP.js";
import {
  s
} from "./chunk-OSHCNHH7.js";
import "./chunk-7LCEUMDD.js";
import "./chunk-6II7WQ2F.js";
import "./chunk-L7QO6TDW.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@arcgis/core/layers/support/PlaybackInfo.js
var s2 = class extends a2.ClonableMixin(S) {
  constructor(o2) {
    super(o2), this.framerate = null, this.containerFormat = null, this.gop = null, this.aspectRatio = null, this.klv = null;
  }
};
r2([m({ type: String })], s2.prototype, "framerate", void 0), r2([m({ type: String })], s2.prototype, "containerFormat", void 0), r2([m({ type: Number })], s2.prototype, "gop", void 0), r2([m({ type: String })], s2.prototype, "aspectRatio", void 0), r2([m({ type: Object })], s2.prototype, "klv", void 0), s2 = r2([a("esri.layers.support.PlaybackInfo")], s2);
var i = s2;

// node_modules/@arcgis/core/layers/support/VideoFrame.js
var l3 = class extends g {
  constructor() {
    super(...arguments), this.sourcePoint = null, this.mapPoint = null;
  }
};
function a3(o2) {
  return null != (o2 == null ? void 0 : o2.sourcePoint) && null != o2.mapPoint;
}
r2([m()], l3.prototype, "sourcePoint", void 0), r2([m({ type: j })], l3.prototype, "mapPoint", void 0), l3 = r2([a("esri.layers.support.VideoFrame.ControlPoint")], l3);
var m2 = class extends a2.ClonableMixin(S) {
  constructor(o2) {
    super(o2), this.frame = null, this.controlPoints = null;
  }
  readControlPoints(o2) {
    return o2.map((o3) => ({ sourcePoint: { x: o3.frameX, y: o3.frameY }, mapPoint: new j(o3.point) }));
  }
  writeControlPoints(o2, r4) {
    null != o2 && a3(o2[0]) && (r4.controlPoints = o2.map((o3) => {
      const r5 = o3.sourcePoint, t2 = o3.mapPoint;
      return { frameX: r5.x, frameY: r5.y, point: t2.toJSON() };
    }));
  }
};
r2([m({ type: String })], m2.prototype, "frame", void 0), r2([m({ type: [l3], json: { write: { allowNull: false, isRequired: true } } })], m2.prototype, "controlPoints", void 0), r2([o("controlPoints")], m2.prototype, "readControlPoints", null), r2([r3("controlPoints")], m2.prototype, "writeControlPoints", null), m2 = r2([a("esri.layers.support.VideoFrame")], m2);
var u = m2;

// node_modules/@arcgis/core/layers/VideoLayer.js
var w2 = class extends p(t(S2(e(f)))) {
  constructor(e2) {
    super(e2), this._trailPoints = [], this.capabilities = null, this.connectionInfo = null, this.controller = new Cg(), this.copyright = null, this.created = null, this.description = null, this.elevationSource = null, this.frame = null, this.frameCount = null, this.fullExtent = null, this.initialExtent = null, this.layerId = null, this.playbackInfo = null, this.posterUrl = null, this.qualities = null, this.serviceItemId = null, this.sourceJSON = null, this.sourceQuality = null, this.sourceType = null, this.spatialReference = g2.WGS84, this.telemetryDisplay = null, this.title = null, this.type = "video", this.url = null, this.videoLayersInfo = null, this.videoTimeExtent = null;
  }
  initialize() {
    this.telemetryDisplay = new l2({ frame: false, frameCenter: false, frameOutline: true, lineOfSight: true, sensorLocation: true, sensorTrail: true }), this.addHandles([d2(() => this.metadata, () => {
      this.notifyChange("telemetry"), this.notifyChange("groundControlPoints"), this.notifyChange("frameHorizonPoints");
    }), d2(() => {
      var _a;
      return (_a = this.telemetry) == null ? void 0 : _a.sensorLocation;
    }, (e2) => this._setSensorTrail(e2), P)]);
  }
  load(e2) {
    const t2 = null != e2 ? e2.signal : null;
    return this.addResolvingPromise(this._fetchService(t2)), Promise.resolve(this);
  }
  get buffered() {
    return this.controller.buffered;
  }
  readCapabilitiesFromService(e2, t2) {
    return A(t2);
  }
  readConnectionInfo(e2, t2) {
    const r4 = Object.values(t2.connectionUrl);
    return (r4 == null ? void 0 : r4.length) && (this.controller.playerUrl = r4[0]), t2.connectionUrl;
  }
  get currentTime() {
    return this.controller.currentTime;
  }
  get duration() {
    return this.controller.duration;
  }
  get ended() {
    return this.controller.ended;
  }
  get frameHorizonPoints() {
    return L(this.metadata);
  }
  get groundControlPoints() {
    return f2(this.metadata);
  }
  get loop() {
    return this.controller.loop;
  }
  set loop(e2) {
    this.controller.loop = e2;
  }
  get metadata() {
    var _a;
    return (_a = this.controller) == null ? void 0 : _a.currentMetadata;
  }
  get mimeType() {
    var _a;
    return (_a = this.controller) == null ? void 0 : _a.mimeType;
  }
  get muted() {
    return this.controller.muted;
  }
  set muted(e2) {
    this.controller.muted = e2;
  }
  get playbackRate() {
    return this.controller.rate;
  }
  set playbackRate(e2) {
    this.controller.rate = e2;
  }
  get playerUrl() {
    return this.controller.playerUrl;
  }
  get playing() {
    return this.controller.playing;
  }
  get state() {
    return this.controller.state;
  }
  get telemetry() {
    return g3(this.metadata);
  }
  get videoElement() {
    var _a;
    return (_a = this.controller) == null ? void 0 : _a.element;
  }
  get videoHeight() {
    var _a;
    return (_a = this.controller) == null ? void 0 : _a.videoHeight;
  }
  readLayerInfosFromService(e2, t2) {
    return P4(t2);
  }
  get videoWidth() {
    var _a;
    return (_a = this.controller) == null ? void 0 : _a.videoWidth;
  }
  get waiting() {
    return this.controller.waiting;
  }
  play() {
    this.controller.play();
  }
  pause() {
    this.controller.pause();
  }
  reset() {
    this.controller.reset();
  }
  setCurrentTime(e2) {
    if (!this.duration) return;
    const t2 = r(e2, 0, this.duration);
    this.controller.setCurrentTime(t2);
  }
  toGround(e2, t2) {
    var _a, _b;
    return ((_b = (_a = this.controller) == null ? void 0 : _a.sensorModel) == null ? void 0 : _b.metadataSupportsTransforms) ? this.controller.sensorModel.transformImageToGeo(e2, t2) : null;
  }
  toVideo(e2) {
    var _a, _b;
    if (!((_b = (_a = this.controller) == null ? void 0 : _a.sensorModel) == null ? void 0 : _b.metadataSupportsTransforms)) return null;
    const t2 = this.controller.sensorModel.transformGeoToImage(e2.x, e2.y, e2.z);
    return { x: t2[0], y: t2[1] };
  }
  async _fetchService(e2) {
    var _a, _b;
    if (this.sourceJSON) return void this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl });
    const o2 = d((_a = this.parsedUrl) == null ? void 0 : _a.path);
    if (null == o2) throw new s("arcgis-layers:url-mismatch", "The url is not a valid arcgis resource");
    let i2 = null;
    const { data: l4, ssl: s3 } = await P2(o2.url.path, { query: { f: "json", ...this.parsedUrl.query, ...this.customParameters }, signal: e2 }), n2 = l4;
    if (this.url = o2.url.path, s3 && (this.url = this.url.replace(/^http:/i, "https:")), !(n2 == null ? void 0 : n2.currentVersion)) return n2.currentVersion = "11.2", this.sourceJSON = n2, void this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl });
    let a4 = o2 == null ? void 0 : o2.sublayer;
    if (null == a4 && ((_b = n2.layers) == null ? void 0 : _b.length) && (a4 = n2.layers[0].id), null == a4) throw new s("arcgis-layers:url-mismatch", "The url is not a valid arcgis resource");
    this.url = `${o2.url.path}/${a4}`, i2 = await P2(this.url, { query: { f: "json", ...this.customParameters }, signal: e2 });
    const p2 = { ...n2, ...i2.data };
    this.sourceJSON = p2, this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl });
  }
  _setSensorTrail(e2) {
    if (!e2) return;
    const t2 = d3(e2, this._trailPoints);
    this._trailPoints = [...t2];
    const r4 = this._trailPoints.map((e3) => e3.toArray()), o2 = new P3({ hasZ: e2.hasZ, paths: [r4] });
    this.telemetry.sensorTrail = o2.clone();
  }
};
r2([m({ readOnly: true })], w2.prototype, "buffered", null), r2([m({ readOnly: true, json: { read: false } })], w2.prototype, "capabilities", void 0), r2([o("service", "capabilities", ["supportsAppend", "supportsCoverageQuery", "supportsExportClip", "supportsExportFrameset", "supportsMensuration", "supportsUpdate"])], w2.prototype, "readCapabilitiesFromService", null), r2([m({ readOnly: true })], w2.prototype, "connectionInfo", void 0), r2([o("connectionInfo", ["connectionUrl"])], w2.prototype, "readConnectionInfo", null), r2([m()], w2.prototype, "controller", void 0), r2([m({ type: String })], w2.prototype, "copyright", void 0), r2([m({ readOnly: true, type: Date })], w2.prototype, "created", void 0), r2([m({ type: Number })], w2.prototype, "currentTime", null), r2([m({ type: String })], w2.prototype, "description", void 0), r2([m({ type: Number })], w2.prototype, "duration", null), r2([m({ readOnly: true })], w2.prototype, "elevationSource", void 0), r2([m({ type: Boolean })], w2.prototype, "ended", null), r2([m({ type: u })], w2.prototype, "frame", void 0), r2([m({ readOnly: true, type: Number })], w2.prototype, "frameCount", void 0), r2([m({ type: w })], w2.prototype, "fullExtent", void 0), r2([m({ readOnly: true })], w2.prototype, "frameHorizonPoints", null), r2([m({ readOnly: true })], w2.prototype, "groundControlPoints", null), r2([m({ type: w })], w2.prototype, "initialExtent", void 0), r2([m({ readOnly: true, json: { read: { source: "id" } } })], w2.prototype, "layerId", void 0), r2([m({ type: Boolean })], w2.prototype, "loop", null), r2([m({ readOnly: true })], w2.prototype, "metadata", null), r2([m({ readOnly: true })], w2.prototype, "mimeType", null), r2([m({ type: Boolean })], w2.prototype, "muted", null), r2([m({ type: i })], w2.prototype, "playbackInfo", void 0), r2([m({ type: Number })], w2.prototype, "playbackRate", null), r2([m({ type: String })], w2.prototype, "playerUrl", null), r2([m({ readOnly: true })], w2.prototype, "playing", null), r2([m({ readOnly: true, json: { read: { source: "poster" } } })], w2.prototype, "posterUrl", void 0), r2([m({ readOnly: true })], w2.prototype, "qualities", void 0), r2([m({ readOnly: true })], w2.prototype, "serviceItemId", void 0), r2([m()], w2.prototype, "sourceJSON", void 0), r2([m({ readOnly: true })], w2.prototype, "sourceQuality", void 0), r2([m({ readOnly: true, json: { name: "serviceType" } })], w2.prototype, "sourceType", void 0), r2([m()], w2.prototype, "spatialReference", void 0), r2([m({ readOnly: true, type: String })], w2.prototype, "state", null), r2([m({ readOnly: true, type: n })], w2.prototype, "telemetry", null), r2([m({ type: l2 })], w2.prototype, "telemetryDisplay", void 0), r2([m({ readOnly: false, json: { read: { source: "name" } } })], w2.prototype, "title", void 0), r2([m({ readOnly: true })], w2.prototype, "type", void 0), r2([m(y)], w2.prototype, "url", void 0), r2([m({ readOnly: true })], w2.prototype, "videoElement", null), r2([m({ readOnly: true })], w2.prototype, "videoHeight", null), r2([m({ readOnly: true, json: { read: false } })], w2.prototype, "videoLayersInfo", void 0), r2([o("service", "videoLayersInfo", ["id", "name", "poster", "serviceType", "type"])], w2.prototype, "readLayerInfosFromService", null), r2([m({ readOnly: true, nonNullable: false, json: { read: { reader: l, source: "time" } } })], w2.prototype, "videoTimeExtent", void 0), r2([m({ readOnly: true })], w2.prototype, "videoWidth", null), r2([m({ readOnly: true })], w2.prototype, "waiting", null), w2 = r2([a("esri.layers.VideoLayer")], w2);
var E = w2;
export {
  E as default
};
//# sourceMappingURL=VideoLayer-RNRVI446.js.map
