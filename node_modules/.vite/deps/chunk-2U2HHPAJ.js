import {
  m,
  p
} from "./chunk-VBBJGZOS.js";
import {
  ot
} from "./chunk-T2GPF443.js";
import {
  keyed
} from "./chunk-KZXUV47B.js";
import {
  m as m2
} from "./chunk-2GIEDWQ6.js";
import {
  ref
} from "./chunk-LTKIMXCE.js";
import {
  s
} from "./chunk-RZAGQ6CT.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  createEvent,
  css,
  html,
  nothing,
  safeClassMap
} from "./chunk-MALSDV7D.js";

// node_modules/@esri/calcite-components/dist/components/calcite-sort-handle/customElement.js
var m3 = {
  handle: "handle",
  dropdown: "dropdown"
};
var u = {
  drag: "drag",
  blank: "blank"
};
var c = {
  label: "{label}",
  position: "{position}",
  total: "{total}"
};
var f = ["top", "up", "down", "bottom"];
var H = css`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`;
var _B = class _B extends LitElement {
  constructor() {
    super(...arguments), this.disabled = false, this.messages = s({ blocking: true }), this.moveToItems = [], this.open = false, this.overlayPositioning = "absolute", this.placement = ot, this.scale = "m", this.calciteSortHandleBeforeClose = createEvent({ cancelable: false }), this.calciteSortHandleBeforeOpen = createEvent({ cancelable: false }), this.calciteSortHandleClose = createEvent({ cancelable: false }), this.calciteSortHandleMove = createEvent({ cancelable: false }), this.calciteSortHandleOpen = createEvent({ cancelable: false }), this.calciteSortHandleReorder = createEvent({ cancelable: false });
  }
  // #endregion
  // #region State Properties
  get hasSetInfo() {
    return typeof this.setPosition == "number" && typeof this.setSize == "number";
  }
  get isSetDisabled() {
    const { setPosition: e, setSize: t, moveToItems: o } = this;
    return this.hasSetInfo ? e < 1 || t < 1 || t < 2 && o.length < 1 : false;
  }
  // #endregion
  // #region Public Methods
  /** Sets focus on the component. */
  async setFocus() {
    var _a;
    await m2(this), (_a = this.dropdownEl) == null ? void 0 : _a.setFocus();
  }
  // #endregion
  // #region Lifecycle
  willUpdate(e) {
    e.has("open") && (this.hasUpdated || this.open !== false) && this.openHandler();
  }
  updated() {
    m(this);
  }
  // #endregion
  // #region Private Methods
  openHandler() {
    if (this.disabled) {
      this.open = false;
      return;
    }
    this.dropdownEl && (this.dropdownEl.open = this.open);
  }
  setDropdownEl(e) {
    e && (this.dropdownEl = e, this.openHandler());
  }
  getLabel() {
    const { label: e, messages: t, setPosition: o, setSize: s2 } = this;
    if (!this.hasSetInfo)
      return e ?? "";
    let n = e ? t.repositionLabel.replace(c.label, e) : t.reposition;
    return n = n.replace(c.position, o ? o.toString() : ""), n.replace(c.total, s2 ? s2.toString() : "");
  }
  handleBeforeOpen(e) {
    e.stopPropagation(), this.calciteSortHandleBeforeOpen.emit();
  }
  handleOpen(e) {
    e.stopPropagation(), this.calciteSortHandleOpen.emit(), this.open = true;
  }
  handleBeforeClose(e) {
    e.stopPropagation(), this.calciteSortHandleBeforeClose.emit();
  }
  handleClose(e) {
    e.stopPropagation(), this.calciteSortHandleClose.emit(), this.open = false;
  }
  handleReorder(e) {
    this.calciteSortHandleReorder.emit({
      reorder: e.target.dataset.value
    });
  }
  handleMoveTo(e) {
    const t = e.target.dataset.id, o = this.moveToItems.find((s2) => s2.id === t);
    this.calciteSortHandleMove.emit({ moveTo: o });
  }
  // #endregion
  // #region Rendering
  render() {
    const { disabled: e, flipPlacements: t, open: o, overlayPositioning: s2, placement: n, scale: p2, widthScale: b } = this, r = this.getLabel(), g = e || this.isSetDisabled;
    return p({ disabled: e, children: html`<calcite-dropdown class=${safeClassMap(m3.dropdown)} .disabled=${g} .flipPlacements=${t} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${s2} .placement=${n} .scale=${p2} .widthScale=${b} ${ref(this.setDropdownEl)}><calcite-action .active=${o} appearance=transparent class=${safeClassMap(m3.handle)} .dragHandle=${true} .icon=${e ? u.blank : u.drag} .label=${r} .scale=${p2} slot=trigger .text=${r} title=${r ?? nothing}></calcite-action>${this.renderGroup()}${this.renderMoveToGroup()}</calcite-dropdown>` });
  }
  renderMoveToItem(e) {
    return keyed(e.id, html`<calcite-dropdown-item data-id=${e.id ?? nothing} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`);
  }
  renderGroup() {
    return this.hasSetInfo ? keyed("reorder", html`<calcite-dropdown-group .groupTitle=${this.messages.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`) : null;
  }
  renderMoveToGroup() {
    const { messages: e, moveToItems: t, scale: o } = this;
    return t.length ? keyed("move-to-items", html`<calcite-dropdown-group .groupTitle=${e.moveTo} .scale=${o} selection-mode=none>${t.map((s2) => this.renderMoveToItem(s2))}</calcite-dropdown-group>`) : null;
  }
  renderDropdownItem(e, t) {
    return keyed(f[e], html`<calcite-dropdown-item data-value=${f[e] ?? nothing} .label=${t} @calciteDropdownItemSelect=${this.handleReorder}>${t}</calcite-dropdown-item>`);
  }
  renderTop() {
    const { setPosition: e } = this;
    return e !== 1 && e !== 2 ? this.renderDropdownItem(0, this.messages.moveToTop) : null;
  }
  renderUp() {
    return this.setPosition !== 1 ? this.renderDropdownItem(1, this.messages.moveUp) : null;
  }
  renderDown() {
    return this.setPosition !== this.setSize ? this.renderDropdownItem(2, this.messages.moveDown) : null;
  }
  renderBottom() {
    const { setPosition: e, setSize: t } = this;
    return e !== t && e !== t - 1 ? this.renderDropdownItem(3, this.messages.moveToBottom) : null;
  }
};
_B.properties = { hasSetInfo: 16, isSetDisabled: 16, disabled: 7, flipPlacements: 0, label: 1, messageOverrides: 0, messages: 0, moveToItems: 0, open: 7, overlayPositioning: 3, placement: 3, scale: 3, setPosition: 9, setSize: 9, widthScale: 3 };
_B.styles = H;
var B = _B;
S("calcite-sort-handle", B);

export {
  B
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-sort-handle/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=chunk-2U2HHPAJ.js.map
