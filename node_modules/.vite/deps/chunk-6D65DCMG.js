import {
  e as e2
} from "./chunk-GTVVYAXM.js";
import {
  a as a4
} from "./chunk-XOXXDYBM.js";
import {
  M,
  c,
  f as f2,
  h,
  i,
  s as s4,
  u as u3
} from "./chunk-I6H2R562.js";
import {
  n as n2,
  t
} from "./chunk-T7CHWWE2.js";
import {
  B,
  S as S2,
  e,
  j as j2,
  l,
  o as o2,
  q,
  r as r4,
  u as u2,
  v as v2,
  x,
  y
} from "./chunk-4ACM2XXN.js";
import {
  P,
  v
} from "./chunk-VT63JL2L.js";
import {
  K,
  L,
  O,
  k
} from "./chunk-ZQMORW2K.js";
import {
  u
} from "./chunk-G2OXL5Y3.js";
import {
  l as l2
} from "./chunk-BMNRD4FO.js";
import {
  f
} from "./chunk-W7QCICS6.js";
import {
  a as a3
} from "./chunk-SPVEONZ2.js";
import {
  V
} from "./chunk-BQYXRSVC.js";
import {
  w
} from "./chunk-N4U5VIP2.js";
import {
  j2 as j,
  n
} from "./chunk-IVS2JCO6.js";
import {
  g
} from "./chunk-4GOW35CM.js";
import {
  N,
  Q,
  d,
  s as s3
} from "./chunk-TEJXT4W6.js";
import {
  s as s2
} from "./chunk-LSOJIRW6.js";
import {
  o
} from "./chunk-FSFEOCO5.js";
import {
  r as r3
} from "./chunk-ZVIMKAJW.js";
import {
  r,
  s
} from "./chunk-VSLEAHOZ.js";
import {
  S
} from "./chunk-2FUEBHWI.js";
import {
  m
} from "./chunk-VTWDBFQT.js";
import {
  a2
} from "./chunk-BM4B3CH5.js";
import {
  r as r2
} from "./chunk-SCZRL2WP.js";
import {
  a
} from "./chunk-7LCEUMDD.js";

// node_modules/@arcgis/core/CameraLayout.js
var t2 = class extends a3 {
  constructor(o3) {
    super(o3), this.row = 0, this.column = 0, this.rows = 1, this.columns = 1;
  }
  equals(o3) {
    return null != o3 && (this.row === o3.row && this.rows === o3.rows && this.column === o3.column && this.columns === o3.columns);
  }
};
r2([m({ type: Number, nonNullable: true, json: { read: false, write: false } })], t2.prototype, "row", void 0), r2([m({ type: Number, nonNullable: true, json: { read: false, write: false } })], t2.prototype, "column", void 0), r2([m({ type: Number, nonNullable: true, json: { read: false, write: false } })], t2.prototype, "rows", void 0), r2([m({ type: Number, nonNullable: true, json: { read: false, write: false } })], t2.prototype, "columns", void 0), t2 = r2([a2("esri.CameraLayout")], t2);
var l3 = t2;

// node_modules/@arcgis/core/Camera.js
var y2 = class extends a3.ClonableMixin(S) {
  constructor(...o3) {
    super(...o3), this.position = new j([0, 0, 0]), this.heading = 0, this.tilt = 0, this.fov = 55, this.layout = new l3();
  }
  normalizeCtorArgs(o3, r5, t3, e3) {
    if (o3 && "object" == typeof o3 && ("x" in o3 || Array.isArray(o3))) {
      const s5 = { position: o3 };
      return null != r5 && (s5.heading = r5), null != t3 && (s5.tilt = t3), null != e3 && (s5.fov = e3), s5;
    }
    return o3;
  }
  writePosition(o3, r5, t3, e3) {
    const s5 = o3.clone();
    s5.x = a(o3.x || 0), s5.y = a(o3.y || 0), s5.z = o3.hasZ ? a(o3.z || 0) : o3.z, r5[t3] = s5.write({}, e3);
  }
  readPosition(o3, r5) {
    const t3 = new j();
    return t3.read(o3, r5), t3.x = a(t3.x || 0), t3.y = a(t3.y || 0), t3.z = t3.hasZ ? a(t3.z || 0) : t3.z, t3;
  }
  equals(o3) {
    return null != o3 && (this.tilt === o3.tilt && this.heading === o3.heading && this.fov === o3.fov && this.position.equals(o3.position) && this.layout.equals(o3.layout));
  }
};
r2([m({ type: j, json: { write: { isRequired: true } } })], y2.prototype, "position", void 0), r2([r3("position")], y2.prototype, "writePosition", null), r2([o("position")], y2.prototype, "readPosition", null), r2([m({ type: Number, nonNullable: true, json: { write: { isRequired: true } } }), s2((o3) => a4.normalize(a(o3)))], y2.prototype, "heading", void 0), r2([m({ type: Number, nonNullable: true, json: { write: { isRequired: true } } }), s2((o3) => r(a(o3), -180, 180))], y2.prototype, "tilt", void 0), r2([m({ type: Number, nonNullable: true, json: { default: 55, write: true } }), s2((o3) => r(a(o3, 55), 1, 170))], y2.prototype, "fov", void 0), r2([m({ type: l3, nonNullable: true, json: { read: false, write: false } })], y2.prototype, "layout", void 0), y2 = r2([a2("esri.Camera")], y2);
var d2 = y2;

// node_modules/@arcgis/core/Viewpoint.js
var p;
var n3 = p = class extends S {
  constructor(e3) {
    super(e3), this.rotation = 0, this.scale = 0, this.targetGeometry = null, this.camera = null;
  }
  castRotation(e3) {
    return (e3 %= 360) < 0 && (e3 += 360), e3;
  }
  clone() {
    return new p({ rotation: this.rotation, scale: this.scale, targetGeometry: null != this.targetGeometry ? this.targetGeometry.clone() : null, camera: null != this.camera ? this.camera.clone() : null });
  }
};
r2([m({ type: Number, json: { write: true, origins: { "web-map": { default: 0, write: true }, "web-scene": { write: { overridePolicy: l4 } } } } })], n3.prototype, "rotation", void 0), r2([s2("rotation")], n3.prototype, "castRotation", null), r2([m({ type: Number, json: { write: true, origins: { "web-map": { default: 0, write: true }, "web-scene": { write: { overridePolicy: l4 } } } } })], n3.prototype, "scale", void 0), r2([m({ types: l2, json: { read: f, write: true, origins: { "web-scene": { read: f, write: { overridePolicy: l4 } } } } })], n3.prototype, "targetGeometry", void 0), r2([m({ type: d2, json: { write: true, origins: { "web-scene": { write: { isRequired: true } } } } })], n3.prototype, "camera", void 0), n3 = p = r2([a2("esri.Viewpoint")], n3);
var m2 = n3;
function l4() {
  return { enabled: !this.camera };
}

// node_modules/@arcgis/core/views/2d/viewpointUtils.js
var O2 = 96;
var Q2 = 39.37;
var T = 180 / Math.PI;
function B2(t3) {
  return t3.wkid ? t3 : t3.spatialReference || g.WGS84;
}
function D(t3, e3) {
  return e3.type ? o2(t3, e3.x, e3.y) : r4(t3, e3);
}
function W(t3) {
  return Q(t3);
}
function H(t3, e3, n4 = 0) {
  let o3 = t3.width, a5 = t3.height;
  if (0 !== n4) {
    const e4 = s(n4), i3 = Math.abs(Math.cos(e4)), c3 = Math.abs(Math.sin(e4));
    o3 = t3.width * i3 + t3.height * c3, a5 = t3.width * c3 + t3.height * i3;
  }
  const i2 = Math.max(1, e3[0]), c2 = Math.max(1, e3[1]);
  return Math.max(o3 / i2, a5 / c2) * ct(t3.spatialReference);
}
async function J(t3, r5, n4, o3) {
  var _a, _b, _c;
  let a5, i2;
  if (!t3) return null;
  if (Array.isArray(t3) && !t3.length) return null;
  if (V.isCollection(t3) && (t3 = t3.toArray()), Array.isArray(t3) && t3.length && "object" == typeof t3[0]) {
    const e3 = t3.every((t4) => "attributes" in t4), a6 = t3.some((t4) => !t4.geometry);
    let i3 = t3;
    if (e3 && a6 && r5 && r5.allLayerViews) {
      const e4 = /* @__PURE__ */ new Map();
      for (const r6 of t3) {
        const t4 = r6.layer, n6 = e4.get(t4) || [], o5 = r6.attributes[t4.objectIdField];
        null != o5 && n6.push(o5), e4.set(t4, n6);
      }
      const n5 = [];
      e4.forEach((t4, e5) => {
        var _a2;
        const o5 = (_a2 = r5.allLayerViews) == null ? void 0 : _a2.find((t5) => t5.layer.id === e5.id);
        if (o5 && "queryFeatures" in o5) {
          const r6 = e5.createQuery();
          r6.objectIds = t4, r6.returnGeometry = true, n5.push(o5.queryFeatures(r6));
        }
      });
      const o4 = await Promise.all(n5), a7 = [];
      for (const t4 of o4) if (t4 && t4.features && t4.features.length) for (const e5 of t4.features) null != e5.geometry && a7.push(e5.geometry);
      i3 = a7;
    }
    for (const t4 of i3) o3 = await J(t4, r5, n4, o3);
    return o3;
  }
  if (Array.isArray(t3) && 2 === t3.length && "number" == typeof t3[0] && "number" == typeof t3[1]) a5 = new j(t3);
  else if (t3 instanceof n) a5 = t3;
  else if ("geometry" in t3) {
    if (t3.geometry) a5 = t3.geometry;
    else if (t3.layer) {
      const e3 = t3.layer, n5 = (_a = r5.allLayerViews) == null ? void 0 : _a.find((t4) => t4.layer.id === e3.id);
      if (n5 && "queryFeatures" in n5) {
        const r6 = e3.createQuery();
        r6.objectIds = [t3.attributes[e3.objectIdField]], r6.returnGeometry = true;
        const o4 = await n5.queryFeatures(r6);
        a5 = (_c = (_b = o4 == null ? void 0 : o4.features) == null ? void 0 : _b[0]) == null ? void 0 : _c.geometry;
      }
    }
  }
  if (null == a5) return null;
  switch (a5.type) {
    case "point":
      i2 = new w({ xmin: a5.x, ymin: a5.y, xmax: a5.x, ymax: a5.y, spatialReference: a5.spatialReference });
      break;
    case "extent":
    case "multipoint":
    case "polygon":
    case "polyline":
      i2 = v(a5);
      break;
    default:
      i2 = a5.extent;
  }
  if (!i2) return null;
  k() || L(i2.spatialReference, n4) || await K();
  const c2 = O(i2, n4);
  if (!c2) return null;
  if (o3) {
    const t4 = c2.center, e3 = t4.clone();
    e3.x = P(t4.x, o3.center.x, n4), e3.x !== t4.x && c2.centerAt(e3), o3 = o3.union(c2);
  } else o3 = c2;
  return o3;
}
function K2(t3) {
  var _a;
  if (t3 && (!Array.isArray(t3) || "number" != typeof t3[0]) && ("object" == typeof t3 || Array.isArray(t3) && "object" == typeof t3[0])) {
    if ("layer" in t3 && null != ((_a = t3.layer) == null ? void 0 : _a.minScale) && null != t3.layer.maxScale) {
      const e3 = t3.layer;
      return { min: e3.minScale, max: e3.maxScale };
    }
    if (Array.isArray(t3) && t3.length && t3.every((t4) => "layer" in t4)) {
      let e3 = 0, r5 = 0;
      for (const n4 of t3) {
        const t4 = n4.layer;
        (t4 == null ? void 0 : t4.minScale) && t4.maxScale && (e3 = t4.minScale < e3 ? t4.minScale : e3, r5 = t4.maxScale > r5 ? t4.maxScale : r5);
      }
      return e3 && r5 ? { min: e3, max: r5 } : null;
    }
  }
}
function X(t3, e3) {
  const r5 = B2(t3);
  return s3(r5, e3) || r5.imageCoordinateSystem || e3.imageCoordinateSystem ? t3 : O(t3, e3);
}
async function Y(e3, r5) {
  var _a;
  if (!e3 || !r5) return new m2({ targetGeometry: new j(), scale: 0, rotation: 0 });
  let n4 = r5.spatialReference;
  const { constraints: o3, padding: a5, viewpoint: i2, size: c2 } = r5, s5 = [a5 ? c2[0] - a5.left - a5.right : c2[0], a5 ? c2[1] - a5.top - a5.bottom : c2[1]];
  let u4 = null;
  e3 instanceof m2 ? u4 = e3 : e3.viewpoint ? u4 = e3.viewpoint : e3.target && "esri.Viewpoint" === e3.target.declaredClass && (u4 = e3.target);
  let l5 = null;
  (u4 == null ? void 0 : u4.targetGeometry) ? l5 = u4.targetGeometry : e3 instanceof w ? l5 = e3 : e3 instanceof n ? l5 = await J(e3, r5, n4) : e3 && (l5 = await J(e3.center, r5, n4) || await J(e3.target, r5, n4) || await J(e3, r5, n4)), !l5 && (i2 == null ? void 0 : i2.targetGeometry) ? l5 = i2.targetGeometry : !l5 && r5.extent && (l5 = r5.extent), n4 || (n4 = B2(r5.spatialReference || r5.extent || l5)), k() || s3(l5.spatialReference, n4) || L(l5.spatialReference, n4) || await K();
  const f3 = X(l5, n4), m3 = "center" in f3 ? f3.center : f3;
  false !== r5.pickClosestTarget && "point" === m3.type && "point" === ((_a = i2.targetGeometry) == null ? void 0 : _a.type) && (m3.x = P(m3.x, i2.targetGeometry.x, m3.spatialReference));
  let y3 = 0;
  u4 ? y3 = u4.rotation : e3.hasOwnProperty("rotation") ? y3 = e3.rotation : i2 && (y3 = i2.rotation);
  let p2 = 0;
  p2 = null != (u4 == null ? void 0 : u4.targetGeometry) && "point" === u4.targetGeometry.type ? u4.scale : "scale" in e3 && e3.scale ? e3.scale : "zoom" in e3 && -1 !== e3.zoom && o3 && o3.effectiveLODs ? o3.zoomToScale(e3.zoom) : Array.isArray(l5) || "point" === l5.type || "extent" === l5.type && 0 === l5.width && 0 === l5.height ? i2.scale : H(X(l5.extent, n4), s5, y3);
  const g2 = K2(e3.target ?? e3);
  g2 && (g2.min && g2.min < p2 ? p2 = g2.min : g2.max && g2.max > p2 && (p2 = g2.max));
  let x2 = new m2({ targetGeometry: m3, scale: p2, rotation: y3 });
  return o3 && (x2 = o3.fit(x2), o3.constrainByGeometry(x2), o3.rotationEnabled || (x2.rotation = i2.rotation)), x2;
}
function Z(t3, e3) {
  const r5 = t3.targetGeometry, n4 = e3.targetGeometry;
  return r5.x = n4.x, r5.y = n4.y, r5.spatialReference = n4.spatialReference, t3.scale = e3.scale, t3.rotation = e3.rotation, t3;
}
function $(t3, e3, r5) {
  return r5 ? o2(t3, 0.5 * (e3[0] - r5.right + r5.left), 0.5 * (e3[1] - r5.bottom + r5.top)) : l(t3, e3, 0.5);
}
var _ = function() {
  const t3 = n2();
  return function(e3, r5, n4) {
    const o3 = r5.targetGeometry;
    D(t3, o3);
    const a5 = 0.5 * ot(r5);
    return e3.xmin = t3[0] - a5 * n4[0], e3.ymin = t3[1] - a5 * n4[1], e3.xmax = t3[0] + a5 * n4[0], e3.ymax = t3[1] + a5 * n4[1], e3.spatialReference = o3.spatialReference, e3;
  };
}();
function tt(t3, e3, r5, n4, o3) {
  var _a;
  return xt(t3, e3, r5.center), t3.scale = H(r5, n4), (_a = o3 == null ? void 0 : o3.constraints) == null ? void 0 : _a.constrain(t3), t3;
}
function et(t3, e3, r5, n4) {
  return lt(t3, e3, r5, n4), u3(t3, t3);
}
var rt = function() {
  const t3 = n2();
  return function(e3, r5, n4) {
    return B(e3, st(e3, r5), $(t3, r5, n4));
  };
}();
var nt = function() {
  const t3 = e2(), e3 = n2();
  return function(r5, n4, o3, s5) {
    const u4 = ot(n4), l5 = it(n4);
    return o2(e3, u4, u4), h(t3, e3), s4(t3, t3, l5), i(t3, t3, rt(e3, o3, s5)), i(t3, t3, [0, s5.top - s5.bottom]), o2(r5, t3[4], t3[5]);
  };
}();
function ot(t3) {
  var _a;
  return t3.scale * at((_a = t3.targetGeometry) == null ? void 0 : _a.spatialReference);
}
function at(t3) {
  return N(t3) ? 1 / (W(t3) * Q2 * O2) : 1;
}
function it(t3) {
  return u(t3.rotation) || 0;
}
function ct(t3) {
  return N(t3) ? W(t3) * Q2 * O2 : 1;
}
function st(t3, e3) {
  return l(t3, e3, 0.5);
}
var ut = function() {
  const t3 = n2(), e3 = n2(), r5 = n2();
  return function(n4, o3, a5, l5, f3, m3) {
    return x(t3, o3), l(e3, a5, 0.5 * m3), o2(r5, 1 / l5 * m3, -1 / l5 * m3), f2(n4, e3), f3 && s4(n4, n4, f3), c(n4, n4, r5), i(n4, n4, t3), n4;
  };
}();
var lt = function() {
  const t3 = n2();
  return function(e3, r5, n4, o3) {
    const a5 = ot(r5), i2 = it(r5);
    return D(t3, r5.targetGeometry), ut(e3, t3, n4, a5, i2, o3);
  };
}();
var ft = function() {
  const t3 = n2();
  return function(e3, r5, n4, o3) {
    const a5 = ot(r5);
    return D(t3, r5.targetGeometry), ut(e3, t3, n4, a5, 0, o3);
  };
}();
function mt(t3) {
  const e3 = d(t3);
  return e3 ? e3.valid[1] - e3.valid[0] : 0;
}
function yt(t3, e3) {
  return Math.round(mt(t3) / e3);
}
var pt = function() {
  const t3 = n2(), e3 = n2(), r5 = [0, 0, 0];
  return function(n4, o3, a5) {
    e(t3, n4, o3), v2(t3, t3), e(e3, n4, a5), v2(e3, e3), y(r5, t3, e3);
    let i2 = Math.acos(j2(t3, e3) / (q(t3) * q(e3))) * T;
    return r5[2] < 0 && (i2 = -i2), isNaN(i2) && (i2 = 0), i2;
  };
}();
var gt = function() {
  const t3 = n2();
  return function(e3, r5, n4, o3) {
    const a5 = e3.targetGeometry;
    return Z(e3, r5), nt(t3, r5, n4, o3), a5.x += t3[0], a5.y += t3[1], e3;
  };
}();
var xt = function(t3, e3, r5) {
  Z(t3, e3);
  const n4 = t3.targetGeometry;
  return n4.x = r5.x, n4.y = r5.y, n4.spatialReference = r5.spatialReference, t3;
};
var ht = function() {
  const t3 = n2();
  return function(e3, r5, n4, o3, a5) {
    a5 || (a5 = "center"), B(t3, n4, o3), l(t3, t3, 0.5);
    const i2 = t3[0], c2 = t3[1];
    switch (a5) {
      case "center":
        o2(t3, 0, 0);
        break;
      case "left":
        o2(t3, -i2, 0);
        break;
      case "top":
        o2(t3, 0, c2);
        break;
      case "right":
        o2(t3, i2, 0);
        break;
      case "bottom":
        o2(t3, 0, -c2);
        break;
      case "top-left":
        o2(t3, -i2, c2);
        break;
      case "bottom-left":
        o2(t3, -i2, -c2);
        break;
      case "top-right":
        o2(t3, i2, c2);
        break;
      case "bottom-right":
        o2(t3, i2, -c2);
    }
    return kt(e3, r5, t3), e3;
  };
}();
function bt(t3, e3, r5) {
  return Z(t3, e3), t3.rotation += r5, t3;
}
function wt(t3, e3, r5) {
  return Z(t3, e3), t3.rotation = r5, t3;
}
var dt = function() {
  const t3 = n2();
  return function(e3, r5, n4, o3, a5) {
    return Z(e3, r5), isNaN(n4) || 0 === n4 || (At(t3, o3, r5, a5), e3.scale = r5.scale * n4, St(t3, t3, e3, a5), kt(e3, e3, o2(t3, t3[0] - o3[0], o3[1] - t3[1]))), e3;
  };
}();
function jt(t3, e3, r5) {
  return Z(t3, e3), t3.scale = r5, t3;
}
var Gt = function() {
  const t3 = n2();
  return function(e3, r5, n4, o3, a5, i2) {
    return Z(e3, r5), isNaN(n4) || 0 === n4 || (At(t3, a5, r5, i2), e3.scale = r5.scale * n4, e3.rotation += o3, St(t3, t3, e3, i2), kt(e3, e3, o2(t3, t3[0] - a5[0], a5[1] - t3[1]))), e3;
  };
}();
var Rt = function() {
  const t3 = n2(), e3 = n2();
  return function(r5, n4, o3, a5, i2, c2, s5) {
    return rt(e3, c2, s5), u2(t3, i2, e3), a5 ? Gt(r5, n4, o3, a5, t3, c2) : dt(r5, n4, o3, t3, c2);
  };
}();
var At = function() {
  const t3 = e2();
  return function(e3, r5, n4, o3) {
    return S2(e3, r5, et(t3, n4, o3, 1));
  };
}();
var St = function() {
  const t3 = e2();
  return function(e3, r5, n4, o3) {
    return S2(e3, r5, lt(t3, n4, o3, 1));
  };
}();
var kt = function() {
  const t3 = n2(), e3 = e2();
  return function(r5, n4, o3) {
    Z(r5, n4);
    const a5 = ot(n4), i2 = r5.targetGeometry;
    return M(e3, it(n4)), c(e3, e3, t(a5, a5)), S2(t3, o3, e3), i2.x += t3[0], i2.y += t3[1], r5;
  };
}();

export {
  m2 as m,
  H,
  Y,
  Z,
  $,
  _,
  tt,
  rt,
  ot,
  at,
  ut,
  lt,
  ft,
  mt,
  yt,
  pt,
  gt,
  xt,
  ht,
  bt,
  wt,
  jt,
  Gt,
  Rt,
  kt
};
//# sourceMappingURL=chunk-6D65DCMG.js.map
