{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/LayerLoadContext.js", "../../@arcgis/core/portal/support/loadUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const s=this._serviceMetadatas.get(e);if(s)return s;const r=await t(e,a);return this._serviceMetadatas.set(e,r),r}async fetchItemData(t){const{id:e}=t;if(!e)return null;const{_itemDatas:a}=this;if(a.has(e))return a.get(e);const s=await t.fetchData();return a.set(e,s),s}async fetchCustomParameters(t,e){const a=await this.fetchItemData(t);return a&&\"object\"==typeof a&&(e?e(a):a.customParameters)||null}}export{e as LayerLoadContext};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{getLayerModuleType as r}from\"../../layers/support/fetchService.js\";function t(e){const t={id:e.id,name:e.name},a=r(e.type);return\"FeatureLayer\"!==a&&(t.layerType=a),t}async function a(e,r,a){if(null==e?.layers||null==e?.tables){const s=await a.fetchServiceMetadata(r,{customParameters:l(e)?.customParameters});(e=e||{}).layers=e.layers||s?.layers?.map(t),e.tables=e.tables||s?.tables?.map(t)}return e}function l(e){if(!e)return null;const{layers:r,tables:t}=e;return r?.length?r[0]:t?.length?t[0]:null}function s(e,r){if(null==r)return null;return[...e.layers||[],...e.tables||[]].find((e=>e.id===r))}function n(e,r){return[...e.layers||[],...e.tables||[]].filter((({layerType:e})=>e?r.includes(e):r.includes(\"ArcGISFeatureLayer\")))}function u(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function c(e){switch(e){case\"catalog\":return[\"CatalogLayer\"];case\"feature\":return[\"ArcGISFeatureLayer\"];case\"oriented-imagery\":return[\"OrientedImageryLayer\"];case\"subtype-group\":return[\"SubtypeGroupLayer\",\"SubtypeGroupTable\"]}return null}function i(e){switch(e){case\"CatalogLayer\":return\"CatalogLayer\";case\"OrientedImageryLayer\":return\"OrientedImageryLayer\";case\"SubtypeGroupLayer\":case\"SubtypeGroupTable\":return\"SubtypeGroupLayer\"}return\"FeatureLayer\"}async function o(r,a,s){if(!r?.url)return a??{};if(a??={},!a.layers){const e=await s.fetchServiceMetadata(r.url);a.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:u}=await e(r.url,{sceneLayerItem:r,customParameters:l(a)?.customParameters}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return a.tables=[],a;if(!a.tables&&u){const e=await u.fetchData().catch((()=>null));if(e?.tables)a.tables=e.tables.map(t);else{const r=await s.fetchServiceMetadata(n,{customParameters:l(e)?.customParameters}).catch((()=>null));a.tables=r?.tables?.map(t)}}if(a.tables)for(const e of a.tables)e.url=`${n}/${e.id}`;return a}export{t as createSublayerData,l as getFirstLayerOrTable,s as getLayerOrTable,u as getNumLayersAndTables,n as getSublayersByLayerType,c as instanceTypeToLayerTypes,i as layerTypeToLayerModuleType,o as populateSceneServiceItemData,a as preprocessFSItemData};\n"],
  "mappings": "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",
  "names": ["e", "a", "s", "t", "t", "e", "a", "s", "i", "n", "u", "r"]
}
