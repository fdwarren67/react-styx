{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/support/webStyleSymbolUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isDevEnvironment as t,adjustStaticAGOUrl as e}from\"../../core/devEnvironmentUtils.js\";import r from\"../../core/Error.js\";import{urlToObject as o,removeFile as l}from\"../../core/urlUtils.js\";import n from\"../../portal/Portal.js\";import{f as s}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as m}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{fetchStyle as i,requestJSON as p,makeCIMSymbolRef as u,Style2DUrlTemplate as c,symbolUrlFromStyleItem as f}from\"./styleUtils.js\";import{Thumbnail as y}from\"./Thumbnail.js\";import{isSymbol3D as b}from\"./typeUtils.js\";import{defaultAcceptedFormats as d}from\"./webStyleAcceptedFormats.js\";function h(t,e,o){const l=t.name;return null==l?Promise.reject(new r(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):\"Esri2DPointSymbolsStyle\"===t.styleName?U(l,e,o):i(t,e,o).then((t=>j(t,l,e,f,o)))}function g(t,e){return e.items.find((e=>e.name===t))}async function j(i,c,f,h,j){const U=null!=f?.portal?f.portal:n.getDefault(),w={portal:U,url:o(i.baseUrl),origin:\"portal-item\"},N=g(c,i.data);if(!N)throw new r(\"symbolstyleutils:symbol-name-not-found\",`The symbol name '${c}' could not be found`,{symbolName:c});const S=j?.acceptedFormats??d,D=h(N,S);if(!D)throw new r(\"symbolstyleutils:symbol-reference-no-accepted-format\",`The symbol name '${c}' does not have an accepted format (one of ${S})`,{symbolName:c});const{url:O,format:$}=D;let v=s(O,w),E=N.thumbnail?.href??null;const P=N.thumbnail?.imageData;t()&&(v=e(v)??\"\",E=e(E));const T={portal:U,url:o(l(v)),origin:\"portal-item\"};return p(v,j).then((t=>{const e=\"cim\"===$?u(t.data):t.data,r=m(e,T);if(r&&b(r)){if(E){const t=s(E,w);r.thumbnail=new y({url:t})}else P&&(r.thumbnail=new y({url:`data:image/png;base64,${P}`}));i.styleUrl?r.styleOrigin=new a({portal:f.portal,styleUrl:i.styleUrl,name:c}):i.styleName&&(r.styleOrigin=new a({portal:f.portal,styleName:i.styleName,name:c}))}return r}))}function U(t,e,r){const s=c.replaceAll(/\\{SymbolName\\}/gi,t),a=null!=e.portal?e.portal:n.getDefault();return p(s,r).then((t=>{const e=u(t.data);return m(e,{portal:a,url:o(l(s)),origin:\"portal-item\"})}))}export{j as fetchSymbolFromStyle,g as getStyleItemFromStyle,h as resolveWebStyleSymbol};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIkpB,SAASA,GAAE,GAAEC,IAAE,GAAE;AAAC,QAAM,IAAE,EAAE;AAAK,SAAO,QAAM,IAAE,QAAQ,OAAO,IAAI,EAAE,wDAAuD,wCAAwC,CAAC,IAAE,8BAA4B,EAAE,YAAU,EAAE,GAAEA,IAAE,CAAC,IAAEC,GAAE,GAAED,IAAE,CAAC,EAAE,KAAM,CAAAE,OAAG,EAAEA,IAAE,GAAEF,IAAE,GAAE,CAAC,CAAE;AAAC;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,SAAOA,GAAE,MAAM,KAAM,CAAAA,OAAGA,GAAE,SAAO,CAAE;AAAC;AAAC,eAAe,EAAEC,IAAEE,IAAE,GAAEJ,IAAEK,IAAE;AAJ39B;AAI49B,QAAMC,KAAE,SAAM,uBAAG,UAAO,EAAE,SAAO,EAAE,WAAW,GAAE,IAAE,EAAC,QAAOA,IAAE,KAAI,EAAEJ,GAAE,OAAO,GAAE,QAAO,cAAa,GAAE,IAAE,EAAEE,IAAEF,GAAE,IAAI;AAAE,MAAG,CAAC,EAAE,OAAM,IAAI,EAAE,0CAAyC,oBAAoBE,EAAC,wBAAuB,EAAC,YAAWA,GAAC,CAAC;AAAE,QAAMG,MAAEF,MAAA,gBAAAA,GAAG,oBAAiB,GAAE,IAAEL,GAAE,GAAEO,EAAC;AAAE,MAAG,CAAC,EAAE,OAAM,IAAI,EAAE,wDAAuD,oBAAoBH,EAAC,8CAA8CG,EAAC,KAAI,EAAC,YAAWH,GAAC,CAAC;AAAE,QAAK,EAAC,KAAI,GAAE,QAAO,EAAC,IAAE;AAAE,MAAI,IAAE,EAAE,GAAE,CAAC,GAAE,MAAE,OAAE,cAAF,mBAAa,SAAM;AAAK,QAAM,KAAE,OAAE,cAAF,mBAAa;AAAU,EAAAA,GAAE,MAAI,IAAE,EAAE,CAAC,KAAG,IAAG,IAAE,EAAE,CAAC;AAAG,QAAM,IAAE,EAAC,QAAOE,IAAE,KAAI,EAAE,GAAE,CAAC,CAAC,GAAE,QAAO,cAAa;AAAE,SAAOE,GAAE,GAAEH,EAAC,EAAE,KAAM,OAAG;AAAC,UAAMJ,KAAE,UAAQ,IAAE,EAAE,EAAE,IAAI,IAAE,EAAE,MAAK,IAAEQ,GAAER,IAAE,CAAC;AAAE,QAAG,KAAG,EAAE,CAAC,GAAE;AAAC,UAAG,GAAE;AAAC,cAAME,KAAE,EAAE,GAAE,CAAC;AAAE,UAAE,YAAU,IAAI,EAAE,EAAC,KAAIA,GAAC,CAAC;AAAA,MAAC,MAAM,OAAI,EAAE,YAAU,IAAI,EAAE,EAAC,KAAI,yBAAyB,CAAC,GAAE,CAAC;AAAG,MAAAD,GAAE,WAAS,EAAE,cAAY,IAAI,EAAE,EAAC,QAAO,EAAE,QAAO,UAASA,GAAE,UAAS,MAAKE,GAAC,CAAC,IAAEF,GAAE,cAAY,EAAE,cAAY,IAAI,EAAE,EAAC,QAAO,EAAE,QAAO,WAAUA,GAAE,WAAU,MAAKE,GAAC,CAAC;AAAA,IAAE;AAAC,WAAO;AAAA,EAAC,CAAE;AAAC;AAAC,SAAS,EAAE,GAAEH,IAAE,GAAE;AAAC,QAAMS,KAAE,EAAE,WAAW,oBAAmB,CAAC,GAAEC,KAAE,QAAMV,GAAE,SAAOA,GAAE,SAAO,EAAE,WAAW;AAAE,SAAOO,GAAEE,IAAE,CAAC,EAAE,KAAM,CAAAP,OAAG;AAAC,UAAMF,KAAE,EAAEE,GAAE,IAAI;AAAE,WAAOM,GAAER,IAAE,EAAC,QAAOU,IAAE,KAAI,EAAE,GAAED,EAAC,CAAC,GAAE,QAAO,cAAa,CAAC;AAAA,EAAC,CAAE;AAAC;",
  "names": ["h", "e", "i", "t", "c", "j", "U", "S", "p", "m", "s", "a"]
}
