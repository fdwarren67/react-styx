{
  "version": 3,
  "sources": ["../../@arcgis/core/core/PerformanceSampler.js", "../../@arcgis/core/core/scheduling.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nclass s{constructor(s,t=30){this.name=s,this._counter=0,this._samples=new Array(t)}push(s){null!=s&&(this._samples[++this._counter%this._samples.length]=s)}set(s){null!=s&&(this._samples[this._counter%this._samples.length]=s)}get median(){return this._samples.slice().sort(((s,t)=>s-t))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((s,t)=>s+t),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}export{s as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{nextTick as e}from\"./nextTick.js\";import t from\"./PerformanceSampler.js\";import n from\"./PooledArray.js\";import{createResolver as r,isAborted as s,createAbortError as o}from\"./promiseUtils.js\";import{Milliseconds as a}from\"./time.js\";class i{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class c{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let m=0,l=0;const u={time:a(0),deltaTime:a(0),elapsedFrameTime:a(0),frameDuration:a(0)},p=[\"prepare\",\"preRender\",\"render\",\"postRender\",\"update\",\"finish\"],f=[],h=new n;class d{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,k()}}function w(){null!=T&&(cancelAnimationFrame(T),T=requestAnimationFrame(D))}function k(){null==T&&(m=performance.now(),T=requestAnimationFrame(D))}const v={frameTasks:h,willDispatch:!1,clearFrameTasks:j,dispatch:g,executeFrameTasks:q,reschedule:w};function A(t){const n=new c(t);return f.push(n),v.willDispatch||(v.willDispatch=!0,e(g)),n}function F(e){const t=new i(e);return h.push(t),k(),new d(t)}let T=null;function j(e=!1){h.forAll((e=>{e.removed=!0})),e&&b()}function x(e){l=Math.max(0,e)}function D(){const e=performance.now();T=null;const t=h.some((e=>!e.paused&&!e.removed));T=t?requestAnimationFrame(D):null,v.executeFrameTasks(e)}function q(e){const t=a(e-m);m=e;const n=l>0?l:1e3/60,r=Math.max(0,t-n);u.time=e,u.frameDuration=a(n-r);for(let s=0;s<p.length;s++){const n=performance.now(),r=p[s];h.forAll((n=>{if(n.paused||n.removed)return;0===s&&n.ticks++;n.phases[r]&&(u.elapsedFrameTime=a(performance.now()-e),u.deltaTime=0===n.ticks?a(0):t,n.phases[r]?.call(n,u))})),U[s].push(performance.now()-n)}b(),S.push(performance.now()-e)}const _=new n;function b(){h.forAll((e=>{e.removed&&_.push(e)})),h.removeUnorderedMany(_.data,_.length),_.clear()}function g(){for(;f.length;){const e=f.shift();e.isActive&&e.callback()}v.willDispatch=!1}function y(t=1,n){const a=r(),i=()=>{s(n)?a.reject(o()):0===t?a():(--t,e((()=>i())))};return i(),a.promise}function M(e){return y(1,e)}function P(){const e=r(),t=F({postRender:()=>{t.remove(),A(e)}});return e.promise}async function R(e){await M(e),await new Promise((t=>requestAnimationFrame((()=>{e?.aborted||t()}))))}const U=p.map((e=>new t(e))),S=new t(\"total\");export{d as FrameTaskHandle,F as addFrameTask,v as debug,U as performanceInfo,S as performanceTotal,A as schedule,x as setFrameDuration,R as waitAnimationFrame,P as waitRender,M as waitTick,y as waitTicks};\n"],
  "mappings": "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",
  "names": ["s", "t", "c", "u", "t", "n", "e", "t", "e", "n", "r", "u", "s", "i", "t"]
}
