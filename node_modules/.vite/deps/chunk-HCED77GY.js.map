{
  "version": 3,
  "sources": ["../../@arcgis/core/renderers/support/RasterPresetRenderer.js", "../../@arcgis/core/layers/mixins/RasterPresetRendererMixin.js", "../../@arcgis/core/rest/imageService/fetchRasterInfo.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Clonable.js\";import o from\"../../core/JSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as s}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{enumeration as i}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{rasterRendererTypes as n,websceneRasterRendererTypes as a}from\"./rasterTypeUtils.js\";let d=class extends(r.ClonableMixin(o)){constructor(e){super(e),this.name=void 0,this.method=\"none\",this.value=void 0,this.bandIds=void 0,this.renderer=void 0}};e([t({type:String,json:{write:{isRequired:!0}}})],d.prototype,\"name\",void 0),e([t({type:[\"raster-function-template\",\"variable\",\"none\"],json:{write:{isRequired:!0}}}),i({rasterFunctionTemplate:\"raster-function-template\",variable:\"variable\",none:\"none\"})],d.prototype,\"method\",void 0),e([t({type:String,json:{write:{isRequired:!0}}})],d.prototype,\"value\",void 0),e([t({type:[s],json:{write:{isRequired:!0}}})],d.prototype,\"bandIds\",void 0),e([t({types:n,json:{write:!0,origins:{\"web-scene\":{types:a,write:{overridePolicy:e=>({enabled:e&&\"vector-field\"!==e.type&&\"flow\"!==e.type})}}}}})],d.prototype,\"renderer\",void 0),d=e([p(\"esri.renderers.support.RasterPresetRenderer\")],d);const c=d;export{c as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import t from\"../../renderers/support/RasterPresetRenderer.js\";const o=o=>{let i=class extends o{constructor(){super(...arguments),this.activePresetRendererName=null,this.presetRenderers=null}};return e([r({type:String,json:{name:\"layerDefinition.activePresetRendererName\",write:{allowNull:!0}}})],i.prototype,\"activePresetRendererName\",void 0),e([r({type:[t],json:{name:\"layerDefinition.presetRenderers\",write:!0}})],i.prototype,\"presetRenderers\",void 0),i=e([s(\"esri.layers.mixins.RasterPresetRendererMixin\")],i),i};export{o as RasterPresetRendererMixin};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../geometry/Extent.js\";import a from\"../../geometry/Point.js\";import i from\"../../geometry/SpatialReference.js\";import l from\"../../layers/support/RasterInfo.js\";import n from\"../../layers/support/RasterStorageInfo.js\";import{parseUrl as s,encode as r,asValidOptions as o}from\"../utils.js\";import u from\"../support/FeatureSet.js\";async function m(m,f,p){const c=s(m),{rasterFunction:d,sourceJSON:h}=f||{},g=d?JSON.stringify(d.rasterFunctionDefinition||d):null,y=r({...c.query,renderingRule:g,f:\"json\"}),x=o(y,p);m=c.path;const S=h||await e(m,x).then((e=>e.data)),b=S.hasRasterAttributeTable?e(`${m}/rasterAttributeTable`,x):null,v=S.hasColormap?e(`${m}/colormap`,x):null,V=S.hasHistograms?e(`${m}/histograms`,x):null,D=S.currentVersion>=10.3?e(`${m}/keyProperties`,x):null,I=S.hasMultidimensions?e(`${m}/multidimensionalInfo`,x):null,T=await Promise.allSettled([b,v,V,D,I]);let R=null;if(S.minValues&&S.minValues.length===S.bandCount){R=[];for(let e=0;e<S.minValues.length;e++)R.push({min:S.minValues[e],max:S.maxValues[e],avg:S.meanValues[e],stddev:S.stdvValues[e]})}const j=t.fromJSON(S.extent),w=Math.ceil(j.width/S.pixelSizeX-.1),M=Math.ceil(j.height/S.pixelSizeY-.1),N=i.fromJSON(S.spatialReference||S.extent.spatialReference),O=\"fulfilled\"===T[0].status?T[0].value?.data:null,J=O?.features?.length?u.fromJSON(O):null,k=\"fulfilled\"===T[1].status?T[1].value?.data.colormap:null,C=k?.length?k:null,P=\"fulfilled\"===T[2].status?T[2].value?.data.histograms:null,z=P?.[0]?.counts?.length?P:null,F=\"fulfilled\"===T[3].status?T[3].value?.data??{}:{},$=\"fulfilled\"===T[4].status?T[4].value?.data.multidimensionalInfo:null,E=$?.variables?.length?$:null;E&&E.variables.forEach((e=>{e.statistics?.length&&e.statistics.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),e.dimensions?.forEach((e=>{\"StdTime\"!==e.name||e.recurring||e.unit||(e.unit=\"ISO8601\")}))}));const{defaultVariable:H,serviceDataType:L}=S;H&&H!==F.DefaultVariable&&(F.DefaultVariable=H),L?.includes(\"esriImageServiceDataTypeVector\")&&!L.includes(F.DataType)&&(F.DataType=L.replace(\"esriImageServiceDataType\",\"\"));let A=S.noDataValue;S.noDataValues?.length&&S.noDataValues.some((e=>e!==A))&&(A=S.noDataValues);const q=S.transposeInfo?new n({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:\"lerc\",origin:new a({x:S.extent.xmin,y:S.extent.ymax,spatialReference:N}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(w,M))/Math.LN2-8)),transposeInfo:S.transposeInfo}):void 0;return new l({width:w,height:M,bandCount:S.bandCount,extent:t.fromJSON(S.extent),spatialReference:N,pixelSize:new a({x:S.pixelSizeX,y:S.pixelSizeY,spatialReference:N}),pixelType:S.pixelType.toLowerCase(),statistics:R,attributeTable:J,colormap:C,histograms:z,keyProperties:F,noDataValue:A,multidimensionalInfo:E,storageInfo:q})}function f(e,t,a){return m(e,{sourceJSON:t},a)}function p(e,t,a){return m(e,{rasterFunction:t},a)}function c(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}export{f as fetchServiceRasterInfo,p as generateRasterInfo,c as patchServiceInfo};\n"],
  "mappings": "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",
  "names": ["d", "a", "r", "o", "i", "m", "f", "p", "c", "d", "g", "x", "S", "j", "w", "P", "_a", "_b", "e", "a"]
}
