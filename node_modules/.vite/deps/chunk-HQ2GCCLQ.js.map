{
  "version": 3,
  "sources": ["../../@arcgis/core/views/webgl/checkWebGLError.js", "../../@arcgis/core/views/webgl/GLObjectType.js", "../../@arcgis/core/views/webgl/Util.js", "../../@arcgis/core/views/webgl/TextureDescriptor.js", "../../@arcgis/core/views/webgl/textureUtils.js", "../../@arcgis/core/views/webgl/ValidatedTextureDescriptor.js", "../../@arcgis/core/views/webgl/Texture.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import has from\"../../core/has.js\";import r from\"../../core/Logger.js\";const o=()=>r.getLogger(\"esri.views.webgl.checkWebGLError\");function t(e,r){switch(r){case e.INVALID_ENUM:return\"Invalid Enum. An unacceptable value has been specified for an enumerated argument.\";case e.INVALID_VALUE:return\"Invalid Value. A numeric argument is out of range.\";case e.INVALID_OPERATION:return\"Invalid Operation. The specified command is not allowed for the current state.\";case e.INVALID_FRAMEBUFFER_OPERATION:return\"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.\";case e.OUT_OF_MEMORY:return\"Out of memory. Not enough memory is left to execute the command.\";case e.CONTEXT_LOST_WEBGL:return\"WebGL context has been lost\";default:return\"Unknown error\"}}const n=!!has(\"enable-feature:webgl-debug\");function a(){return n}function c(){return n}function u(r){if(a()){const n=r.getError();if(n){const a=t(r,n),c=(new Error).stack;o().error(new e(\"webgl-error\",\"WebGL error occurred\",{message:a,stack:c}))}}}export{u as checkWebGLError,n as hasFeatureFlagWebGLDebug,a as webglDebugEnabled,c as webglValidateShadersEnabled};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar e;!function(e){e[e.Texture=0]=\"Texture\",e[e.RenderBuffer=1]=\"RenderBuffer\"}(e||(e={}));export{e as GLObjectType};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{webglDebugEnabled as e}from\"./checkWebGLError.js\";import{BufferType as r,CompressedTextureFormat as t,SizedPixelFormat as s,RenderbufferFormat as a,PixelFormat as c}from\"./enums.js\";import{getDataTypeBytes as n}from\"./getDataTypeBytes.js\";function o(e){const r=e.gl;switch(r.getError()){case r.NO_ERROR:return null;case r.INVALID_ENUM:return\"An unacceptable value has been specified for an enumerated argument\";case r.INVALID_VALUE:return\"An unacceptable value has been specified for an argument\";case r.INVALID_OPERATION:return\"The specified command is not allowed for the current state\";case r.INVALID_FRAMEBUFFER_OPERATION:return\"The currently bound framebuffer is not framebuffer complete\";case r.OUT_OF_MEMORY:return\"Not enough memory is left to execute the command\";case r.CONTEXT_LOST_WEBGL:return\"WebGL context is lost\"}return\"Unknown error\"}function i(e,r){return(e.vertexBuffers.get(r)?.usedMemory??0)/R(e.layout.get(r))}function R(e){return e[0].stride}function E(r,t,s,a,c=0){const i=r.gl;r.bindBuffer(s);for(const R of a){const s=t.get(R.name);if(null==s){console.warn(`There is no location for vertex attribute '${R.name}' defined.`);continue}const a=c*R.stride;if(R.count<=4)i.vertexAttribPointer(s,R.count,R.type,R.normalized,R.stride,R.offset+a),i.enableVertexAttribArray(s),R.divisor>0&&r.gl.vertexAttribDivisor(s,R.divisor);else if(9===R.count)for(let e=0;e<3;e++)i.vertexAttribPointer(s+e,3,R.type,R.normalized,R.stride,R.offset+12*e+a),i.enableVertexAttribArray(s+e),R.divisor>0&&r.gl.vertexAttribDivisor(s+e,R.divisor);else if(16===R.count)for(let e=0;e<4;e++)i.vertexAttribPointer(s+e,4,R.type,R.normalized,R.stride,R.offset+16*e+a),i.enableVertexAttribArray(s+e),R.divisor>0&&r.gl?.vertexAttribDivisor(s+e,R.divisor);else console.error(\"Unsupported vertex attribute element count: \"+R.count);if(e()){const e=o(r),t=n(R.type),s=R.offset,c=Math.round(t/s)!==t/s?`. Offset not a multiple of stride. DataType requires ${t} bytes, but descriptor has an offset of ${s}`:\"\";e&&console.error(`Unable to bind vertex attribute \"${R.name}\" with baseInstanceOffset ${a}${c}:`,e,R)}}}function _(e,t,s,a){const c=e.gl;e.bindBuffer(s);for(const r of a){const s=t.get(r.name);if(r.count<=4)c.disableVertexAttribArray(s),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(s,0);else if(9===r.count)for(let t=0;t<3;t++)c.disableVertexAttribArray(s+t),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(s+t,0);else if(16===r.count)for(let t=0;t<4;t++)c.disableVertexAttribArray(s+t),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(s+t,0);else console.error(\"Unsupported vertex attribute element count: \"+r.count)}e.unbindBuffer(r.ARRAY_BUFFER)}function u(e){switch(e){case c.ALPHA:case c.LUMINANCE:case c.RED:case c.RED_INTEGER:case s.R8:case s.R8I:case s.R8UI:case s.R8_SNORM:case a.STENCIL_INDEX8:return 1;case c.LUMINANCE_ALPHA:case c.RG:case c.RG_INTEGER:case s.RGBA4:case s.R16F:case s.R16I:case s.R16UI:case s.RG8:case s.RG8I:case s.RG8UI:case s.RG8_SNORM:case s.RGB565:case s.RGB5_A1:case a.DEPTH_COMPONENT16:return 2;case c.DEPTH_COMPONENT:case c.RGB:case c.RGB_INTEGER:case s.RGB8:case s.RGB8I:case s.RGB8UI:case s.RGB8_SNORM:case s.SRGB8:case a.DEPTH_COMPONENT24:return 3;case c.DEPTH_STENCIL:case c.DEPTH24_STENCIL8:case c.RGBA:case c.RGBA_INTEGER:case s.RGBA8:case s.R32F:case s.R11F_G11F_B10F:case s.RG16F:case s.R32I:case s.R32UI:case s.RG16I:case s.RG16UI:case s.RGBA8I:case s.RGBA8UI:case s.RGBA8_SNORM:case s.SRGB8_ALPHA8:case s.RGB9_E5:case s.RGB10_A2UI:case s.RGB10_A2:case a.DEPTH_STENCIL:case a.DEPTH_COMPONENT32F:case a.DEPTH24_STENCIL8:return 4;case a.DEPTH32F_STENCIL8:return 5;case s.RGB16F:case s.RGB16I:case s.RGB16UI:return 6;case s.RG32F:case s.RG32I:case s.RG32UI:case s.RGBA16F:case s.RGBA16I:case s.RGBA16UI:return 8;case s.RGB32F:case s.RGB32I:case s.RGB32UI:return 12;case s.RGBA32F:case s.RGBA32I:case s.RGBA32UI:return 16;case t.COMPRESSED_RGB_S3TC_DXT1_EXT:case t.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case t.COMPRESSED_RGBA_S3TC_DXT3_EXT:case t.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case t.COMPRESSED_R11_EAC:case t.COMPRESSED_SIGNED_R11_EAC:case t.COMPRESSED_RGB8_ETC2:case t.COMPRESSED_SRGB8_ETC2:case t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case t.COMPRESSED_RG11_EAC:case t.COMPRESSED_SIGNED_RG11_EAC:case t.COMPRESSED_RGBA8_ETC2_EAC:case t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}export{E as bindVertexBufferLayout,u as getBytesPerElementFormat,o as getErrorString,R as getStride,_ as unbindVertexBufferLayout,i as vertexCount};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{TextureType as t,PixelFormat as i,PixelType as h,TextureSamplingMode as s,TextureWrapMode as a}from\"./enums.js\";import{getBytesPerElementFormat as e}from\"./Util.js\";class p{constructor(e=0,p=e){this.width=e,this.height=p,this.target=t.TEXTURE_2D,this.pixelFormat=i.RGBA,this.dataType=h.UNSIGNED_BYTE,this.samplingMode=s.LINEAR,this.wrapMode=a.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}}function r(i){return i.width<=0||i.height<=0?0:Math.round(i.width*i.height*i.depth*(i.hasMipmap?4/3:1)*(null==i.internalFormat?4:e(i.internalFormat))*(i.target===t.TEXTURE_CUBE_MAP?6:1))}export{p as TextureDescriptor,r as estimateMemory};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import e from\"../../core/Logger.js\";import{SizedPixelFormat as r,CompressedTextureFormat as n,TextureType as i,PixelFormat as o,PixelType as a}from\"./enums.js\";const u=()=>e.getLogger(\"esri/views/webgl/textureUtils\");function l(t){(null!=t.width&&t.width<0||null!=t.height&&t.height<0||null!=t.depth&&t.depth<0)&&u().error(\"Negative dimension parameters are not allowed!\")}function h(t){return t in r}function c(t){return t in n}function d(t){return null!=t&&\"type\"in t&&\"compressed\"===t.type}function s(t){return!!t.descriptor.internalFormat&&c(t.descriptor.internalFormat)}function m(t){return null!=t&&\"byteLength\"in t}function f(t){return null!=t&&!d(t)&&!m(t)}function p(t){return t===i.TEXTURE_3D||t===i.TEXTURE_2D_ARRAY}function E(t,e,r,n=1){let o=Math.max(e,r);return t===i.TEXTURE_3D&&(o=Math.max(o,n)),Math.floor(Math.log2(o))+1}function T(e){if(null!=e.internalFormat)return e.internalFormat===o.DEPTH_STENCIL?o.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case a.FLOAT:switch(e.pixelFormat){case o.RGBA:return r.RGBA32F;case o.RGB:return r.RGB32F;default:throw new t(\"Unable to derive format\")}case a.UNSIGNED_BYTE:switch(e.pixelFormat){case o.RGBA:return r.RGBA8;case o.RGB:return r.RGB8}}return e.internalFormat=e.pixelFormat===o.DEPTH_STENCIL?o.DEPTH24_STENCIL8:e.pixelFormat}function g(t){let e=\"width\"in t?t.width:t.codedWidth,r=\"height\"in t?t.height:t.codedHeight;const n=1;return t instanceof HTMLVideoElement&&(e=t.videoWidth,r=t.videoHeight),{width:e,height:r,depth:n}}export{E as calcMipmapLevels,T as deriveInternalFormat,g as getDimensions,p as is3DTarget,m as isArrayBufferView,d as isCompressedData,c as isCompressedFormat,s as isCompressedTexture,h as isSizedPixelFormat,f as isTexImageSource,l as validateTexture};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{SizedPixelFormat as s,PixelFormat as e}from\"./enums.js\";import{TextureDescriptor as t}from\"./TextureDescriptor.js\";class a extends t{constructor(t,a){switch(super(),this.context=t,Object.assign(this,a),this.internalFormat){case s.R16F:case s.R16I:case s.R16UI:case s.R32F:case s.R32I:case s.R32UI:case s.R8_SNORM:case s.R8:case s.R8I:case s.R8UI:this.pixelFormat=e.RED}}static validate(s,e){return new a(s,e)}}export{a as ValidatedTextureDescriptor};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import{abortMaybe as i}from\"../../core/maybe.js\";import{isAbortError as r}from\"../../core/promiseUtils.js\";import{signal as s}from\"../../core/signal.js\";import{checkWebGLError as o}from\"./checkWebGLError.js\";import{TextureType as a,ResourceType as n,CompressedTextureFormat as l,TextureSamplingMode as p}from\"./enums.js\";import{GLObjectType as m}from\"./GLObjectType.js\";import{estimateMemory as h}from\"./TextureDescriptor.js\";import{isCompressedData as _,deriveInternalFormat as d,isTexImageSource as c,is3DTarget as u,validateTexture as g,isCompressedFormat as T,getDimensions as x,calcMipmapLevels as E,isSizedPixelFormat as M}from\"./textureUtils.js\";import{ValidatedTextureDescriptor as A}from\"./ValidatedTextureDescriptor.js\";const I=null,f=()=>e.getLogger(\"esri/views/webgl/Texture\");let w=class e{constructor(e,i=null,r=null){if(this.type=m.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=s(null),\"context\"in e)this._descriptor=e,r=i;else{const r=A.validate(e,i);if(!r)throw new t(\"Texture descriptor invalid\");this._descriptor=r}this._descriptor.target===a.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return h(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return null!==this._compressionAbortController.value}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(n.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new t(\"Immutable textures can't be resized!\");r.width=e,r.height=i,this._descriptor.target===a.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!_(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in l&&(this._descriptor.internalFormat=void 0),this._setData(t),!_(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(i,r,s,o,a,n,l=0){n||f().error(\"An attempt to use uninitialized data!\"),this._glName||f().error(\"An attempt to update uninitialized texture!\");const p=this._descriptor;p.internalFormat=d(p);const{context:m,pixelFormat:h,dataType:u,target:g,isImmutable:T}=p;if(T&&!this._wasImmutablyAllocated)throw new t(\"Cannot update immutable texture before allocation!\");const x=m.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||s<0||r+o>p.width||s+a>p.height)&&f().error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:E}=m;l&&(o&&a||f().warn(\"Must pass width and height if `UNPACK_SKIP_ROWS` is used\"),E.pixelStorei(E.UNPACK_SKIP_ROWS,l)),c(n)?E.texSubImage2D(g,i,r,s,o,a,h,u,n):_(n)?E.compressedTexSubImage2D(g,i,r,s,o,a,p.internalFormat,n.levels[i]):E.texSubImage2D(g,i,r,s,o,a,h,u,n),l&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0),m.bindTexture(x,e.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(i,r,s,o,a,n,l,p){p||f().error(\"An attempt to use uninitialized data!\"),this._glName||f().error(\"An attempt to update an uninitialized texture!\");const m=this._descriptor;m.internalFormat=d(m);const{context:h,pixelFormat:c,dataType:g,isImmutable:T,target:x}=m;if(T&&!this._wasImmutablyAllocated)throw new t(\"Cannot update immutable texture before allocation!\");u(x)||f().warn(\"Attempting to set 3D texture data on a non-3D texture\");const E=h.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),(r<0||s<0||o<0||r+a>m.width||s+n>m.height||o+l>m.depth)&&f().error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:M}=h;if(_(p))p=p.levels[i],M.compressedTexSubImage3D(x,i,r,s,o,a,n,l,m.internalFormat,p);else{const t=p;M.texSubImage3D(x,i,r,s,o,a,n,l,c,g,t)}h.bindTexture(E,e.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const i=this._descriptor;if(0===i.width||0===i.height)return;if(!i.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"Cannot add mipmaps to immutable texture after allocation\");i.hasMipmap=!0,this._samplingModeDirty=!0,g(i)}i.samplingMode===p.LINEAR?(this._samplingModeDirty=!0,i.samplingMode=p.LINEAR_MIPMAP_NEAREST):i.samplingMode===p.NEAREST&&(this._samplingModeDirty=!0,i.samplingMode=p.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(i.target),this._descriptor.context.bindTexture(r,e.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"Cannot delete mipmaps to immutable texture after allocation\");e.hasMipmap=!1,this._samplingModeDirty=!0,g(e)}e.samplingMode===p.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=p.LINEAR):e.samplingMode===p.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=p.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,g(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=i(this._compressionAbortController.value))}_setData(i,r){const s=this._descriptor,a=s.context?.gl;if(!a)return;o(a),this._glName||(this._glName=a.createTexture(),this._glName&&s.context.instanceCounter.increment(n.Texture,this)),g(s);const l=s.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);s.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),o(a);const p=r??s.target,m=u(p);if(c(i))this._setDataFromTexImageSource(i,p);else{const{width:e,height:r,depth:n}=s;if(null==e||null==r)throw new t(\"Width and height must be specified!\");if(m&&null==n)throw new t(\"Depth must be specified!\");if(s.internalFormat=d(s),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(p,s.internalFormat,s.hasMipmap,e,r,n),_(i)){if(!T(s.internalFormat))throw new t(\"Attempting to use compressed data with an uncompressed format!\");this._setDataFromCompressedSource(i,s.internalFormat,p)}else this._texImage(p,0,s.internalFormat,e,r,n,i),o(a),s.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),o(a),s.context.bindTexture(l,e.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let e=a.TEXTURE_CUBE_MAP_POSITIVE_X;e<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z;e++)this._setData(t,e)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:e,flipped:i,preMultiplyAlpha:r}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_setDataFromTexImageSource(t,e){const{gl:i}=this._descriptor.context,r=this._descriptor;r.internalFormat=d(r);const s=u(e),{width:a,height:n,depth:l}=x(t);r.width&&r.height,r.width||(r.width=a),r.height||(r.height=n),s&&r.depth,s&&(r.depth=l),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(e,r.internalFormat,r.hasMipmap,a,n,l),this._texImage(e,0,r.internalFormat,a,n,l,t),o(i),r.hasMipmap&&(this.generateMipmap(),o(i))}_setDataFromCompressedSource(t,e,i){const r=this._descriptor,{width:s,height:o,depth:a}=r,n=t.levels,l=E(i,s,o,a),p=Math.min(l,n.length)-1;this._descriptor.context.gl.texParameteri(r.target,r.context.gl.TEXTURE_MAX_LEVEL,p),this._forEachMipmapLevel(((t,r,s,o)=>{const a=n[Math.min(t,n.length-1)];this._compressedTexImage(i,t,e,r,s,o,a)}),p)}_texStorage(e,i,r,s,o,a){const{gl:n}=this._descriptor.context;if(!M(i))throw new t(\"Immutable textures must have a sized internal format\");if(!this._descriptor.isImmutable)return;const l=r?E(e,s,o,a):1;if(u(e)){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");n.texStorage3D(e,l,i,s,o,a)}else n.texStorage2D(e,l,i,s,o);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,o,a,n){const l=this._descriptor.context.gl,p=u(e),{isImmutable:m,pixelFormat:h,dataType:_}=this._descriptor;if(m){if(null!=n){const r=n;if(p){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.texSubImage3D(e,i,0,0,0,s,o,a,h,_,r)}else l.texSubImage2D(e,i,0,0,s,o,h,_,r)}}else{const m=n;if(p){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.texImage3D(e,i,r,s,o,a,0,h,_,m)}else l.texImage2D(e,i,r,s,o,0,h,_,m)}}_compressedTexImage(e,i,r,s,o,a,n){const l=this._descriptor.context.gl,p=u(e);if(this._descriptor.isImmutable){if(null!=n)if(p){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.compressedTexSubImage3D(e,i,0,0,0,s,o,a,r,n)}else l.compressedTexSubImage2D(e,i,0,0,s,o,r,n)}else if(p){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.compressedTexImage3D(e,i,r,s,o,a,0,n)}else l.compressedTexImage2D(e,i,r,s,o,0,n)}async _compressOnWorker(t){if(!e.compressionWorkerHandle||!e.compressionWorkerHandle.isCompressible(t))return;const i=this._descriptor.context?.gl.getExtension(\"WEBGL_compressed_texture_etc\"),s=this._descriptor.context?.gl.getExtension(\"WEBGL_compressed_texture_s3tc\");if(i||s){const o=new AbortController;this._compressionAbortController.value=o;const a={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!i,hasS3TC:!!s};e.compressionWorkerHandle.invoke(a,this._compressionAbortController.value.signal).then((t=>{t&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=t.internalFormat,this._setData(t.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)})).catch((t=>{r(t)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)}))}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:o,hasMipmap:n,target:l}=this._descriptor;const p=l===a.TEXTURE_3D;if(null==r||null==s||p&&null==o)throw new t(\"Missing texture dimensions for mipmap calculation\");for(let t=0;e(t,r,s,o),n&&(1!==r||1!==s||p&&1!==o)&&!(t>=i);++t)r=Math.max(1,r>>1),s=Math.max(1,s>>1),p&&(o=Math.max(1,o>>1))}_applySamplingMode(){const t=this._descriptor,e=t.context?.gl;let i=t.samplingMode,r=t.samplingMode;i===p.LINEAR_MIPMAP_NEAREST||i===p.LINEAR_MIPMAP_LINEAR?(i=p.LINEAR,t.hasMipmap||(r=p.LINEAR)):i!==p.NEAREST_MIPMAP_NEAREST&&i!==p.NEAREST_MIPMAP_LINEAR||(i=p.NEAREST,t.hasMipmap||(r=p.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}_applyWrapMode(){const t=this._descriptor,e=t.context?.gl;\"number\"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,e=t.context.capabilities.textureFilterAnisotropic;if(!e)return;t.context.gl.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};w.TEXTURE_UNIT_FOR_UPDATES=0,w.compressionWorkerHandle=null;export{w as Texture,I as tracer};\n"],
  "mappings": "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",
  "names": ["e", "r", "n", "c", "a", "e", "o", "e", "r", "r", "t", "s", "a", "c", "e", "o", "u", "e", "p", "r", "u", "u", "t", "c", "t", "p", "E", "e", "r", "n", "o", "a", "t", "s", "e", "f", "e", "r", "a", "t", "s", "o", "n", "l", "p", "m", "h", "u", "g", "T", "E", "c", "M", "_"]
}
