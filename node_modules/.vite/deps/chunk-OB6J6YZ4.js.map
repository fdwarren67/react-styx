{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js", "../../@arcgis/core/views/3d/support/engineContent/marker.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as e}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as r}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as i}from\"../materials/DefaultTechniqueConfiguration.js\";var s,p;!function(t){t[t.Draped=0]=\"Draped\",t[t.Screen=1]=\"Screen\",t[t.World=2]=\"World\",t[t.COUNT=3]=\"COUNT\"}(s||(s={})),function(t){t[t.Center=0]=\"Center\",t[t.Tip=1]=\"Tip\",t[t.COUNT=2]=\"COUNT\"}(p||(p={}));class a extends i{constructor(){super(...arguments),this.space=s.Screen,this.anchor=p.Center,this.occluder=!1,this.writeDepth=!1,this.hideOnShortSegments=!1,this.hasCap=!1,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=e.None,this.emissionSource=o.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.objectAndLayerIdColorInstanced=!1}get draped(){return this.space===s.Draped}}t([r({count:s.COUNT})],a.prototype,\"space\",void 0),t([r({count:p.COUNT})],a.prototype,\"anchor\",void 0),t([r()],a.prototype,\"occluder\",void 0),t([r()],a.prototype,\"writeDepth\",void 0),t([r()],a.prototype,\"hideOnShortSegments\",void 0),t([r()],a.prototype,\"hasCap\",void 0),t([r()],a.prototype,\"hasTip\",void 0),t([r()],a.prototype,\"vvSize\",void 0),t([r()],a.prototype,\"vvColor\",void 0),t([r()],a.prototype,\"vvOpacity\",void 0),t([r()],a.prototype,\"hasOccludees\",void 0),t([r()],a.prototype,\"terrainDepthTest\",void 0),t([r()],a.prototype,\"cullAboveTerrain\",void 0);export{p as LineMarkerAnchor,s as LineMarkerSpace,a as LineMarkerTechniqueConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{VisualVariables as t}from\"../shading/VisualVariables.glsl.js\";import{Float3PassUniform as i}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as e}from\"../../shaderModules/FloatPassUniform.js\";import{FloatsPassUniform as a}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";import{VertexAttribute as v}from\"../../../lib/VertexAttribute.js\";const o=8;function c(c,s){const l=c.vertex;l.uniforms.add(new e(\"intrinsicWidth\",(t=>t.width))),s.vvSize?(c.attributes.add(v.SIZEFEATUREATTRIBUTE,\"float\"),l.uniforms.add(new i(\"vvSizeMinSize\",(t=>t.vvSize.minSize)),new i(\"vvSizeMaxSize\",(t=>t.vvSize.maxSize)),new i(\"vvSizeOffset\",(t=>t.vvSize.offset)),new i(\"vvSizeFactor\",(t=>t.vvSize.factor))),l.code.add(r`float getSize() {\nreturn intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n}`)):(c.attributes.add(v.SIZE,\"float\"),l.code.add(r`float getSize(){\nreturn intrinsicWidth * size;\n}`)),s.vvOpacity?(c.attributes.add(v.OPACITYFEATUREATTRIBUTE,\"float\"),l.constants.add(\"vvOpacityNumber\",\"int\",8),l.uniforms.add(new a(\"vvOpacityValues\",(t=>t.vvOpacity.values),o),new a(\"vvOpacityOpacities\",(t=>t.vvOpacity.opacityValues),o)),l.code.add(r`float interpolateOpacity( float value ){\nif (value <= vvOpacityValues[0]) {\nreturn vvOpacityOpacities[0];\n}\nfor (int i = 1; i < vvOpacityNumber; ++i) {\nif (vvOpacityValues[i] >= value) {\nfloat f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\nreturn mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n}\n}\nreturn vvOpacityOpacities[vvOpacityNumber - 1];\n}\nvec4 applyOpacity( vec4 color ){\nreturn vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n}`)):l.code.add(r`vec4 applyOpacity( vec4 color ){\nreturn color;\n}`),s.vvColor?(c.include(t,s),c.attributes.add(v.COLORFEATUREATTRIBUTE,\"float\"),l.code.add(r`vec4 getColor(){\nreturn applyOpacity(interpolateVVColor(colorFeatureAttribute));\n}`)):(c.attributes.add(v.COLOR,\"vec4\"),l.code.add(r`vec4 getColor(){\nreturn applyOpacity(color);\n}`))}export{c as RibbonVertexPosition};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{createPrimitive as r}from\"./sdfPrimitives.js\";import{PixelFormat as e,TextureWrapMode as t}from\"../../../webgl/enums.js\";import{Texture as o}from\"../../../webgl/Texture.js\";import{TextureDescriptor as i}from\"../../../webgl/TextureDescriptor.js\";const m=64,s=m/2,n=s/5,p=m/n,w=.25;function f(p,w){const f=r(p,m,s,n),u=new i;return u.internalFormat=e.RGBA,u.width=m,u.height=m,u.wrapMode=t.CLAMP_TO_EDGE,new o(w,u,f)}export{f as createMarkerTexture,p as markerSizePerLineWidth,s as markerSymbolSize,m as markerTextureSize,n as markerThickness,w as markerTipThicknessFactor};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{markerSizePerLineWidth as e}from\"../../../../support/engineContent/marker.js\";import{addPixelRatio as r}from\"../util/View.glsl.js\";import{FloatBindUniform as o}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as t}from\"../../shaderModules/glsl.js\";import{LineMarkerSpace as a}from\"../../../shaders/LineMarkerTechniqueConfiguration.js\";function n(n,i){const d=n.vertex;r(d),null==d.uniforms.get(\"markerScale\")&&d.constants.add(\"markerScale\",\"float\",1),d.constants.add(\"markerSizePerLineWidth\",\"float\",e).code.add(t`float getLineWidth() {\nreturn max(getSize(), 1.0) * pixelRatio;\n}\nfloat getScreenMarkerSize() {\nreturn markerSizePerLineWidth * markerScale * getLineWidth();\n}`),i.space===a.World&&(d.constants.add(\"maxSegmentLengthFraction\",\"float\",.45),d.uniforms.add(new o(\"perRenderPixelRatio\",(e=>e.camera.perRenderPixelRatio))),d.code.add(t`bool areWorldMarkersHidden(vec4 pos, vec4 other) {\nvec3 midPoint = mix(pos.xyz, other.xyz, 0.5);\nfloat distanceToCamera = length(midPoint);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nfloat worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;\nfloat segmentLen = length(pos.xyz - other.xyz);\nreturn worldMarkerSize > maxSegmentLengthFraction * segmentLen;\n}\nfloat getWorldMarkerSize(vec4 pos) {\nfloat distanceToCamera = length(pos.xyz);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nreturn getScreenMarkerSize() * screenToWorldRatio;\n}`))}export{n as MarkerSizing};\n"],
  "mappings": "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",
  "names": ["s", "a", "d", "c", "s", "l", "e", "s", "n", "p", "w", "n", "i", "d", "p", "s", "e"]
}
