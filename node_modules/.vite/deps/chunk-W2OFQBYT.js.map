{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2BindUniform.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js", "../../@arcgis/core/webscene/support/AlphaCutoff.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as e}from\"../../../../webgl/Uniform.js\";class o extends e{constructor(e,o){super(e,\"ivec2\",r.Bind,((r,i)=>r.setUniform2iv(e,o(i))))}}export{o as Integer2BindUniform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{HighlightReadBitmap as i}from\"../HighlightReadBitmap.glsl.js\";import{ShaderOutput as t}from\"../ShaderOutput.js\";import{glsl as e}from\"../../shaderModules/glsl.js\";import{Integer2BindUniform as l}from\"../../shaderModules/Integer2BindUniform.js\";import{IntegerBindUniform as h}from\"../../shaderModules/IntegerBindUniform.js\";import{Texture2DBindUniform as g}from\"../../shaderModules/Texture2DBindUniform.js\";function d(d,u){const{fragment:o}=d;u.output===t.Highlight?(o.uniforms.add(new g(\"depthTexture\",(i=>i.mainDepth)),new g(\"highlightTexture\",(i=>i.highlightMixTexture)),new h(\"highlightLevel\",(i=>i.highlightLevel??0)),new l(\"highlightMixOrigin\",(i=>i.highlightMixOrigin))),d.outputs.add(\"fragHighlight\",\"vec2\",0),d.include(i),o.code.add(e`vec2 getAccumulatedHighlight() {\nreturn texelFetch(highlightTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;\n}\nvoid outputHighlight(bool occluded) {\nif (highlightLevel == 0) {\nuint bits = occluded ? 3u : 1u;\nfragHighlight = vec2(float(bits) / 255.0, 0.0);\n} else {\nint ll = (highlightLevel & 3) << 1;\nint li = (highlightLevel >> 2) & 3;\nuint bits;\nif (occluded) {\nbits = 3u << ll;\n} else {\nbits = 1u << ll;\n}\nvec2 combinedHighlight = getAccumulatedHighlight();\nuint accumulatedI = uint(combinedHighlight[li] * 255.0);\ncombinedHighlight[li] = float(bits | accumulatedI) / 255.0;\nfragHighlight = combinedHighlight;\n}\n}\nbool isHighlightOccluded() {\nfloat sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;\nreturn gl_FragCoord.z > sceneDepth + 5e-7;\n}\nvoid calculateOcclusionAndOutputHighlight() {\noutputHighlight(isHighlightOccluded());\n}`),u.canHaveOverlay&&o.code.add(e`void calculateOcclusionAndOutputHighlightOverlay(vec2 highlightToAdd) {\nuint levelBits = readLevelBits(highlightToAdd, highlightLevel);\nif ((levelBits & 1u) == 0u) { discard; }\noutputHighlight(isHighlightOccluded());\n}`)):o.code.add(e`void calculateOcclusionAndOutputHighlight() {}`)}export{d as OutputHighlight};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst o=1/255.5;export{o as alphaCutoff};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAIgH,IAAMA,KAAN,cAAgB,EAAC;AAAA,EAAC,YAAYC,IAAED,IAAE;AAAC,UAAMC,IAAE,SAAQ,EAAE,MAAM,CAAC,GAAEC,OAAI,EAAE,cAAcD,IAAED,GAAEE,EAAC,CAAC,CAAE;AAAA,EAAC;AAAC;;;ACAiN,SAAS,EAAEC,IAAE,GAAE;AAAC,QAAK,EAAC,UAASC,GAAC,IAAED;AAAE,IAAE,WAASE,GAAE,aAAWD,GAAE,SAAS,IAAI,IAAI,EAAE,gBAAgB,CAAAE,OAAGA,GAAE,SAAU,GAAE,IAAI,EAAE,oBAAoB,CAAAA,OAAGA,GAAE,mBAAoB,GAAE,IAAI,EAAE,kBAAkB,CAAAA,OAAGA,GAAE,kBAAgB,CAAE,GAAE,IAAIF,GAAE,sBAAsB,CAAAE,OAAGA,GAAE,kBAAmB,CAAC,GAAEH,GAAE,QAAQ,IAAI,iBAAgB,QAAO,CAAC,GAAEA,GAAE,QAAQ,CAAC,GAAEC,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA4B1uB,GAAE,EAAE,kBAAgBA,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA,EAI/B,KAAGA,GAAE,KAAK,IAAI,iDAAiD;AAAC;;;AChClE,IAAMG,KAAE,IAAE;",
  "names": ["o", "e", "i", "d", "o", "n", "i", "o"]
}
