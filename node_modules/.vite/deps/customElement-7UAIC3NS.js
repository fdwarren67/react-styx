import {
  f
} from "./chunk-2GIEDWQ6.js";
import {
  ref
} from "./chunk-LTKIMXCE.js";
import {
  s
} from "./chunk-RZAGQ6CT.js";
import {
  b
} from "./chunk-6JIDXA46.js";
import {
  ut,
  xt
} from "./chunk-VQ5234AM.js";
import "./chunk-PXZ2RU65.js";
import {
  i
} from "./chunk-S3EVYUV4.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  createEvent,
  css,
  html,
  nothing,
  safeClassMap,
  svg
} from "./chunk-MALSDV7D.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@esri/calcite-components/dist/components/calcite-stepper/customElement.js
var c = {
  actionIcon: "action-icon",
  actionContainer: "action-container",
  stepBarContainer: "step-bar-container",
  singleView: "single-view"
};
var a = {
  stepBar: "step-bar",
  stepBarActive: "step-bar--active",
  stepBarComplete: "step-bar--complete",
  stepBarDisabled: "step-bar--disabled",
  stepBarError: "step-bar--error",
  stepBarInActive: "step-bar--inactive"
};
var P = ({ disabled: h, active: e, complete: t, error: i2 }) => html`<svg class=${safeClassMap({
  [a.stepBar]: true
})}>${svg`<rect class=${safeClassMap({
  [a.stepBarActive]: e,
  [a.stepBarComplete]: t,
  [a.stepBarDisabled]: h,
  [a.stepBarError]: i2,
  [a.stepBarInActive]: true
})} width=100% x=0 y=0 />`}</svg>`;
var $ = css`:host([scale=s]){--calcite-internal-stepper-item-spacing-unit-s: .25rem;--calcite-internal-stepper-action-block-size: 2.75rem;--calcite-internal-stepper-action-inline-size: 2rem;--calcite-internal-step-bar-gap: .25rem}:host([scale=m]){--calcite-internal-stepper-item-spacing-unit-s: .5rem;--calcite-internal-stepper-action-block-size: 3.25rem;--calcite-internal-stepper-action-inline-size: 2.5rem}:host([scale=l]){--calcite-internal-stepper-item-spacing-unit-s: .75rem;--calcite-internal-stepper-action-block-size: 4rem;--calcite-internal-stepper-action-inline-size: 3rem;--calcite-internal-step-bar-gap: .75rem}:host{display:flex}.container{position:relative;display:flex;inline-size:100%;min-inline-size:fit-content;flex-direction:row;flex-wrap:wrap;align-items:stretch;justify-content:space-between}:host([layout=vertical]) .container{flex:1 1 auto;flex-direction:column}:host([layout=horizontal]) .container,:host([layout=horizontal-single]) .container{display:grid;grid-template-areas:"items" "content";gap:.5rem var(--calcite-internal-stepper-item-spacing-unit-s)}:host([layout=horizontal][scale=s]) .container,:host([layout=horizontal-single][scale=s]) .container{gap:.25rem var(--calcite-internal-stepper-item-spacing-unit-s)}:host([layout=horizontal][scale=l]) .container,:host([layout=horizontal-single][scale=l]) .container{gap:.75rem var(--calcite-internal-stepper-item-spacing-unit-s)}:host([layout=horizontal]) .container.single-view{display:flex;grid-template-columns:none}.action-icon{position:relative;display:flex;flex-grow:0;block-size:var(--calcite-internal-stepper-action-block-size);inline-size:var(--calcite-internal-stepper-action-inline-size)}.action-container{position:absolute;display:flex;justify-content:space-between;padding-block:.25rem;inline-size:100%}.step-bar{display:flex;block-size:100%;inline-size:100%}.step-bar-container{position:absolute;display:flex;align-items:flex-start;justify-content:space-between;block-size:.125rem;inline-size:100%;gap:var(--calcite-internal-step-bar-gap, .5rem)}.step-bar--inactive{fill:var(--calcite-color-border-3, #dfdfdf);fill-opacity:1;block-size:100%}.step-bar--active{fill:var(--calcite-color-brand)}.step-bar--complete{fill:var(--calcite-color-brand);fill-opacity:.5}.step-bar--error{fill:var(--calcite-color-status-danger)}.step-bar--disabled{opacity:.5}:host([hidden]){display:none}[hidden]{display:none}`;
var _w = class _w extends LitElement {
  // #endregion
  // #region Lifecycle
  constructor() {
    super(), this.enabledItems = [], this.guid = `calcite-stepper-action-${i()}`, this.itemMap = /* @__PURE__ */ new Map(), this.items = [], this.multipleViewMode = false, this.mutationObserver = b("mutation", () => this.updateItems()), this.icon = false, this.layout = "horizontal", this.messages = s(), this.numbered = false, this.scale = "m", this.selectedItem = null, this.calciteInternalStepperItemChange = createEvent({
      cancelable: false
    }), this.calciteStepperChange = createEvent({ cancelable: false }), this.calciteStepperItemChange = createEvent({ cancelable: false }), this.listen("calciteInternalStepperItemKeyEvent", this.calciteInternalStepperItemKeyEvent), this.listen("calciteInternalStepperItemRegister", this.registerItem), this.listen("calciteInternalStepperItemSelect", this.updateItem), this.listen("calciteStepperItemSelect", this.handleItemSelect);
  }
  // #endregion
  // #region Public Methods
  /** Set the last `calcite-stepper-item` as active. */
  async endStep() {
    const e = this.getEnabledStepIndex(this.items.length - 1, "previous");
    typeof e == "number" && this.updateStep(e);
  }
  /**
   * Set a specified `calcite-stepper-item` as active.
   *
   * @param step
   */
  async goToStep(e) {
    const t = e - 1;
    this.currentActivePosition !== t && this.updateStep(t);
  }
  /** Set the next `calcite-stepper-item` as active. */
  async nextStep() {
    const e = this.getEnabledStepIndex(this.currentActivePosition + 1, "next");
    typeof e == "number" && this.updateStep(e);
  }
  /** Set the previous `calcite-stepper-item` as active. */
  async prevStep() {
    const e = this.getEnabledStepIndex(this.currentActivePosition - 1, "previous");
    typeof e == "number" && this.updateStep(e);
  }
  /** Set the first `calcite-stepper-item` as active. */
  async startStep() {
    const e = this.getEnabledStepIndex(0, "next");
    typeof e == "number" && this.updateStep(e);
  }
  connectedCallback() {
    var _a;
    super.connectedCallback(), (_a = this.mutationObserver) == null ? void 0 : _a.observe(this.el, { childList: true }), this.updateItems();
  }
  willUpdate(e) {
    (e.has("icon") && (this.hasUpdated || this.icon !== false) || e.has("layout") && (this.hasUpdated || this.layout !== "horizontal") || e.has("numbered") && (this.hasUpdated || this.numbered !== false) || e.has("scale") && (this.hasUpdated || this.scale !== "m")) && (this.updateItems(), this.determineActiveStepper()), e.has("numberingSystem") && this.setStepperItemNumberingSystem(), e.has("currentActivePosition") && requestAnimationFrame(() => {
      this.determineActiveStepper();
    });
  }
  loaded() {
    if (typeof this.currentActivePosition != "number") {
      const e = this.getFirstEnabledStepperPosition();
      e === 0 && (this.currentActivePosition = e), this.calciteInternalStepperItemChange.emit({
        position: e
      });
    }
  }
  disconnectedCallback() {
    var _a;
    super.disconnectedCallback(), (_a = this.mutationObserver) == null ? void 0 : _a.disconnect();
  }
  // #endregion
  // #region Private Methods
  calciteInternalStepperItemKeyEvent(e) {
    const t = e.detail.item, i2 = e.target;
    switch (t.key) {
      case "ArrowDown":
      case "ArrowRight":
        xt(this.enabledItems, i2, "next");
        break;
      case "ArrowUp":
      case "ArrowLeft":
        xt(this.enabledItems, i2, "previous");
        break;
      case "Home":
        xt(this.enabledItems, i2, "first");
        break;
      case "End":
        xt(this.enabledItems, i2, "last");
        break;
    }
    e.stopPropagation();
  }
  registerItem(e) {
    const t = e.target, { content: i2, position: s2 } = e.detail;
    this.itemMap.set(t, { position: s2, content: i2 }), this.enabledItems = this.filterItems(), e.stopPropagation();
  }
  updateItem(e) {
    const { position: t } = e.detail;
    typeof t == "number" && (this.currentActivePosition = t, this.selectedItem = e.target), this.calciteInternalStepperItemChange.emit({
      position: t
    });
  }
  handleItemSelect() {
    this.emitItemSelect();
  }
  emitItemSelect() {
    this.calciteStepperItemChange.emit(), this.calciteStepperChange.emit();
  }
  updateItems() {
    this.el.querySelectorAll("calcite-stepper-item").forEach((e) => {
      e.icon = this.icon, e.numbered = this.numbered, e.layout = this.layout, e.scale = this.scale;
    });
  }
  determineActiveStepper() {
    const { items: e } = this;
    if (e.length < 2)
      return;
    const { currentActivePosition: t, layout: i2 } = this;
    this.multipleViewMode = i2 !== "horizontal-single", e.forEach((s2, n) => {
      s2.itemHidden = i2 === "horizontal-single" && n !== (t || 0);
    });
  }
  getEnabledStepIndex(e, t = "next") {
    var _a;
    const { items: i2, currentActivePosition: s2 } = this;
    let n = e;
    for (; ((_a = i2[n]) == null ? void 0 : _a.disabled) && this.layout !== "horizontal-single"; )
      n = n + (t === "previous" ? -1 : 1);
    return n !== s2 && n < i2.length && n >= 0 ? n : null;
  }
  updateStep(e) {
    this.currentActivePosition = e, this.calciteInternalStepperItemChange.emit({
      position: e
    });
  }
  filterItems() {
    return this.items.filter((e) => !e.disabled && !f(e));
  }
  setStepperItemNumberingSystem() {
    this.items.forEach((e) => {
      e.numberingSystem = this.numberingSystem;
    });
  }
  handleActionClick(e) {
    const t = this.currentActivePosition;
    e.target.getAttribute("data-position") === "start" ? this.prevStep() : this.nextStep(), typeof this.currentActivePosition == "number" && t !== this.currentActivePosition && !this.items[this.currentActivePosition].disabled && this.emitItemSelect();
  }
  getFirstEnabledStepperPosition() {
    const e = this.items.findIndex((t) => !t.disabled);
    return e > -1 ? e : 0;
  }
  setContainerEl(e) {
    this.containerEl = e;
  }
  handleDefaultSlotChange(e) {
    const t = ut(e).filter((s2) => (s2 == null ? void 0 : s2.tagName) === "CALCITE-STEPPER-ITEM" && !f(s2));
    this.items = t;
    const i2 = Array(t.length).fill("1fr").join(" ");
    this.containerEl.style.gridTemplateAreas = i2, this.containerEl.style.gridTemplateColumns = i2, this.setStepperItemNumberingSystem();
  }
  // #endregion
  // #region Rendering
  render() {
    return this.el.ariaLabel = this.messages.label, this.el.role = "region", html`<div class=${safeClassMap({ container: true, [c.singleView]: this.layout === "horizontal-single" })} ${ref(this.setContainerEl)}>${this.layout === "horizontal-single" && html`<div class=${safeClassMap({ [c.stepBarContainer]: true })}>${this.items.map((e, t) => P({ active: t === this.currentActivePosition, complete: e.complete && t !== this.currentActivePosition && !e.error, disabled: e.disabled && t !== this.currentActivePosition, error: e.error && t !== this.currentActivePosition }))}</div>` || ""}${this.layout === "horizontal-single" && html`<div class=${safeClassMap({ [c.actionContainer]: true })}>${this.renderAction("start")}${this.renderAction("end")}</div>` || ""}<slot @slotchange=${this.handleDefaultSlotChange}></slot></div>`;
  }
  renderAction(e) {
    const t = e === "start", i2 = t ? "chevron-left" : "chevron-right", { currentActivePosition: s2, multipleViewMode: n, layout: u } = this, b2 = this.items.length, g = `${this.guid}-${t ? "start" : "end"}`;
    return u === "horizontal-single" && !n ? html`<calcite-action alignment=center appearance=transparent class=${safeClassMap({
      [c.actionIcon]: true
    })} compact data-position=${e ?? nothing} .disabled=${s2 === 0 && t || s2 === b2 - 1 && !t} .icon=${i2} icon-flip-rtl id=${g ?? nothing} @click=${this.handleActionClick} .scale=${this.scale} .text=${t ? this.messages.previousStep : this.messages.nextStep}></calcite-action>` : null;
  }
};
_w.properties = { currentActivePosition: 16, icon: 7, layout: 3, messageOverrides: 0, numbered: 7, numberingSystem: 3, scale: 3, selectedItem: 0 };
_w.styles = $;
var w = _w;
S("calcite-stepper", w);
export {
  w as Stepper
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-stepper/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=customElement-7UAIC3NS.js.map
