import {
  I,
  T,
  v
} from "./chunk-YJUTXVD7.js";
import {
  m,
  p
} from "./chunk-VBBJGZOS.js";
import {
  m as m2
} from "./chunk-2GIEDWQ6.js";
import {
  createRef,
  ref
} from "./chunk-LTKIMXCE.js";
import {
  s
} from "./chunk-RZAGQ6CT.js";
import {
  ut
} from "./chunk-VQ5234AM.js";
import "./chunk-PXZ2RU65.js";
import "./chunk-S3EVYUV4.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  createEvent,
  css,
  html,
  nothing,
  safeClassMap,
  safeStyleMap
} from "./chunk-MALSDV7D.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@esri/calcite-components/dist/components/calcite-inline-editable/customElement.js
var $ = css`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) .controls-wrapper{block-size:1.5rem}:host([scale=m]) .controls-wrapper{block-size:2rem}:host([scale=l]) .controls-wrapper{block-size:2.75rem}.wrapper{box-sizing:border-box;display:flex;justify-content:space-between;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;background-color:var(--calcite-inline-editable-background-color, var(--calcite-color-foreground-1))}.wrapper .input-wrapper{flex:1 1 0%}:host(:not([editing-enabled]):not([disabled])) .wrapper:hover{background-color:var(--calcite-inline-editable-background-color-hover, var(--calcite-color-foreground-2))}.controls-wrapper{display:flex}calcite-button{--calcite-button-background-color: var(--calcite-inline-editable-button-background-color);--calcite-button-corner-radius: var(--calcite-inline-editable-button-corner-radius);--calcite-button-loader-color: var(--calcite-inline-editable-button-loader-color);--calcite-button-shadow-color: var(--calcite-inline-editable-button-shadow-color);--calcite-button-text-color: var(--calcite-inline-editable-button-text-color)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`;
var n = {
  wrapper: "wrapper",
  confirmChangesButton: "confirm-changes-button",
  cancelEditingButton: "cancel-editing-button",
  inputWrapper: "input-wrapper",
  cancelEditingButtonWrapper: "cancel-editing-button-wrapper",
  enableEditingButton: "enable-editing-button",
  controlsWrapper: "controls-wrapper"
};
var _v = class _v extends LitElement {
  // #endregion
  // #region Lifecycle
  constructor() {
    super(), this.cancelEditingButton = createRef(), this.confirmEditingButton = createRef(), this._editingEnabled = false, this.enableEditingButton = createRef(), this.controls = false, this.disabled = false, this.loading = false, this.messages = s(), this.calciteInlineEditableEditCancel = createEvent({ cancelable: false }), this.calciteInlineEditableEditConfirm = createEvent({ cancelable: false }), this.calciteInternalInlineEditableEnableEditingChange = createEvent({ cancelable: false }), this.listen("calciteInternalInputBlur", this.blurHandler);
  }
  get shouldShowControls() {
    return this.editingEnabled && this.controls;
  }
  /** When `true`, inline editing is enabled on the component. */
  get editingEnabled() {
    return this._editingEnabled;
  }
  set editingEnabled(t) {
    const e = this._editingEnabled;
    t !== e && (this._editingEnabled = t, this.editingEnabledWatcher(t, e));
  }
  // #endregion
  // #region Public Methods
  /** Sets focus on the component. */
  async setFocus() {
    var _a;
    await m2(this), (_a = this.inputElement) == null ? void 0 : _a.setFocus();
  }
  connectedCallback() {
    super.connectedCallback(), v(this);
  }
  willUpdate(t) {
    t.has("disabled") && (this.hasUpdated || this.disabled !== false) && this.disabledWatcher(this.disabled);
  }
  updated() {
    m(this);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), T(this);
  }
  // #endregion
  // #region Private Methods
  disabledWatcher(t) {
    this.inputElement && (this.inputElement.disabled = t);
  }
  editingEnabledWatcher(t, e) {
    this.inputElement && (this.inputElement.editingEnabled = t), !t && e && (this.shouldEmitCancel = true);
  }
  blurHandler() {
    this.controls || this.disableEditing();
  }
  async handleDefaultSlotChange(t) {
    var _a;
    const e = ut(t).filter((d) => d.matches("calcite-input"))[0];
    this.inputElement = e, e && (await e.componentOnReady(), e.editingEnabled = this.editingEnabled, e.disabled = this.disabled, e.label = e.label || I(this), this.scale = this.scale || ((_a = this.inputElement) == null ? void 0 : _a.scale) || "m");
  }
  onLabelClick() {
    this.setFocus();
  }
  enableEditing() {
    var _a, _b;
    this.valuePriorToEditing = (_a = this.inputElement) == null ? void 0 : _a.value, this.editingEnabled = true, (_b = this.inputElement) == null ? void 0 : _b.setFocus(), this.calciteInternalInlineEditableEnableEditingChange.emit();
  }
  disableEditing() {
    this.editingEnabled = false;
  }
  cancelEditing() {
    var _a;
    this.inputElement && (this.inputElement.value = this.valuePriorToEditing), this.disableEditing(), (_a = this.enableEditingButton.value) == null ? void 0 : _a.setFocus(), !this.editingEnabled && this.shouldEmitCancel && this.calciteInlineEditableEditCancel.emit();
  }
  async escapeKeyHandler(t) {
    var _a;
    t.defaultPrevented || (t.key === "Escape" && (t.preventDefault(), this.cancelEditing()), t.key === "Tab" && this.shouldShowControls && (!t.shiftKey && t.target === this.inputElement && (t.preventDefault(), this.cancelEditingButton.value.setFocus()), t.shiftKey && t.target === this.cancelEditingButton.value && (t.preventDefault(), (_a = this.inputElement) == null ? void 0 : _a.setFocus())));
  }
  async cancelEditingHandler(t) {
    t.preventDefault(), this.cancelEditing();
  }
  async enableEditingHandler(t) {
    this.disabled || t.target !== this.enableEditingButton.value && t.target !== this.inputElement || (t.preventDefault(), this.editingEnabled || this.enableEditing());
  }
  async confirmChangesHandler(t) {
    t.preventDefault(), this.calciteInlineEditableEditConfirm.emit();
    try {
      this.afterConfirm && (this.loading = true, await this.afterConfirm(), this.disableEditing(), this.enableEditingButton.value.setFocus());
    } catch {
    } finally {
      this.loading = false;
    }
  }
  // #endregion
  // #region Rendering
  render() {
    return p({ disabled: this.disabled, children: html`<div class=${safeClassMap(n.wrapper)} @click=${this.enableEditingHandler} @keydown=${this.escapeKeyHandler}><div class=${safeClassMap(n.inputWrapper)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div><div class=${safeClassMap(n.controlsWrapper)}><calcite-button appearance=transparent class=${safeClassMap(n.enableEditingButton)} .disabled=${this.disabled} icon-start=pencil kind=neutral .label=${this.messages.enableEditing} @click=${this.enableEditingHandler} .scale=${this.scale} style=${safeStyleMap({
      opacity: this.editingEnabled ? "0" : "1",
      width: this.editingEnabled ? "0" : "inherit"
    })} title=${this.messages.enableEditing ?? nothing} type=button ${ref(this.enableEditingButton)}></calcite-button>${this.shouldShowControls && [
      html`<div class=${safeClassMap(n.cancelEditingButtonWrapper)}><calcite-button appearance=transparent class=${safeClassMap(n.cancelEditingButton)} .disabled=${this.disabled} icon-start=x kind=neutral .label=${this.messages.cancelEditing} @click=${this.cancelEditingHandler} .scale=${this.scale} title=${this.messages.cancelEditing ?? nothing} type=button ${ref(this.cancelEditingButton)}></calcite-button></div>`,
      html`<calcite-button appearance=solid class=${safeClassMap(n.confirmChangesButton)} .disabled=${this.disabled} icon-start=check kind=brand .label=${this.messages.confirmChanges} .loading=${this.loading} @click=${this.confirmChangesHandler} .scale=${this.scale} title=${this.messages.confirmChanges ?? nothing} type=button ${ref(this.confirmEditingButton)}></calcite-button>`
    ] || ""}</div></div>` });
  }
};
_v.properties = { afterConfirm: 0, controls: 7, disabled: 7, editingEnabled: 7, loading: 7, messageOverrides: 0, scale: 3 };
_v.shadowRootOptions = { mode: "open", delegatesFocus: true };
_v.styles = $;
var v2 = _v;
S("calcite-inline-editable", v2);
export {
  v2 as InlineEditable
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-inline-editable/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=customElement-AHN72P64.js.map
