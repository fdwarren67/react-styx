import {
  C,
  H
} from "./chunk-R3C42XIH.js";
import "./chunk-7LRZLRAB.js";
import {
  vt
} from "./chunk-VQ5234AM.js";
import "./chunk-S3EVYUV4.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  css,
  html,
  nothing2 as nothing,
  safeClassMap,
  safeStyleMap
} from "./chunk-MALSDV7D.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@esri/calcite-components/dist/components/calcite-avatar/customElement.js
var u = {
  thumbnail: "thumbnail",
  background: "background",
  initials: "initials",
  icon: "icon"
};
function z(a) {
  a = x(a);
  let e = 0;
  for (let i = 0; i < a.length; i++)
    e = a.charCodeAt(i) + ((e << 5) - e);
  let t = "#";
  for (let i = 0; i < 3; i++) {
    const r = e >> i * 8 & 255;
    t += ("00" + r.toString(16)).substr(-2);
  }
  return t;
}
function x(a) {
  const e = Math.floor(a.length / 2), t = a.split("").reverse().join("");
  return t.substring(e) + t.slice(0, e);
}
function $(a) {
  let { r: e, g: t, b: i } = a;
  e /= 255, t /= 255, i /= 255;
  const r = Math.max(e, t, i), l = Math.min(e, t, i), s = r - l;
  if (r === l)
    return 0;
  let n = (r + l) / 2;
  switch (r) {
    case e:
      n = (t - i) / s + (t < i ? 6 : 0);
      break;
    case t:
      n = (i - e) / s + 2;
      break;
    case i:
      n = (e - t) / s + 4;
      break;
  }
  return Math.round(n * 60);
}
function y(a) {
  return $(H(a));
}
var C2 = css`:host{display:inline-block;overflow:hidden;border-radius:var(--calcite-avatar-corner-radius, 50%);color:var(--calcite-avatar-color, var(--calcite-color-text-2))}:host([scale=s]){block-size:1.5rem;inline-size:1.5rem;font-size:var(--calcite-font-size--3)}:host([scale=m]){block-size:2rem;inline-size:2rem;font-size:var(--calcite-font-size--2)}:host([scale=l]){block-size:2.75rem;inline-size:2.75rem;font-size:var(--calcite-font-size-0)}.icon{display:flex}.background{display:flex;block-size:100%;inline-size:100%;align-items:center;justify-content:center;border-radius:var(--calcite-avatar-corner-radius, 50%)}.initials{font-weight:var(--calcite-font-weight-bold);text-transform:uppercase}.thumbnail{block-size:100%;inline-size:100%;border-radius:var(--calcite-avatar-corner-radius, 50%)}:host([hidden]){display:none}[hidden]{display:none}`;
var _T = class _T extends LitElement {
  constructor() {
    super(...arguments), this.thumbnailFailedToLoad = false, this.scale = "m";
  }
  // #endregion
  // #region Private Methods
  determineContent() {
    if (this.thumbnail && !this.thumbnailFailedToLoad)
      return html`<img alt=${(this.label || "") ?? nothing} class=${safeClassMap(u.thumbnail)} @error=${() => this.thumbnailFailedToLoad = true} src=${this.thumbnail ?? nothing}>`;
    const e = this.generateInitials(), t = this.generateFillColor();
    return html`<span .ariaLabel=${this.label || this.fullName} class=${safeClassMap(u.background)} role=figure style=${safeStyleMap({ backgroundColor: t })}>${e ? html`<span aria-hidden=true class=${safeClassMap(u.initials)}>${e}</span>` : html`<calcite-icon class=${safeClassMap(u.icon)} icon=user .scale=${this.scale}></calcite-icon>`}</span>`;
  }
  /** Generate a valid background color that is consistent and unique to this user */
  generateFillColor() {
    const { userId: e, username: t, fullName: i, el: r } = this, l = vt(r), s = e && `#${e.substr(e.length - 6)}`, n = t || i || "", h = s && C(s) ? s : z(n);
    return !e && !n || !C(h) ? "var(--calcite-avatar-background-color, var(--calcite-color-foreground-2))" : `var(--calcite-avatar-background-color, hsl(${y(h)}, 60%, ${l === "dark" ? 20 : 90}%))`;
  }
  /** Use fullName or username to generate initials */
  generateInitials() {
    const { fullName: e, username: t } = this;
    return e ? e.trim().split(" ").map((i) => i.substring(0, 1)).join("") : t ? t.substring(0, 2) : false;
  }
  // #endregion
  // #region Rendering
  render() {
    return this.determineContent();
  }
};
_T.properties = { thumbnailFailedToLoad: 16, fullName: 3, label: 1, scale: 3, thumbnail: 3, userId: 3, username: 3 };
_T.styles = C2;
var T = _T;
S("calcite-avatar", T);
export {
  T as Avatar
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-avatar/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=customElement-DMNPCEJV.js.map
