import {
  b
} from "./chunk-6JIDXA46.js";
import {
  i
} from "./chunk-S3EVYUV4.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  css,
  html,
  nothing2 as nothing,
  safeClassMap,
  svg
} from "./chunk-MALSDV7D.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@esri/calcite-components/dist/components/calcite-graph/customElement.js
function G(e, s, a) {
  const i2 = s[0] - e[0], o = a[0] - s[0], c = s[1] - e[1], h = a[1] - s[1], r = c / (i2 || o < 0 && 0), n = h / (o || i2 < 0 && 0), t = (r * o + n * i2) / (i2 + o);
  return (Math.sign(r) + Math.sign(n)) * Math.min(Math.abs(r), Math.abs(n), 0.5 * Math.abs(t)) || 0;
}
function z(e, s, a) {
  const i2 = s[0] - e[0], o = s[1] - e[1];
  return i2 ? (3 * o / i2 - a) / 2 : a;
}
function C(e, s, a, i2, o) {
  const [c, h] = e, [r, n] = s, t = (r - c) / 3, l = o([c + t, h + t * a]).join(","), g = o([r - t, n - t * i2]).join(","), d = o([r, n]).join(",");
  return `C ${l} ${g} ${d}`;
}
function H({ width: e, height: s, min: a, max: i2 }) {
  const o = i2[0] - a[0], c = i2[1] - a[1];
  return (h) => {
    const r = (h[0] - a[0]) / o * e, n = s - (h[1] - a[1]) / c * s;
    return [r, n];
  };
}
function A(e) {
  const [s, a] = e[0], i2 = [s, a], o = [s, a];
  return e.reduce(
    ({ min: c, max: h }, [r, n]) => ({
      min: [Math.min(c[0], r), Math.min(c[1], n)],
      max: [Math.max(h[0], r), Math.max(h[1], n)]
    }),
    { min: i2, max: o }
  );
}
function B({ data: e, min: s, max: a, t: i2 }) {
  if (e.length === 0)
    return "";
  const [o, c] = i2(e[0]), [h, r] = i2(s), [n] = i2(a);
  let t, l, g;
  const d = e.reduce((x, v, m) => {
    if (l = e[m - 2], g = e[m - 1], m > 1) {
      const u = G(l, g, v), M = t === void 0 ? z(l, g, u) : t, L = C(l, g, M, u, i2);
      return t = u, `${x} ${L}`;
    }
    return x;
  }, `M ${h},${r} L ${h},${c} L ${o},${c}`), y = e[e.length - 1], f = C(g, y, t, z(g, y, t), i2);
  return `${d} ${f} L ${n},${r} Z`;
}
var E = css`:host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0;display:block;block-size:100%;inline-size:100%;padding:0}.svg .graph-path--highlight{fill:var(--calcite-graph-highlight-fill-color, var(--calcite-color-brand));opacity:.5}:host([hidden]){display:none}[hidden]{display:none}`;
var k = {
  svg: "svg",
  graphPath: "graph-path",
  graphPathHighlight: "graph-path--highlight"
};
var _I = class _I extends LitElement {
  constructor() {
    super(...arguments), this.graphId = `calcite-graph-${i()}`, this.resizeObserver = b("resize", () => this.requestUpdate()), this.data = [];
  }
  // #endregion
  // #region Lifecycle
  connectedCallback() {
    var _a;
    super.connectedCallback(), (_a = this.resizeObserver) == null ? void 0 : _a.observe(this.el);
  }
  disconnectedCallback() {
    var _a;
    super.disconnectedCallback(), (_a = this.resizeObserver) == null ? void 0 : _a.disconnect();
  }
  // #endregion
  // #region Rendering
  render() {
    const { data: s, colorStops: a, el: i2, highlightMax: o, highlightMin: c, min: h, max: r } = this, n = this.graphId, { clientHeight: t, clientWidth: l } = i2;
    if (!s || s.length === 0)
      return html`<svg aria-hidden=true class=${safeClassMap(k.svg)} height=${t ?? nothing} preserveAspectRatio=none viewBox=${`0 0 ${l} ${t}`} width=${l ?? nothing}></svg>`;
    const { min: g, max: d } = A(s);
    let y = g, f = d;
    (h < g[0] || h > g[0]) && (y = [h, 0]), (r > d[0] || r < d[0]) && (f = [r, d[1]]);
    const x = H({ min: y, max: f, width: l, height: t }), [v] = x([c, f[1]]), [m] = x([o, f[1]]), u = B({ data: s, min: g, max: d, t: x }), M = a ? `url(#linear-gradient-${n})` : void 0;
    return html`<svg aria-hidden=true class=${safeClassMap(k.svg)} height=${t ?? nothing} preserveAspectRatio=none viewBox=${`0 0 ${l} ${t}`} width=${l ?? nothing}>${a ? svg`<defs><linearGradient .id=${`linear-gradient-${n}`} x1=0 x2=1 y1=0 y2=0>${a.map(({ offset: L, color: P, opacity: X }) => svg`<stop offset=${`${L * 100}%`} stop-color=${P ?? nothing} stop-opacity=${X ?? nothing} />`)}</linearGradient></defs>` : null}${c !== void 0 ? [
      svg`<mask height=100% .id=${`${n}1`} width=100% x=0% y=0%><path d=${`
            M 0,0
            L ${v - 1},0
            L ${v - 1},${t}
            L 0,${t}
            Z
          `} fill=white /></mask>`,
      svg`<mask height=100% .id=${`${n}2`} width=100% x=0% y=0%><path d=${`
            M ${v + 1},0
            L ${m - 1},0
            L ${m - 1},${t}
            L ${v + 1}, ${t}
            Z
          `} fill=white /></mask>`,
      svg`<mask height=100% .id=${`${n}3`} width=100% x=0% y=0%><path d=${`
                M ${m + 1},0
                L ${l},0
                L ${l},${t}
                L ${m + 1}, ${t}
                Z
              `} fill=white /></mask>`,
      svg`<path class=${safeClassMap(k.graphPath)} d=${u ?? nothing} fill=${M ?? nothing} mask=${`url(#${n}1)`} />`,
      svg`<path class=${safeClassMap(k.graphPathHighlight)} d=${u ?? nothing} fill=${M ?? nothing} mask=${`url(#${n}2)`} />`,
      svg`<path class=${safeClassMap(k.graphPath)} d=${u ?? nothing} fill=${M ?? nothing} mask=${`url(#${n}3)`} />`
    ] : svg`<path class=${safeClassMap(k.graphPath)} d=${u ?? nothing} fill=${M ?? nothing} />`}</svg>`;
  }
};
_I.properties = { colorStops: 0, data: 0, highlightMax: 9, highlightMin: 9, max: 11, min: 11 };
_I.styles = E;
var I = _I;
S("calcite-graph", I);
export {
  I as Graph
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-graph/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=customElement-JGQJ6XL7.js.map
