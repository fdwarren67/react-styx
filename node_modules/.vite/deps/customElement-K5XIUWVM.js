import {
  O as O2,
  q
} from "./chunk-ZHGVMVCT.js";
import {
  D,
  O,
  W
} from "./chunk-VLJE74YV.js";
import {
  keyed
} from "./chunk-KZXUV47B.js";
import "./chunk-A7MNUVGI.js";
import {
  createRef,
  ref
} from "./chunk-LTKIMXCE.js";
import {
  s
} from "./chunk-RZAGQ6CT.js";
import {
  b
} from "./chunk-6JIDXA46.js";
import {
  Et
} from "./chunk-VQ5234AM.js";
import "./chunk-S3EVYUV4.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  css,
  html,
  safeClassMap,
  safeStyleMap
} from "./chunk-MALSDV7D.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@esri/calcite-components/dist/components/calcite-meter/customElement.js
var s2 = {
  container: "container",
  fill: "fill",
  stepLine: "step-line",
  label: "label",
  labelHidden: "label-hidden",
  labelRange: "label-range",
  labelValue: "label-value",
  unitLabel: "unit-label",
  stepsVisible: "steps-visible",
  valueVisible: "value-visible",
  success: "fill-success",
  warning: "fill-warning",
  danger: "fill-danger"
};
var I = css`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host{display:flex;--calcite-meter-space-internal: .125rem;--calcite-meter-height-internal: 1rem;--calcite-meter-font-size-internal: var(--calcite-font-size--1)}:host([scale=s]){--calcite-meter-height-internal: .75rem;--calcite-meter-font-size-internal: var(--calcite-font-size--2)}:host([scale=l]){--calcite-meter-height-internal: 1.5rem;--calcite-meter-font-size-internal: var(--calcite-font-size-0)}.container{position:relative;margin:0;display:flex;inline-size:100%;align-items:center;block-size:var(--calcite-meter-height-internal);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-border-3);border-radius:var(--calcite-meter-height-internal)}.solid{border:1px solid var(--calcite-color-foreground-3);background-color:var(--calcite-color-foreground-3)}.outline{background-color:transparent}.value-visible{margin-block-start:1.5rem}.steps-visible{margin-block-end:1.5rem}.step-line{position:absolute;inset-block:0px;display:block;inline-size:var(--calcite-meter-space-internal);background-color:var(--calcite-color-border-3)}.label{position:absolute;font-size:var(--calcite-meter-font-size-internal)}.label-hidden{visibility:hidden;opacity:0}.label-value{inset-block-end:calc(100% + .5em);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-1)}.label-range{color:var(--calcite-color-text-3);inset-block-start:calc(100% + .5em)}.unit-label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3)}.label-value .unit-label{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.fill{position:absolute;z-index:var(--calcite-z-index);display:block;background-color:var(--calcite-color-brand);transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);inset-inline-start:var(--calcite-meter-space-internal);inset-block:var(--calcite-meter-space-internal);border-radius:var(--calcite-meter-height-internal);max-inline-size:calc(100% - var(--calcite-meter-space-internal) * 2);min-inline-size:calc(var(--calcite-meter-height-internal) - var(--calcite-meter-space-internal) * 2);transition-property:inline-size,background-color,box-shadow}.fill-danger{background-color:var(--calcite-color-status-danger)}.fill-success{background-color:var(--calcite-color-status-success)}.fill-warning{background-color:var(--calcite-color-status-warning)}.solid .fill{inset-block:0;inset-inline-start:0;max-inline-size:100%;min-inline-size:calc(var(--calcite-meter-height-internal));box-shadow:0 0 0 1px var(--calcite-color-brand)}.solid .fill-danger{box-shadow:0 0 0 1px var(--calcite-color-status-danger)}.solid .fill-success{box-shadow:0 0 0 1px var(--calcite-color-status-success)}.solid .fill-warning{box-shadow:0 0 0 1px var(--calcite-color-status-warning)}@media (forced-colors: active){.fill,.fill-danger,.fill-success,.fill-warning{background-color:Highlight}}`;
var _U = class _U extends LitElement {
  constructor() {
    super(...arguments), this.highLabelEl = createRef(), this.labelFlipMax = 0.8, this.labelFlipProximity = 0.15, this.lowLabelEl = createRef(), this.maxLabelEl = createRef(), this.maxPercent = 100, this.messages = s({ name: null }), this.meterContainerEl = createRef(), this.minLabelEl = createRef(), this.minPercent = 0, this.resizeObserver = b("resize", () => this.resizeHandler()), this.valueLabelEl = createRef(), this.appearance = "outline-fill", this.disabled = false, this.fillType = "range", this.groupSeparator = false, this.max = 100, this.min = 0, this.rangeLabelType = "percent", this.rangeLabels = false, this.scale = "m", this.unitLabel = "", this.valueLabel = false, this.valueLabelType = "percent";
  }
  // #endregion
  // #region Lifecycle
  connectedCallback() {
    var _a;
    super.connectedCallback(), D(this), (_a = this.resizeObserver) == null ? void 0 : _a.observe(this.el);
  }
  load() {
    this.calculateValues(), O(this, this.value);
  }
  willUpdate(e) {
    (e.has("min") && (this.hasUpdated || this.min !== 0) || e.has("max") && (this.hasUpdated || this.max !== 100) || e.has("low") || e.has("high") || e.has("value")) && this.handleRangeChange(), (e.has("rangeLabels") && (this.hasUpdated || this.rangeLabels !== false) || e.has("rangeLabelType") && (this.hasUpdated || this.rangeLabelType !== "percent") || e.has("unitLabel") && (this.hasUpdated || this.unitLabel !== "") || e.has("valueLabel") && (this.hasUpdated || this.valueLabel !== false) || e.has("valueLabelType") && (this.hasUpdated || this.valueLabelType !== "percent")) && this.updateLabels();
  }
  loaded() {
    this.updateLabels();
  }
  disconnectedCallback() {
    var _a;
    super.disconnectedCallback(), W(this), (_a = this.resizeObserver) == null ? void 0 : _a.disconnect();
  }
  // #endregion
  // #region Private Methods
  handleRangeChange() {
    this.calculateValues(), this.updateLabels();
  }
  resizeHandler() {
    this.updateLabels();
  }
  updateLabels() {
    this.valueLabelEl.value && this.determineValueLabelPosition(), this.rangeLabels && this.determineVisibleLabels();
  }
  calculateValues() {
    const { min: e, max: l, low: t, high: a, value: i } = this, n = 100 * (t - e) / (l - e), r = 100 * (a - e) / (l - e), c = 100 * (i - e) / (l - e);
    (!t || t < e || t > a || t > l) && (this.low = e), (!a || a > l || a < t || a < e) && (this.high = l), i || (this.value = e), this.lowPercent = n, this.highPercent = r, this.currentPercent = i ? c : 0, this.lowActive = !!t && t > e && (!i || t > i) && (!a || t < a), this.highActive = !!a && e <= a && a < l && (!i || a > i) && (!t || a > t);
  }
  formatLabel(e, l) {
    if (l === "percent") {
      if (!this.percentFormatting) {
        const t = O2(this.messages._lang), a = new Intl.NumberFormat(t, {
          useGrouping: this.groupSeparator,
          style: "percent"
        });
        this.percentFormatting = { formatter: a, locale: t };
      }
      return this.percentFormatting.formatter.format(e);
    } else
      return q.numberFormatOptions = {
        locale: this.messages._lang,
        numberingSystem: this.numberingSystem,
        useGrouping: this.groupSeparator
      }, q.localize(e.toString());
  }
  getMeterKindCssClass() {
    const { low: e, high: l, min: t, max: a, value: i } = this, n = e || t, r = l || a, c = i >= n, d = i < n, g = i >= r, o = i < r;
    return !i || !e && o || d ? s2.success : c && o ? s2.warning : g ? s2.danger : s2.success;
  }
  intersects(e, l) {
    return e && l && Et(e.getBoundingClientRect(), l.getBoundingClientRect());
  }
  determineVisibleLabels() {
    const { minLabelEl: { value: e }, lowLabelEl: { value: l }, highLabelEl: { value: t }, maxLabelEl: { value: a } } = this, i = this.intersects(t, a), n = this.intersects(l, t), r = this.intersects(l, a), c = this.intersects(e, t), d = this.intersects(e, l), g = this.intersects(e, a), o = s2.labelHidden;
    l && (d || r || n ? l.classList.add(o) : l.classList.remove(o)), t && (c || r || i ? t.classList.add(o) : t.classList.remove(o)), e && a && (g ? a.classList.add(o) : a.classList.remove(o));
  }
  determineValueLabelPosition() {
    const { valueLabelEl: { value: e }, meterContainerEl: { value: l }, currentPercent: t } = this, a = t > 100 ? 100 : t > 0 ? t : 0, i = e.getBoundingClientRect().width, n = l.getBoundingClientRect().width, r = 100 * (i - 0) / (n - 0);
    a + r >= 100 ? (e.style.insetInlineEnd = "0%", e.style.removeProperty("inset-inline-start")) : (e.style.insetInlineStart = `${a}% `, e.style.removeProperty("inset-inline-end"));
  }
  // #endregion
  // #region Rendering
  renderMeterFill() {
    const { currentPercent: e, fillType: l } = this, t = this.getMeterKindCssClass();
    return html`<div class=${safeClassMap({ [s2.fill]: true, [t]: l !== "single" })} style=${safeStyleMap({ width: `${e}%` })}></div>`;
  }
  renderRangeLine(e) {
    const l = { insetInlineStart: `${e}%` };
    return html`<div class=${safeClassMap(s2.stepLine)} style=${safeStyleMap(l)}></div>`;
  }
  renderValueLabel() {
    const { currentPercent: e, valueLabelType: l, unitLabel: t, value: a } = this, i = this.formatLabel(l === "percent" ? e / 100 : a || 0, l);
    return keyed("low-label-line", html`<div class=${safeClassMap({ [s2.label]: true, [s2.labelValue]: true })} ${ref(this.valueLabelEl)}>${i}${t && l !== "percent" && html`<span class=${safeClassMap(s2.unitLabel)}>&nbsp;${t}</span>` || ""}</div>`);
  }
  renderMinLabel() {
    const { rangeLabelType: e, min: l, minPercent: t, unitLabel: a } = this, i = { insetInlineStart: `${t}%` }, n = this.formatLabel(e === "percent" ? t : l, e);
    return keyed("min-label-line", html`<div class=${safeClassMap({ [s2.label]: true, [s2.labelRange]: true })} style=${safeStyleMap(i)} ${ref(this.minLabelEl)}>${n}${a && e !== "percent" && html`<span class=${safeClassMap(s2.unitLabel)}>&nbsp;${a}</span>` || ""}</div>`);
  }
  renderLowLabel() {
    const { rangeLabelType: e, low: l, lowPercent: t, highPercent: a, labelFlipProximity: i } = this, n = l ? this.formatLabel(e === "percent" ? t / 100 : l, e) : "", r = { insetInlineStart: `${t}%` }, c = { insetInlineEnd: `${100 - t}%` }, d = (a - t) / 100 < i ? c : r;
    return keyed("low-label-line", html`<div class=${safeClassMap({ [s2.label]: true, [s2.labelRange]: true })} style=${safeStyleMap(d)} ${ref(this.lowLabelEl)}>${n}</div>`);
  }
  renderHighLabel() {
    const { rangeLabelType: e, high: l, highPercent: t, labelFlipMax: a } = this, i = l ? this.formatLabel(e === "percent" ? t / 100 : l, e) : "", n = { insetInlineStart: `${t}%` }, r = { insetInlineEnd: `${100 - t}%` }, c = t / 100 >= a ? r : n;
    return keyed("high-label-line", html`<div class=${safeClassMap({ [s2.label]: true, [s2.labelRange]: true })} style=${safeStyleMap(c)} ${ref(this.highLabelEl)}>${i}</div>`);
  }
  renderMaxLabel() {
    const { rangeLabelType: e, max: l, maxPercent: t } = this, a = { insetInlineEnd: `${100 - t}%` }, i = this.formatLabel(e === "percent" ? t / 100 : l, e);
    return keyed("max-label-line", html`<div class=${safeClassMap({ [s2.label]: true, [s2.labelRange]: true })} style=${safeStyleMap(a)} ${ref(this.maxLabelEl)}>${i}</div>`);
  }
  render() {
    const { appearance: e, currentPercent: l, highActive: t, highPercent: a, label: i, lowActive: n, lowPercent: r, max: c, maxPercent: d, min: g, minPercent: o, rangeLabels: v, rangeLabelType: f, unitLabel: y, value: w, valueLabel: x, valueLabelType: $ } = this, E = this.formatLabel(l / 100, "percent"), k = `${w} ${y}`;
    return html`<div .ariaLabel=${i} .ariaValueMax=${f === "percent" ? d : c} .ariaValueMin=${f === "percent" ? o : g} .ariaValueNow=${$ === "percent" ? l : w} .ariaValueText=${$ === "percent" ? E : y ? k : void 0} class=${safeClassMap({
      [s2.container]: true,
      [s2.stepsVisible]: v,
      [s2.valueVisible]: x,
      [e]: e !== "outline-fill"
    })} role=meter ${ref(this.meterContainerEl)}>${this.renderMeterFill()}${x && this.renderValueLabel() || ""}${n && this.renderRangeLine(r) || ""}${t && this.renderRangeLine(a) || ""}${v && this.renderMinLabel() || ""}${v && n && this.renderLowLabel() || ""}${v && t && this.renderHighLabel() || ""}${v && this.renderMaxLabel() || ""}</div>`;
  }
};
_U.properties = { currentPercent: 16, highActive: 16, highPercent: 16, lowActive: 16, lowPercent: 16, appearance: 3, disabled: 7, fillType: 3, form: 3, groupSeparator: 7, high: 11, label: 1, low: 11, max: 11, min: 11, name: 3, numberingSystem: 1, rangeLabelType: 3, rangeLabels: 7, scale: 3, unitLabel: 1, value: 9, valueLabel: 7, valueLabelType: 3 };
_U.styles = I;
var U = _U;
S("calcite-meter", U);
export {
  U as Meter
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-meter/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=customElement-K5XIUWVM.js.map
