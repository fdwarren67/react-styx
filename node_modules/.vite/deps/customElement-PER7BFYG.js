import {
  m,
  p
} from "./chunk-VBBJGZOS.js";
import {
  ref
} from "./chunk-LTKIMXCE.js";
import {
  b
} from "./chunk-6JIDXA46.js";
import {
  xt
} from "./chunk-VQ5234AM.js";
import "./chunk-S3EVYUV4.js";
import {
  S
} from "./chunk-B7E2AREE.js";
import {
  LitElement,
  createEvent,
  css,
  html,
  safeClassMap
} from "./chunk-MALSDV7D.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@esri/calcite-components/dist/components/calcite-tile-group/customElement.js
var u = {
  container: "container"
};
var f = css`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{box-sizing:border-box;display:inline-block}:host ::slotted(calcite-tile){margin-block-end:var(--calcite-spacing-px);margin-inline-end:var(--calcite-spacing-px)}.container{display:grid;grid-auto-rows:minmax(auto,1fr)}:host([scale=s]) .container{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}:host([scale=m]) .container{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}:host([scale=l]) .container{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}:host([layout=vertical]) .container{display:flex;flex-direction:column}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`;
var _b = class _b extends LitElement {
  // #endregion
  // #region Lifecycle
  constructor() {
    super(), this.items = [], this.mutationObserver = b("mutation", () => this.updateTiles()), this.alignment = "start", this.disabled = false, this.layout = "horizontal", this.scale = "m", this.selectedItems = [], this.selectionAppearance = "icon", this.selectionMode = "none", this.calciteTileGroupSelect = createEvent({ cancelable: false }), this.listen("calciteInternalTileKeyEvent", this.calciteInternalTileKeyEventListener), this.listen("calciteTileSelect", this.calciteTileSelectHandler);
  }
  connectedCallback() {
    var _a;
    super.connectedCallback(), (_a = this.mutationObserver) == null ? void 0 : _a.observe(this.el, { childList: true }), this.updateTiles();
  }
  willUpdate(e) {
    (e.has("scale") && (this.hasUpdated || this.scale !== "m") || e.has("selectionMode") && (this.hasUpdated || this.selectionMode !== "none") || e.has("selectionAppearance") && (this.hasUpdated || this.selectionAppearance !== "icon")) && this.updateTiles();
  }
  updated() {
    m(this);
  }
  loaded() {
    this.updateSelectedItems();
  }
  disconnectedCallback() {
    var _a;
    super.disconnectedCallback(), (_a = this.mutationObserver) == null ? void 0 : _a.disconnect();
  }
  // #endregion
  // #region Private Methods
  getSlottedTiles() {
    var _a;
    return (_a = this.slotEl) == null ? void 0 : _a.assignedElements({ flatten: true }).filter((e) => e == null ? void 0 : e.matches("calcite-tile"));
  }
  selectItem(e) {
    var _a;
    e && ((_a = this.items) == null ? void 0 : _a.forEach((t) => {
      const s = e === t;
      switch (this.selectionMode) {
        case "multiple":
          s && (t.selected = !t.selected);
          break;
        case "single":
          t.selected = s && !t.selected;
          break;
        case "single-persist":
          t.selected = !!s;
          break;
      }
    }), this.updateSelectedItems(), this.calciteTileGroupSelect.emit());
  }
  setSlotEl(e) {
    this.slotEl = e;
  }
  updateSelectedItems() {
    var _a, _b2;
    const e = (_a = this.items) == null ? void 0 : _a.filter((t) => t.selected);
    (this.selectionMode === "single" || this.selectionMode === "single-persist") && (e == null ? void 0 : e.length) > 1 ? (this.selectedItems = [e.pop()], (_b2 = this.items) == null ? void 0 : _b2.forEach((t) => {
      this.selectedItems.indexOf(t) === -1 && (t.selected = false);
    })) : this.selectedItems = e ?? [];
  }
  updateTiles() {
    var _a;
    this.items = this.getSlottedTiles(), (_a = this.items) == null ? void 0 : _a.forEach((e) => {
      e.alignment = this.alignment, e.interactive = true, e.layout = this.layout, e.scale = this.scale, e.selectionAppearance = this.selectionAppearance, e.selectionMode = this.selectionMode;
    }), this.updateSelectedItems();
  }
  calciteInternalTileKeyEventListener(e) {
    var _a;
    if (e.composedPath().includes(this.el)) {
      e.preventDefault(), e.stopPropagation();
      const t = (_a = this.items) == null ? void 0 : _a.filter((s) => !s.disabled);
      switch (e.detail.key) {
        case "ArrowDown":
        case "ArrowRight":
          xt(t, e.detail.target, "next");
          break;
        case "ArrowUp":
        case "ArrowLeft":
          xt(t, e.detail.target, "previous");
          break;
        case "Home":
          xt(t, e.detail.target, "first");
          break;
        case "End":
          xt(t, e.detail.target, "last");
          break;
      }
    }
  }
  calciteTileSelectHandler(e) {
    e.composedPath().includes(this.el) && this.selectItem(e.target);
  }
  // #endregion
  // #region Rendering
  render() {
    const e = this.selectionMode === "none" || this.selectionMode === "multiple" ? "group" : "radiogroup";
    return p({ disabled: this.disabled, children: html`<div .ariaLabel=${this.label} class=${safeClassMap(u.container)} .role=${e}><slot @slotchange=${this.updateTiles} ${ref(this.setSlotEl)}></slot></div>` });
  }
};
_b.properties = { alignment: 3, disabled: 7, label: 1, layout: 3, scale: 3, selectedItems: 0, selectionAppearance: 3, selectionMode: 3 };
_b.styles = f;
var b2 = _b;
S("calcite-tile-group", b2);
export {
  b2 as TileGroup
};
/*! Bundled license information:

@esri/calcite-components/dist/components/calcite-tile-group/customElement.js:
  (*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
  See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
  v3.1.0 *)
*/
//# sourceMappingURL=customElement-PER7BFYG.js.map
