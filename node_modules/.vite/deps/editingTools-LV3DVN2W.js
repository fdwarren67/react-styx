import {
  i as i15,
  o as o16,
  s as s9
} from "./chunk-GN7XNUNQ.js";
import {
  i as i13,
  p as p15
} from "./chunk-J2FVQVLW.js";
import {
  i as i14
} from "./chunk-P2A7QPGY.js";
import {
  P as P6,
  r as r16
} from "./chunk-4755QEM3.js";
import {
  A as A6,
  E as E10,
  a as a19,
  b as b8,
  e as e16,
  f as f15,
  g as g9,
  h as h13,
  l as l12,
  p as p14,
  te
} from "./chunk-3J6UPOJA.js";
import "./chunk-IMJFD35N.js";
import {
  A as A5,
  C as C3,
  W as W3,
  a as a16,
  a2 as a17,
  a3 as a18,
  e as e15,
  f as f14,
  o as o15,
  u as u15
} from "./chunk-SFMT6MPK.js";
import "./chunk-CAUYWBFJ.js";
import {
  u as u16
} from "./chunk-GSWA33M7.js";
import "./chunk-XZPGOYKQ.js";
import {
  b as b9
} from "./chunk-APPN2GLC.js";
import "./chunk-C7KH2XUE.js";
import "./chunk-SHUPRF2X.js";
import "./chunk-MMTG5LL5.js";
import "./chunk-6SVQSUM2.js";
import "./chunk-GOOHYD4W.js";
import "./chunk-6VFW3IWB.js";
import "./chunk-4AD7WZIV.js";
import "./chunk-OB6J6YZ4.js";
import "./chunk-S44I6ZFP.js";
import "./chunk-HLHAX5U2.js";
import {
  c as c11,
  i as i12,
  m as m7,
  r as r17
} from "./chunk-CAHNPNRX.js";
import {
  $ as $2,
  V as V5
} from "./chunk-CAVMYMFV.js";
import {
  u as u14
} from "./chunk-W2HBXNU2.js";
import "./chunk-L3SFUKOZ.js";
import {
  D as D2,
  F as F6,
  I as I3,
  M as M4,
  M2 as M5,
  S as S4,
  S2 as S6,
  T as T3,
  U,
  V as V4,
  c as c10,
  f as f12,
  f2 as f13,
  g as g8,
  j as j6,
  l as l11,
  m as m6,
  n as n13,
  p as p13,
  v as v7,
  w as w5,
  z as z4
} from "./chunk-PZCZWILS.js";
import {
  E as E8,
  E2 as E9,
  P2 as P5,
  Q as Q2,
  R as R5,
  e as e13,
  e3 as e14,
  h as h11,
  j as j5,
  k as k3,
  r as r14,
  u as u12,
  w as w4,
  x as x6,
  z as z3
} from "./chunk-AARMY6EJ.js";
import {
  F as F5,
  G as G3,
  O as O4,
  R as R4,
  R2 as R6,
  V as V3,
  c as c9,
  e as e12,
  g as g7,
  m as m5,
  r as r15,
  u as u13,
  x as x5,
  y as y10,
  z as z2
} from "./chunk-PSCLWEFE.js";
import {
  l2 as l10
} from "./chunk-FNUMBJBP.js";
import {
  S as S5
} from "./chunk-F4533UJ7.js";
import "./chunk-4NO34UCA.js";
import "./chunk-OSI4PMXO.js";
import {
  i as i11
} from "./chunk-5SWTD5RQ.js";
import "./chunk-3CDYGNLL.js";
import {
  p as p11
} from "./chunk-UP7QX3XX.js";
import "./chunk-XDIFNUKU.js";
import "./chunk-G577QQ6E.js";
import "./chunk-3O7K7CQL.js";
import {
  h as h12
} from "./chunk-3T6XYN2R.js";
import {
  E2 as E7,
  T as T2,
  m as m4,
  n as n12,
  y as y9
} from "./chunk-6IYG6BTI.js";
import {
  f as f11,
  p as p12
} from "./chunk-TWM4KR2X.js";
import "./chunk-4NUJE7UV.js";
import "./chunk-L4C25LTQ.js";
import "./chunk-TOKEYLZA.js";
import {
  a as a15,
  f as f10,
  h as h10,
  o as o14,
  y as y8
} from "./chunk-EIS6L6FC.js";
import {
  v as v6
} from "./chunk-SGYJ7J7R.js";
import "./chunk-FDGPK3YS.js";
import "./chunk-ODSRB4EZ.js";
import {
  y2 as y7
} from "./chunk-GHPQVNNU.js";
import "./chunk-VBE5VFL5.js";
import {
  a as a13,
  c as c8,
  d as d9,
  h as h9,
  i as i10,
  j as j4,
  m as m3,
  p as p10,
  r as r13,
  u as u10,
  x as x4,
  z
} from "./chunk-LULXSZFE.js";
import "./chunk-ZDC5HC6P.js";
import "./chunk-QU4L2TYC.js";
import {
  w as w3,
  y as y6
} from "./chunk-QBDJCOUK.js";
import "./chunk-KBDYFPYD.js";
import {
  ae,
  it,
  r as r11
} from "./chunk-ONKUNBAA.js";
import {
  Ot,
  at,
  b as b7,
  ft,
  gt,
  it as it2,
  lt,
  ot,
  pt,
  wt
} from "./chunk-4KZDR5QC.js";
import {
  a as a10,
  c as c7,
  s as s7,
  u as u8
} from "./chunk-2NO2M4WL.js";
import {
  k as k2,
  u as u9,
  x as x3
} from "./chunk-AD3QCYSE.js";
import {
  E as E5
} from "./chunk-NJX7X3PO.js";
import "./chunk-3Y2XWHXG.js";
import {
  A as A3,
  A2 as A4,
  C as C2,
  E as E6,
  F as F4,
  N as N4,
  T,
  a as a9,
  b2 as b6,
  d2 as d8,
  e as e10,
  f as f6,
  f2 as f7,
  f3 as f8,
  f4 as f9,
  i as i8,
  l as l9,
  o as o12,
  p as p9
} from "./chunk-ARBGNZ5J.js";
import {
  N as N5,
  a as a12
} from "./chunk-OBY6T2CW.js";
import {
  a as a11,
  i as i9
} from "./chunk-SCA7QFZT.js";
import "./chunk-IDAFLWQ6.js";
import "./chunk-QDSJY67F.js";
import "./chunk-5NM52FSC.js";
import {
  h as h8,
  l as l8,
  t as t11,
  t2 as t12
} from "./chunk-WRGRINPJ.js";
import "./chunk-R33GG7W2.js";
import "./chunk-BXGUHXQX.js";
import "./chunk-CS6KRDFU.js";
import "./chunk-GPG44W5H.js";
import {
  d as d6,
  d2 as d7,
  e as e11,
  r as r12
} from "./chunk-VGAGCEX3.js";
import "./chunk-UA3V7B5J.js";
import "./chunk-5MBR7YI6.js";
import "./chunk-WA26GNQ4.js";
import {
  B,
  c as c6,
  f as f5,
  g as g6,
  o as o9
} from "./chunk-P5AGQYYC.js";
import {
  a as a8,
  e as e8
} from "./chunk-223G2GN7.js";
import "./chunk-NTLDV7GO.js";
import "./chunk-6VADNTLC.js";
import "./chunk-NM5Y74WL.js";
import "./chunk-3MD5LAW4.js";
import "./chunk-U2P5JTEN.js";
import "./chunk-MSPEL4X6.js";
import "./chunk-35YSR2SI.js";
import "./chunk-DLHCJHCP.js";
import {
  e as e9,
  n as n10,
  n2 as n11,
  o2 as o10,
  p2 as p8
} from "./chunk-KBTHUZME.js";
import "./chunk-DWU33BWI.js";
import {
  o as o11
} from "./chunk-Y6THB4GE.js";
import {
  o as o13
} from "./chunk-W2OFQBYT.js";
import "./chunk-3LQTECQ4.js";
import "./chunk-LTEACZYT.js";
import "./chunk-IBHVRKIT.js";
import "./chunk-QIPDGN53.js";
import "./chunk-SNU6D4LT.js";
import {
  c as c5
} from "./chunk-N3R7UAKL.js";
import "./chunk-C2LO2UDO.js";
import "./chunk-276B3RLG.js";
import "./chunk-UGOVBDXX.js";
import {
  K as K2,
  W as W2,
  Z
} from "./chunk-QQGGEN5E.js";
import "./chunk-46GTJXDE.js";
import "./chunk-T5NYJWDC.js";
import "./chunk-QTPKIRO2.js";
import "./chunk-S2GEPA3W.js";
import "./chunk-3RHYA2CC.js";
import "./chunk-6WRMI32T.js";
import "./chunk-7FXRLNEH.js";
import "./chunk-CXHZI2CJ.js";
import {
  a as a7,
  g as g5,
  m as m2,
  p as p7,
  y as y5
} from "./chunk-RSBV5MGA.js";
import {
  M as M3,
  b as b4,
  d as d4,
  h as h6,
  l as l7,
  p as p6,
  v as v5
} from "./chunk-QEAQVAMR.js";
import {
  n as n8
} from "./chunk-OITDZHA4.js";
import {
  e as e7
} from "./chunk-ZGGC3KHK.js";
import "./chunk-UM5QMFZV.js";
import "./chunk-CBFRSYD6.js";
import "./chunk-2CY5SLAC.js";
import "./chunk-LQHBJ3TA.js";
import "./chunk-MKVF6I7G.js";
import {
  d as d5,
  h as h7,
  i as i7,
  n as n9,
  u as u7
} from "./chunk-457CK7GN.js";
import "./chunk-EVDBYOW7.js";
import "./chunk-QQOUESXA.js";
import "./chunk-EQ5WRTBD.js";
import "./chunk-6QXEI4OT.js";
import "./chunk-55SEMSMA.js";
import "./chunk-BUZ7I3MJ.js";
import {
  S as S3,
  b as b5,
  k,
  w as w2
} from "./chunk-I7JIAECC.js";
import "./chunk-ZXD5CGBL.js";
import {
  D,
  E as E4,
  F as F3,
  I as I2,
  N as N3,
  P as P4,
  R as R3,
  S as S2
} from "./chunk-23WGP47N.js";
import "./chunk-V4U366R3.js";
import "./chunk-CUWQEJ5X.js";
import "./chunk-OK5AUMBT.js";
import "./chunk-R2ZUOHHV.js";
import {
  t as t10
} from "./chunk-EXHR7CRN.js";
import {
  R as R2
} from "./chunk-HX6OAJGI.js";
import {
  H as H3,
  M as M2,
  O as O3,
  c as c4,
  f2 as f4,
  i as i6,
  l as l5,
  o as o8,
  t as t9,
  x as x2
} from "./chunk-F64YCQYI.js";
import "./chunk-3L7KPDW7.js";
import "./chunk-WWF2HQCF.js";
import "./chunk-O647AAAL.js";
import {
  t as t6
} from "./chunk-BBNY45W4.js";
import {
  H as H2
} from "./chunk-BG4BZEWI.js";
import {
  s as s6
} from "./chunk-HE2KJFY5.js";
import "./chunk-MFRTZACF.js";
import "./chunk-374VFTLO.js";
import "./chunk-OBVDE24U.js";
import {
  e as e4
} from "./chunk-HYT6FDCG.js";
import {
  t as t8
} from "./chunk-VGMYHNBL.js";
import {
  c as c3
} from "./chunk-MRUZJ4BJ.js";
import "./chunk-H2QUYHU5.js";
import "./chunk-YZF7OTID.js";
import {
  n as n7
} from "./chunk-KLBFJ6WQ.js";
import {
  e as e6,
  o as o7,
  t as t7
} from "./chunk-HHSHKUKB.js";
import {
  e as e5
} from "./chunk-OBRCQKKM.js";
import {
  i as i5,
  y as y4
} from "./chunk-QAWD6UDA.js";
import "./chunk-EKEKHPBG.js";
import "./chunk-RDHJUEBL.js";
import "./chunk-SXBN3QCZ.js";
import "./chunk-UW4LHCKY.js";
import "./chunk-JJFGBM54.js";
import "./chunk-QY6LLTZM.js";
import {
  t as t13
} from "./chunk-VVBSETZJ.js";
import {
  t as t14,
  u as u11
} from "./chunk-K455QPXF.js";
import "./chunk-QSDQ7XKD.js";
import "./chunk-HUXEKERJ.js";
import "./chunk-PJIFP7OJ.js";
import "./chunk-NGATSB6R.js";
import "./chunk-GTVVYAXM.js";
import {
  a as a14,
  s as s8
} from "./chunk-XOXXDYBM.js";
import "./chunk-5BSH2ZN2.js";
import "./chunk-HQ2GCCLQ.js";
import "./chunk-I6H2R562.js";
import "./chunk-PBHST2SF.js";
import {
  l as l6
} from "./chunk-6WERKJTM.js";
import {
  E as E3,
  F as F2,
  O as O2,
  _ as _5
} from "./chunk-QNYMCEB7.js";
import {
  n as n5,
  t as t5
} from "./chunk-T7CHWWE2.js";
import {
  n as n6
} from "./chunk-FWVSIQMR.js";
import {
  _ as _3,
  b as b3,
  e as e3,
  l as l4,
  o as o5,
  r as r9,
  u as u5,
  v as v3
} from "./chunk-4ACM2XXN.js";
import {
  A as A2,
  E as E2,
  H,
  I,
  J,
  K,
  N as N2,
  P as P3,
  W,
  _ as _4,
  c as c2,
  g as g4,
  j as j3,
  o as o6,
  p as p5,
  q as q5,
  r as r10,
  s as s5,
  u as u6,
  v as v4,
  y as y3
} from "./chunk-ON7GWFUW.js";
import {
  h as h5
} from "./chunk-VPRLLNNO.js";
import "./chunk-64ZXKK6G.js";
import "./chunk-UCM2ZG62.js";
import "./chunk-4LJ2OSKC.js";
import "./chunk-FLGJHA67.js";
import "./chunk-FJTIPVNU.js";
import "./chunk-SXKP4T6J.js";
import {
  r as r5
} from "./chunk-SB6LU3VH.js";
import "./chunk-B7E2AREE.js";
import "./chunk-MALSDV7D.js";
import "./chunk-BSQH3I7W.js";
import "./chunk-XAZEJYKE.js";
import "./chunk-62KPTW4J.js";
import "./chunk-UCDQUN5K.js";
import "./chunk-OQEC2EUK.js";
import {
  r as r8,
  t as t4,
  u as u4
} from "./chunk-V3IZNRFE.js";
import {
  E,
  a as a6
} from "./chunk-D7XVYH42.js";
import "./chunk-HAYP5DZM.js";
import "./chunk-OMNXYZNG.js";
import "./chunk-GPMU6IW4.js";
import "./chunk-4JVIG75S.js";
import "./chunk-HZLSEOMW.js";
import "./chunk-L2AVI4MN.js";
import "./chunk-4JHPTLMD.js";
import "./chunk-35I4PBUK.js";
import {
  L,
  nn
} from "./chunk-ZQMORW2K.js";
import "./chunk-OGPRAWXS.js";
import {
  o as o3,
  v as v2
} from "./chunk-EGSJQZXU.js";
import "./chunk-BBPRJCMB.js";
import "./chunk-7VGCZZPH.js";
import "./chunk-PMTDIWAP.js";
import "./chunk-ACBQ6NOA.js";
import {
  f
} from "./chunk-QW7P5D76.js";
import "./chunk-T52X5K2I.js";
import "./chunk-5E5JYM5A.js";
import "./chunk-M4LYLB6W.js";
import "./chunk-I6AFDEJM.js";
import "./chunk-SVWZAOD7.js";
import "./chunk-4ANUERFT.js";
import "./chunk-C33DSFWF.js";
import "./chunk-MILRZFWI.js";
import "./chunk-RPPIM555.js";
import {
  h as h4
} from "./chunk-4FQDWSFN.js";
import "./chunk-JOQ2ZFQV.js";
import "./chunk-3UBDE4PK.js";
import "./chunk-LILYILCM.js";
import "./chunk-WBBL3X3F.js";
import "./chunk-OJGPUKVG.js";
import {
  R,
  _ as _2,
  b as b2,
  c,
  d as d3,
  f as f3,
  h as h3,
  i as i4,
  l as l3,
  n as n4,
  o as o4,
  p as p4,
  q as q4,
  r as r7,
  x
} from "./chunk-GFEMKR2U.js";
import {
  e as e2
} from "./chunk-G2OXL5Y3.js";
import "./chunk-B6ORYDBK.js";
import "./chunk-BLF64HON.js";
import "./chunk-I3JB2EVB.js";
import "./chunk-TCV7UF6X.js";
import "./chunk-BMNRD4FO.js";
import "./chunk-W7QCICS6.js";
import {
  n as n2
} from "./chunk-AYLNWVVJ.js";
import "./chunk-PQVKYMOX.js";
import "./chunk-DCSYHXZG.js";
import "./chunk-ZSBMFGDQ.js";
import "./chunk-NAGFHISJ.js";
import "./chunk-QCS4ZI2R.js";
import "./chunk-2SOWSOAE.js";
import {
  G as G2,
  O,
  p as p2,
  q as q3,
  s as s4,
  t as t2,
  u as u3
} from "./chunk-KSQSVLSQ.js";
import {
  a as a4
} from "./chunk-SPVEONZ2.js";
import "./chunk-BMNDO4JW.js";
import "./chunk-RAVPBO4Z.js";
import "./chunk-PHADC6NW.js";
import "./chunk-3ODJ3YKN.js";
import "./chunk-P6IUM5K3.js";
import "./chunk-KGTLNUPW.js";
import "./chunk-GY7XU54K.js";
import "./chunk-P4D4HTH2.js";
import "./chunk-GDR4JYWU.js";
import "./chunk-Y4AQXF4J.js";
import {
  _,
  n as n3,
  r as r6,
  t as t3
} from "./chunk-D3P3E2RE.js";
import {
  A,
  C,
  P,
  d as d2,
  p,
  v
} from "./chunk-UKY33OJN.js";
import {
  d
} from "./chunk-HAWCNM3C.js";
import {
  V
} from "./chunk-BQYXRSVC.js";
import {
  i as i3
} from "./chunk-BJEQ2APY.js";
import "./chunk-WKNMEFRQ.js";
import "./chunk-Q7TEBZSN.js";
import {
  h as h2
} from "./chunk-CIALVDRG.js";
import "./chunk-N5E3DEQN.js";
import "./chunk-GTN3PVPB.js";
import "./chunk-BF5PIC2K.js";
import "./chunk-K7TZXQ7O.js";
import {
  a as a5,
  f as f2,
  g as g3,
  l as l2,
  p as p3,
  y as y2
} from "./chunk-FZPO5AYT.js";
import {
  h
} from "./chunk-5VM3BO4P.js";
import "./chunk-EYUJRAXJ.js";
import "./chunk-QRM4IRDF.js";
import {
  N,
  b,
  j as j2,
  q as q2
} from "./chunk-CAN2PXNV.js";
import "./chunk-BDOGPNOY.js";
import "./chunk-552ZCNNH.js";
import {
  P as P2
} from "./chunk-XG7T2Y7N.js";
import {
  a as a3
} from "./chunk-SQOMDKJS.js";
import "./chunk-HB6TKF6E.js";
import {
  q,
  w
} from "./chunk-OXPM753Y.js";
import "./chunk-N4U5VIP2.js";
import {
  j2 as j
} from "./chunk-IVS2JCO6.js";
import {
  g as g2
} from "./chunk-4GOW35CM.js";
import {
  $,
  Q,
  V as V2,
  s2 as s3
} from "./chunk-TEJXT4W6.js";
import "./chunk-LW62SPEN.js";
import {
  s as s2
} from "./chunk-LSOJIRW6.js";
import "./chunk-FSFEOCO5.js";
import "./chunk-ZVIMKAJW.js";
import "./chunk-BIURGGHV.js";
import {
  M,
  r,
  s
} from "./chunk-VSLEAHOZ.js";
import "./chunk-6K2FAOQG.js";
import "./chunk-N5DN7S3H.js";
import "./chunk-BECTSF5P.js";
import "./chunk-FX46DC27.js";
import {
  S
} from "./chunk-2FUEBHWI.js";
import {
  g,
  i2,
  m,
  r as r3
} from "./chunk-VTWDBFQT.js";
import {
  a2
} from "./chunk-BM4B3CH5.js";
import {
  F
} from "./chunk-G2YC5GCV.js";
import "./chunk-GD5AHXAI.js";
import "./chunk-YWGYHRSH.js";
import "./chunk-DP2IAJQN.js";
import "./chunk-EAFC6V23.js";
import {
  e2 as e,
  i,
  l,
  o,
  o2,
  r as r4,
  t2 as t,
  u,
  u2
} from "./chunk-SMH2GUF6.js";
import "./chunk-AZP4AFW7.js";
import {
  r as r2
} from "./chunk-SCZRL2WP.js";
import "./chunk-OSHCNHH7.js";
import {
  a
} from "./chunk-7LCEUMDD.js";
import "./chunk-6II7WQ2F.js";
import {
  G,
  has,
  n,
  y
} from "./chunk-L7QO6TDW.js";
import "./chunk-EWTE5DHJ.js";

// node_modules/@arcgis/core/libs/maquette/h.js
var e17 = (e27) => ({ vnodeSelector: "", properties: void 0, children: void 0, text: e27.toString(), domNode: null });
var r18 = (t26, o23, n29) => {
  for (let l26 = 0, i23 = o23.length; l26 < i23; l26++) {
    let i24 = o23[l26];
    Array.isArray(i24) ? r18(t26, i24, n29) : null != i24 && false !== i24 && ("string" == typeof i24 && (i24 = e17(i24)), n29.push(i24));
  }
};
function t15(e27, t26, o23) {
  if (Array.isArray(t26)) o23 = t26, t26 = void 0;
  else if (t26 && ("string" == typeof t26 || t26.hasOwnProperty("vnodeSelector")) || o23 && ("string" == typeof o23 || o23.hasOwnProperty("vnodeSelector"))) throw new Error("h called with invalid arguments");
  let n29, l26;
  return o23 && 1 === o23.length && "string" == typeof o23[0] ? n29 = o23[0] : o23 && (l26 = [], r18(e27, o23, l26), 0 === l26.length && (l26 = void 0)), { vnodeSelector: e27, properties: t26, children: l26, text: "" === n29 ? void 0 : n29, domNode: null };
}

// node_modules/@arcgis/core/views/overlay/TextOverlayItem.js
var l13 = { bottom: "esri-text-overlay-item-anchor-bottom", "bottom-right": "esri-text-overlay-item-anchor-bottom-right", "bottom-left": "esri-text-overlay-item-anchor-bottom-left", top: "esri-text-overlay-item-anchor-top", "top-right": "esri-text-overlay-item-anchor-top-right", "top-left": "esri-text-overlay-item-anchor-top-left", center: "esri-text-overlay-item-anchor-center", right: "esri-text-overlay-item-anchor-right", left: "esri-text-overlay-item-anchor-left" };
var n14 = class extends g {
  get position() {
    return [this.x, this.y];
  }
  set position(t26) {
    this._set("x", t26[0]), this._set("y", t26[1]);
  }
  get _textShadowColor() {
    const { textColor: t26, backgroundColor: e27 } = this, o23 = e27.clone();
    return o23.a *= t26.a, o23;
  }
  get _textShadow() {
    const t26 = this._textShadowColor.toCss(true);
    return `0 0 ${this._textShadowSize}px ${t26}`;
  }
  get padding() {
    return 0.5 * this.fontSize;
  }
  get borderRadius() {
    return this.padding;
  }
  set borderRadius(t26) {
    this._overrideIfSome("borderRadius", t26);
  }
  constructor(t26) {
    super(t26), this.x = 0, this.y = 0, this.text = "-", this.fontSize = 14, this.anchor = "center", this.visible = true, this.isDecoration = true, this.backgroundColor = new h([0, 0, 0, 0.6]), this.textColor = new h([255, 255, 255]), this._textShadowSize = 1;
  }
  render() {
    return t15("div", { classes: this._cssClasses(), styles: { left: Math.floor(this.x) + "px", top: Math.floor(this.y) + "px", visibility: this.visible ? "visible" : "hidden", fontSize: this.fontSize + "px", lineHeight: this.fontSize + "px", backgroundColor: this.backgroundColor.toCss(true), color: this.textColor.toCss(true), padding: this.padding + "px", borderRadius: this.borderRadius + "px", textShadow: this._textShadow } }, [this.text]);
  }
  renderCanvas(t26) {
    if (!this.visible) return;
    const e27 = t26.font.replace(/^(.*?)px/, "");
    t26.font = `${this.fontSize}px ${e27}`;
    const { padding: o23, borderRadius: i23 } = this, r25 = t26.measureText(this.text).width, s13 = "" !== this.text ? this.fontSize : 0, l26 = h14[this.anchor];
    t26.textAlign = "center", t26.textBaseline = "middle";
    const n29 = r25 + 2 * o23, a39 = s13 + 2 * o23, x15 = this.x + l26.x * n29, d18 = this.y + l26.y * a39;
    this._roundedRect(t26, x15, d18, n29, a39, i23), t26.fillStyle = this.backgroundColor.toCss(true), t26.fill();
    const p19 = this.x + (l26.x + 0.5) * n29, c22 = this.y + (l26.y + 0.5) * a39;
    this._renderTextShadow(t26, this.text, p19, c22), t26.fillStyle = this.textColor.toCss(true), t26.fillText(this.text, p19, c22);
  }
  _renderTextShadow(t26, e27, o23, i23) {
    t26.lineJoin = "miter", t26.fillStyle = `rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1 / a20.length})`;
    const r25 = this._textShadowSize;
    for (const [s13, l26] of a20) t26.fillText(e27, o23 + r25 * s13, i23 + r25 * l26);
  }
  _roundedRect(t26, e27, o23, i23, r25, s13) {
    s13 = Math.min(s13, r25 / 2, i23 / 2), t26.beginPath(), t26.moveTo(e27, o23 + s13), t26.arcTo(e27, o23, e27 + s13, o23, s13), t26.lineTo(e27 + i23 - s13, o23), t26.arcTo(e27 + i23, o23, e27 + i23, o23 + s13, s13), t26.lineTo(e27 + i23, o23 + r25 - s13), t26.arcTo(e27 + i23, o23 + r25, e27 + i23 - s13, o23 + r25, s13), t26.lineTo(e27 + s13, o23 + r25), t26.arcTo(e27, o23 + r25, e27, o23 + r25 - s13, s13), t26.closePath();
  }
  _cssClasses() {
    const t26 = { "esri-text-overlay-item": true };
    let e27;
    for (e27 in l13) t26[l13[e27]] = this.anchor === e27;
    return t26;
  }
};
r2([m()], n14.prototype, "x", void 0), r2([m()], n14.prototype, "y", void 0), r2([m()], n14.prototype, "position", null), r2([m()], n14.prototype, "text", void 0), r2([m()], n14.prototype, "fontSize", void 0), r2([m()], n14.prototype, "anchor", void 0), r2([m()], n14.prototype, "visible", void 0), r2([m()], n14.prototype, "isDecoration", void 0), r2([m()], n14.prototype, "backgroundColor", void 0), r2([m()], n14.prototype, "textColor", void 0), r2([m()], n14.prototype, "_textShadowSize", void 0), r2([m()], n14.prototype, "_textShadowColor", null), r2([m()], n14.prototype, "_textShadow", null), r2([m()], n14.prototype, "padding", null), r2([m()], n14.prototype, "borderRadius", null), n14 = r2([a2("esri.views.overlay.TextOverlayItem")], n14);
var h14 = { bottom: { x: -0.5, y: -1, textAlign: "center", textBaseline: "bottom" }, "bottom-left": { x: 0, y: -1, textAlign: "left", textBaseline: "bottom" }, "bottom-right": { x: -1, y: -1, textAlign: "right", textBaseline: "bottom" }, center: { x: -0.5, y: -0.5, textAlign: "center", textBaseline: "middle" }, left: { x: 0, y: -0.5, textAlign: "left", textBaseline: "middle" }, right: { x: -1, y: -0.5, textAlign: "right", textBaseline: "middle" }, top: { x: -0.5, y: 0, textAlign: "center", textBaseline: "top" }, "top-left": { x: 0, y: 0, textAlign: "left", textBaseline: "top" }, "top-right": { x: -1, y: 0, textAlign: "right", textBaseline: "top" } };
var a20 = [];
{
  const t26 = 16;
  for (let e27 = 0; e27 < 360; e27 += 360 / t26) a20.push([Math.cos(Math.PI * e27 / 180), Math.sin(Math.PI * e27 / 180)]);
}
var x7 = n14;

// node_modules/@arcgis/core/views/interactive/SegmentLabels.js
var P7 = 3025;
var V6 = { default: 15, far: 25 };
var A7 = class extends g {
  constructor(t26) {
    super(t26), this.context = null, this.stagedVertex = null, this.visible = true, this.edgeDistance = "default", this._messageUnitsTask = null, this._labelInfos = [], this._nextLabelIndex = 0;
  }
  initialize() {
    this.addHandles([d2(() => [null != this.context && this.getCameraOrExtent(this.context), this.visible, this._edgeDistancePixels, this.stagedVertex, this._messagesUnits], () => this._update()), ...["vertex-add", "vertex-update", "vertex-remove"].map((t26) => v(() => {
      var _a;
      return (_a = this.context) == null ? void 0 : _a.editGeometryOperations;
    }, t26, () => this._update())), d2(() => this._colors, (t26) => this._updateStyle(t26)), h2(() => this._refreshMessages()), e(() => {
      var _a;
      return (_a = this._messageUnitsTask) == null ? void 0 : _a.abort();
    })]), this._refreshMessages();
  }
  destroy() {
    for (this._nextLabelIndex = 0; this._labelInfos.length; ) this._destroyLabel(this._labelInfos.pop());
  }
  get updating() {
    return null == this._messagesUnits;
  }
  get test() {
  }
  get _messagesUnits() {
    var _a;
    return (_a = this._messageUnitsTask) == null ? void 0 : _a.value;
  }
  get _edgeDistancePixels() {
    return V6[this.edgeDistance];
  }
  get _colors() {
    var _a;
    const t26 = ((_a = this.context) == null ? void 0 : _a.view.effectiveTheme.textColor) ?? h.fromArray([255, 255, 255]);
    return { textColor: t26, backgroundColor: P4(E4(t26, R3.Low), 0.6) };
  }
  _update() {
    if (this.destroyed) return;
    this._nextLabelIndex = 0;
    const { context: t26, stagedVertex: e27 } = this;
    if (!t26) return this._destroyUnusedLabels();
    const { editGeometryOperations: s13 } = t26, { components: o23, geometry: r25, coordinateHelper: i23 } = s13.data;
    if (!r25) return this._destroyUnusedLabels();
    const n29 = o23.length;
    for (let l26 = 0; l26 < n29; ++l26) {
      const o24 = G4(r25, s13, e27, i23, l26);
      if (o24.length < 2 || !R7(o24, t26.view, t26.elevationInfo, i23.spatialReference)) continue;
      const a39 = 1 === n29 && !a3(o24);
      let c22 = H4, h25 = X;
      this.toScreenPointArray(t26, o24[0], c22);
      for (let e28 = 1; e28 < o24.length; ++e28) {
        const s14 = o24[e28 - 1], r26 = o24[e28];
        this.toScreenPointArray(t26, r26, h25), this._addLabel(t26, s14, c22, r26, h25, a39), [c22, h25] = [h25, c22];
      }
    }
    this._destroyUnusedLabels();
  }
  _updateStyle({ textColor: t26, backgroundColor: e27 }) {
    const s13 = this._nextLabelIndex, o23 = this._labelInfos;
    for (let r25 = 0; r25 < s13; ++r25) {
      const { label: s14 } = o23[r25];
      s14.textColor = t26, s14.backgroundColor = e27;
    }
  }
  _addLabel(t26, e27, s13, o23, r25, i23) {
    const { label: n29 } = this._getOrCreateLabel(t26);
    if (!this.visible || b3(s13, r25) < P7) return void (n29.visible = false);
    const { spatialReference: l26 } = t26.editGeometryOperations.data, a39 = u13(e27, o23, l26), h25 = this._messagesUnits, p19 = e12(t26.view);
    n29.text = null != h25 && null != a39 ? x5(h25, a39, p19) : "", n29.visible = true;
    const m15 = r25[0] - s13[0], d18 = r25[1] - s13[1];
    i23 ? o5(z5, -d18, m15) : o5(z5, d18, -m15), v3(z5, z5), l4(z5, z5, this._edgeDistancePixels), _3(F7, s13, r25, 0.5), u5(F7, F7, z5), n29.position = [F7[0], F7[1]], Math.abs(z5[0]) > Math.abs(z5[1]) ? n29.anchor = z5[0] > 0 ? "left" : "right" : n29.anchor = -z5[1] < 0 ? "top" : "bottom";
  }
  _getOrCreateLabel(t26) {
    var _a;
    const e27 = this._labelInfos.length > this._nextLabelIndex, { textColor: s13, backgroundColor: o23 } = this._colors;
    if (e27) {
      const t27 = this._labelInfos[this._nextLabelIndex++], { label: e28 } = t27;
      return e28.textColor = s13, e28.backgroundColor = o23, t27;
    }
    const r25 = new x7({ anchor: "center", fontSize: 8, textColor: s13, backgroundColor: o23 });
    (_a = t26.view.overlay) == null ? void 0 : _a.items.add(r25);
    const i23 = { label: r25 };
    return this._labelInfos.push(i23), this._nextLabelIndex = this._labelInfos.length, i23;
  }
  _destroyUnusedLabels() {
    for (; this._labelInfos.length > this._nextLabelIndex; ) this._destroyLabel(this._labelInfos.pop());
  }
  _destroyLabel({ label: t26 }) {
    var _a, _b;
    (_b = (_a = this.context) == null ? void 0 : _a.view.overlay) == null ? void 0 : _b.items.remove(t26), t26.destroy();
  }
  _refreshMessages() {
    var _a;
    (_a = this._messageUnitsTask) == null ? void 0 : _a.abort(), this._messageUnitsTask = d(() => f("esri/core/t9n/Units"));
  }
};
function G4(t26, e27, s13, o23, r25) {
  const i23 = [];
  if (e27.data.components[r25].iterateVertices((t27) => {
    i23.push(o23.toXYZ(t27.pos, c4.get()));
  }), 0 === r25 && null != s13 && i23.push(o23.toXYZ(s13, c4.get())), i23.length < 2) return i23;
  const n29 = i23[0], l26 = i23[i23.length - 1];
  return "polygon" === t26.type && i23.length > 2 && !J(n29, l26) && i23.push(n29), i23;
}
function R7(t26, e27, s13, o23) {
  if ("2d" === e27.type) return true;
  const r25 = V2(o23) ?? 1, i23 = $(o23), n29 = (t27) => x4(e27, t27, o23, s13, j4) ?? 0;
  for (let l26 = 1; l26 < t26.length; ++l26) {
    const e28 = t26[l26 - 1], s14 = t26[l26], o24 = (s14[0] - e28[0]) * r25, a39 = (s14[1] - e28[1]) * r25, c22 = (n29(s14) - n29(e28)) * i23;
    if (Math.abs(c22) / Math.sqrt(o24 * o24 + a39 * a39) > q6) return false;
  }
  return true;
}
r2([m()], A7.prototype, "context", void 0), r2([m()], A7.prototype, "stagedVertex", void 0), r2([m()], A7.prototype, "visible", void 0), r2([m()], A7.prototype, "edgeDistance", void 0), r2([m()], A7.prototype, "updating", null), r2([m()], A7.prototype, "_messageUnitsTask", void 0), r2([m()], A7.prototype, "_messagesUnits", null), r2([m()], A7.prototype, "_edgeDistancePixels", null), r2([m()], A7.prototype, "_colors", null), A7 = r2([a2("esri.views.interactive.SegmentLabels")], A7);
var q6 = s(5);
var z5 = n5();
var F7 = n5();
var H4 = f2();
var X = f2();

// node_modules/@arcgis/core/views/3d/interactive/SegmentLabels3D.js
var a21 = class extends A7 {
  getCameraOrExtent({ view: e27 }) {
    return e27.state.camera;
  }
  toScreenPointArray({ view: e27, elevationInfo: t26, editGeometryOperations: o23 }, i23, a39 = f2()) {
    const { spatialReference: m15 } = o23.data.coordinateHelper;
    return i11(i23, m15, t26, e27, c12), e27.state.camera.projectToScreen(c12, a39), a39;
  }
};
a21 = r2([a2("esri.views.3d.interactive.SegmentLabels3D")], a21);
var c12 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/DrapedVisualElementResources.js
var d10 = class {
  constructor(e27) {
    this._resourceFactory = e27, this._resources = null, this._visible = true, this._attached = false, this._renderGroup = a16.Outline;
  }
  destroy() {
    this._destroyResources();
  }
  get resources() {
    return null != this._resources ? this._resources.external : null;
  }
  get visible() {
    return this._visible;
  }
  set visible(e27) {
    e27 !== this._visible && (this._visible = e27, this._syncGeometriesToRenderer());
  }
  get attached() {
    return this._attached;
  }
  set attached(e27) {
    e27 !== this._attached && (this._attached = e27, this._createOrDestroyResources());
  }
  get renderGroup() {
    return this._renderGroup;
  }
  set renderGroup(e27) {
    var _a;
    this._renderGroup = e27;
    const r25 = (_a = this._resources) == null ? void 0 : _a.layerView;
    r25 && (r25.renderGroup = e27);
  }
  recreate() {
    this.attached && this._createResources();
  }
  recreateGeometry() {
    this._resourceFactory.recreateGeometry ? null != this._resources && (this._ensureRenderGeometriesRemoved(), this._resourceFactory.recreateGeometry(this._resources.external), this._syncGeometriesToRenderer()) : this.recreate();
  }
  _createOrDestroyResources() {
    this._attached ? null == this._resources && this._createResources() : this._destroyResources();
  }
  _createResources() {
    var _a;
    this._destroyResources();
    const e27 = this._resourceFactory.createResources(), r25 = new a22({ view: this._resourceFactory.view, renderGroup: this._renderGroup }), s13 = (_a = this._resourceFactory.view.basemapTerrain) == null ? void 0 : _a.overlayManager;
    this._resources = { layerView: new a22({ view: this._resourceFactory.view, renderGroup: this._renderGroup }), external: e27, geometriesAdded: false }, s13 && (this._resources.drapeSourceRenderer = s13.registerGeometryDrapeSource(r25)), this._syncGeometriesToRenderer();
  }
  _destroyResources() {
    var _a;
    if (null == this._resources) return;
    this._ensureRenderGeometriesRemoved();
    const e27 = (_a = this._resourceFactory.view.basemapTerrain) == null ? void 0 : _a.overlayManager;
    e27 && e27.unregisterDrapeSource(this._resources.layerView), this._resourceFactory.destroyResources(this._resources.external), this._resources = null;
  }
  _syncGeometriesToRenderer() {
    this._visible ? this._ensureRenderGeometriesAdded() : this._ensureRenderGeometriesRemoved();
  }
  _ensureRenderGeometriesRemoved() {
    var _a;
    if (null == ((_a = this._resources) == null ? void 0 : _a.drapeSourceRenderer)) return;
    if (!this._resources.geometriesAdded) return;
    this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries, E10.UPDATE), this._resources.geometriesAdded = false;
  }
  _ensureRenderGeometriesAdded() {
    var _a;
    if (null == ((_a = this._resources) == null ? void 0 : _a.drapeSourceRenderer)) return;
    if (this._resources.geometriesAdded) return;
    this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries, E10.UPDATE), this._resources.geometriesAdded = true;
  }
};
var a22 = class extends n2.IdentifiableMixin(g) {
  constructor(e27) {
    super(e27), this.drapeSourceType = e15.Features, this.updatePolicy = C3.SYNC, this.renderGroup = a16.Outline;
  }
};
r2([m({ constructOnly: true })], a22.prototype, "view", void 0), r2([m({ readOnly: true })], a22.prototype, "drapeSourceType", void 0), r2([m()], a22.prototype, "renderGroup", void 0), a22 = r2([a2("esri.views.3d.interactive.visualElements.DrapedVisualElementResources")], a22);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js
var t16 = class {
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e27) {
    this._isDecoration = e27;
  }
  constructor(t26) {
    this._isDecoration = false, this._attached = false, this._resourcesCreated = false, this._visible = true, this.view = t26.view, this._handle = d2(() => t26.view.ready, (e27) => {
      this._resourcesCreated && (e27 ? this._createResources() : this._destroyResources());
    });
  }
  applyProperties(e27) {
    let t26 = false;
    for (const s13 in e27) s13 in this && ("attached" === s13 ? t26 = !!e27[s13] : this[s13] = e27[s13]);
    this.attached = t26;
  }
  destroy() {
    this.attached = false, this._handle.remove();
  }
  get attached() {
    return this._attached;
  }
  set attached(e27) {
    e27 !== this._attached && this.view._stage && (this._attached = e27, this._attached && !this._resourcesCreated ? this._createResources() : !this._attached && this._resourcesCreated && this._destroyResources(), this.onAttachedChange(e27));
  }
  onAttachedChange(e27) {
  }
  get visible() {
    return this._visible;
  }
  set visible(e27) {
    e27 !== this._visible && (this._visible = e27, this.attached && this.updateVisibility(e27));
  }
  _createResources() {
    this.createResources(), this._resourcesCreated = true, this.updateVisibility(this.visible);
  }
  _destroyResources() {
    this.destroyResources(), this._resourcesCreated = false;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js
var c13 = class {
  constructor(e27) {
    this._resourceFactory = e27, this._resources = null, this._visible = true, this._attached = false;
  }
  destroy() {
    this._destroyResources();
  }
  get object() {
    return null != this._resources ? this._resources.object : null;
  }
  get resources() {
    return null != this._resources ? this._resources.external : null;
  }
  get visible() {
    return this._visible;
  }
  set visible(e27) {
    e27 !== this._visible && (this._visible = e27, this._syncVisible());
  }
  get attached() {
    return this._attached;
  }
  set attached(e27) {
    e27 !== this._attached && (this._attached = e27, this._createOrDestroyResources());
  }
  recreate() {
    this.attached && this._createResources();
  }
  recreateGeometry() {
    if (!this._resourceFactory.recreateGeometry) return void this.recreate();
    const e27 = this._resourceFactory.view._stage;
    if (null == this._resources || !e27) return;
    const s13 = this._resources.object;
    this._resources.external.forEach((s14) => {
      s14.type !== e9.Mesh && s14.type !== e9.Line && s14.type !== e9.Point || e27.remove(s14);
    }), s13.removeAllGeometries(), this._resourceFactory.recreateGeometry(this._resources.external, s13, this._resources.layer), this._resources.external.forEach((s14) => {
      s14.type !== e9.Mesh && s14.type !== e9.Line && s14.type !== e9.Point || e27.add(s14);
    });
  }
  _createOrDestroyResources() {
    this._attached ? this._resources || this._createResources() : this._destroyResources();
  }
  _createResources() {
    this._destroyResources();
    const c22 = this._resourceFactory, a39 = c22.view, h25 = a39._stage;
    if (!h25) return;
    const u24 = new a17(h25, { pickable: false, updatePolicy: C3.SYNC }), l26 = new A5({ castShadow: false }), n29 = c22.createResources(l26, u24);
    n29.forEach((e27) => {
      h25.add(e27), e27.type === e9.Texture && e27.load(h25.renderView.renderingContext);
    }), h25.add(l26), u24.add(l26);
    const _10 = c22.cameraChanged, y15 = _10 ? d2(() => a39.state.camera, (e27) => _10(e27), P) : null;
    this._resources = { layer: u24, object: l26, external: n29, cameraHandle: y15 }, this._syncVisible();
  }
  _destroyResources() {
    var _a;
    if (null == this._resources) return;
    const e27 = this._resourceFactory.view._stage;
    e27 && (e27.remove(this._resources.object), this._resources.layer.destroy(), this._resources.external.forEach((s13) => {
      e27.remove(s13), s13.type === e9.Texture && s13.unload();
    })), this._resources.object.dispose(), (_a = this._resources.cameraHandle) == null ? void 0 : _a.remove(), this._resourceFactory.destroyResources(this._resources.external), this._resources = null;
  }
  _syncVisible() {
    null != this._resources && (this._resources.object.visible = this._visible);
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/EngineVisualElement.js
var t17 = class extends t16 {
  constructor(s13) {
    super(s13), this._isDraped = false, this.object3dResources = new c13(this.createObject3DResourceFactory(s13.view)), this.drapedResources = new d10(this.createDrapedResourceFactory(s13.view)), this.isDraped = s13.isDraped ?? false;
  }
  get isDraped() {
    return this._isDraped;
  }
  set isDraped(e27) {
    e27 !== this._isDraped && (this._isDraped = e27, this.object3dResources.attached = this.attached && !e27, this.drapedResources.attached = this.attached && e27);
  }
  get renderGroup() {
    return this.drapedResources.renderGroup;
  }
  set renderGroup(e27) {
    this.drapedResources.renderGroup = e27;
  }
  createResources() {
    this.object3dResources.attached = !this._isDraped, this.drapedResources.attached = this._isDraped;
  }
  destroyResources() {
    this.object3dResources.attached = false, this.drapedResources.attached = false;
  }
  recreate() {
    this.object3dResources.recreate(), this.drapedResources.recreate();
  }
  recreateGeometry() {
    this.object3dResources.recreateGeometry(), this.drapedResources.recreateGeometry();
  }
  destroy() {
    this.object3dResources.destroy(), this.drapedResources.destroy(), super.destroy();
  }
  updateVisibility(e27) {
    this.object3dResources.visible = e27, this.drapedResources.visible = e27;
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CompositingTechnique.js
var a23 = class extends l8 {
  constructor(e27, o23) {
    super(e27, o23, new t11(c11, () => import("./Compositing.glsl-U42ZDKYK.js")));
  }
  initializePipeline(r25) {
    switch (r25.blitMode) {
      case i12.None:
      case i12.Depth:
        return B({ colorWrite: g6 });
      case i12.Alpha:
        return B({ blending: c6, colorWrite: g6 });
      default:
        n(r25.blitMode);
      case i12.PremultipliedAlpha:
      case i12.COUNT:
        return B({ blending: o9, colorWrite: g6 });
    }
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/blit/Blit.js
var o17 = class {
  constructor(s13, o23 = i12.None) {
    this._techniques = s13, this._parameters = new m7(), this._configuration = new r17(), this._configuration.blitMode = o23, s13.precompile(a23, this._configuration);
  }
  blit(e27, i23, r25, o23) {
    e27.bindFramebuffer(r25.fbo), e27.setClearColor(0, 0, 0, 1), e27.clear(_5.COLOR), this._parameters.texture = i23.getTexture();
    const n29 = this._techniques.get(a23, this._configuration);
    e27.bindTechnique(n29, o23, this._parameters), e27.screen.draw();
  }
  blend(e27, i23, r25, s13, o23 = 1) {
    this._configuration.hasOpacityFactor = o23 < 1;
    const n29 = this._techniques.get(a23, this._configuration);
    return !!n29.compiled && (e27.bindFramebuffer(r25.fbo), this._parameters.texture = i23.getTexture(), this._parameters.opacity = o23, e27.bindTechnique(n29, s13, this._parameters), e27.screen.draw(), true);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js
var a24 = class extends c5 {
  constructor() {
    super(...arguments), this.innerColor = r6(1, 1, 1), this.innerWidth = 1, this.glowColor = r6(1, 0.5, 0), this.glowWidth = 8, this.glowFalloff = 8, this.globalAlpha = 0.75, this.globalAlphaContrastBoost = 2, this.angleCutoff = s(6), this.pointDistanceOrigin = n3(), this.pointDistanceTarget = n3(), this.lineVerticalPlaneSegment = v5(), this.intersectsLineSegment = v5(), this.intersectsLineRadius = 3, this.heightManifoldTarget = n3(), this.lineStartWorld = n3(), this.lineEndWorld = n3();
  }
};
var h15 = class extends l8 {
  constructor(e27, t26) {
    super(e27, t26, new t11($2, () => import("./Laserlines.glsl-O2RGWROT.js")));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js
var a25 = class extends a24 {
  constructor() {
    super(...arguments), this.origin = n3();
  }
};
var c14 = class extends l8 {
  constructor(e27, s13) {
    super(e27, s13, new t11(u14, () => import("./LaserlinePath.glsl-DNK6FVUW.js")), n15);
  }
};
var n15 = /* @__PURE__ */ new Map([[e4.START, 0], [e4.END, 1], [e4.EXTRUDE, 2], [e4.START_UP, 3], [e4.END_UP, 4]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js
var _6 = class {
  constructor(e27) {
    this._renderCoordsHelper = e27, this._buffers = null, this._origin = n3(), this._dirty = false, this._count = 0, this._vao = null;
  }
  set vertices(e27) {
    const t26 = t2(3 * e27.length);
    let r25 = 0;
    for (const s13 of e27) t26[r25++] = s13[0], t26[r25++] = s13[1], t26[r25++] = s13[2];
    this.buffers = [t26];
  }
  set buffers(t26) {
    if (this._buffers = t26, this._buffers.length > 0) {
      const t27 = this._buffers[0], r25 = 3 * Math.floor(t27.length / 3 / 2);
      o6(this._origin, t27[r25], t27[r25 + 1], t27[r25 + 2]);
    } else o6(this._origin, 0, 0, 0);
    this._dirty = true;
  }
  get origin() {
    return this._origin;
  }
  draw(e27) {
    const t26 = this._ensureVAO(e27);
    null != t26 && (e27.bindVAO(t26), e27.drawArrays(E3.TRIANGLES, 0, this._count));
  }
  dispose() {
    null != this._vao && this._vao.dispose();
  }
  get _layout() {
    return this._renderCoordsHelper.viewingMode === l6.Global ? b10 : g10;
  }
  _ensureVAO(e27) {
    return null == this._buffers ? null : (this._vao ?? (this._vao = this._createVAO(e27, this._buffers)), this._ensureVertexData(this._vao, this._buffers), this._vao);
  }
  _createVAO(e27, t26) {
    const r25 = this._createDataBuffer(t26);
    return this._dirty = false, new r11(e27, n15, /* @__PURE__ */ new Map([["data", t6(this._layout)]]), /* @__PURE__ */ new Map([["data", E5.createVertex(e27, F2.STATIC_DRAW, r25)]]));
  }
  _ensureVertexData(e27, t26) {
    var _a;
    if (!this._dirty) return;
    const r25 = this._createDataBuffer(t26);
    (_a = e27.vertexBuffers.get("data")) == null ? void 0 : _a.setData(r25), this._dirty = false;
  }
  _createDataBuffer(r25) {
    const s13 = r25.reduce((e27, t26) => e27 + d11(t26), 0);
    this._count = s13;
    const i23 = this._layout.createBuffer(s13), o23 = this._origin;
    let f21 = 0, n29 = 0;
    const u24 = "startUp" in i23 ? this._setUpVectors.bind(this, i23) : void 0;
    for (const a39 of r25) {
      for (let r26 = 0; r26 < a39.length; r26 += 3) {
        const s14 = o6(m8, a39[r26], a39[r26 + 1], a39[r26 + 2]);
        0 === r26 ? n29 = this._renderCoordsHelper.getAltitude(s14) : this._renderCoordsHelper.setAltitude(s14, n29);
        const l26 = f21 + 2 * r26;
        u24 == null ? void 0 : u24(r26, l26, a39, s14);
        const c22 = c2(m8, s14, o23);
        if (r26 < a39.length - 3) {
          for (let e27 = 0; e27 < 6; e27++) i23.start.setVec(l26 + e27, c22);
          i23.extrude.setValues(l26, 0, -1), i23.extrude.setValues(l26 + 1, 1, -1), i23.extrude.setValues(l26 + 2, 1, 1), i23.extrude.setValues(l26 + 3, 0, -1), i23.extrude.setValues(l26 + 4, 1, 1), i23.extrude.setValues(l26 + 5, 0, 1);
        }
        if (r26 > 0) for (let e27 = -6; e27 < 0; e27++) i23.end.setVec(l26 + e27, c22);
      }
      f21 += d11(a39);
    }
    return i23.buffer;
  }
  _setUpVectors(e27, t26, r25, s13, i23) {
    const o23 = this._renderCoordsHelper.worldUpAtPosition(i23, p16);
    if (t26 < s13.length - 3) for (let f21 = 0; f21 < 6; f21++) e27.startUp.setVec(r25 + f21, o23);
    if (t26 > 0) for (let f21 = -6; f21 < 0; f21++) e27.endUp.setVec(r25 + f21, o23);
  }
};
function d11(e27) {
  return 3 * (2 * (e27.length / 3 - 1));
}
var p16 = n3();
var m8 = n3();
var b10 = H2().vec3f(e4.START).vec3f(e4.END).vec2f(e4.EXTRUDE).vec3f(e4.START_UP).vec3f(e4.END_UP);
var g10 = H2().vec3f(e4.START).vec3f(e4.END).vec2f(e4.EXTRUDE);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js
var e18 = class extends a11 {
  constructor() {
    super(...arguments), this.contrastControlEnabled = false, this.spherical = false;
  }
};
r2([i9()], e18.prototype, "contrastControlEnabled", void 0), r2([i9()], e18.prototype, "spherical", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js
var n16 = class extends e18 {
  constructor() {
    super(...arguments), this.heightManifoldEnabled = false, this.pointDistanceEnabled = false, this.lineVerticalPlaneEnabled = false, this.intersectsLineEnabled = false;
  }
};
r2([i9()], n16.prototype, "heightManifoldEnabled", void 0), r2([i9()], n16.prototype, "pointDistanceEnabled", void 0), r2([i9()], n16.prototype, "lineVerticalPlaneEnabled", void 0), r2([i9()], n16.prototype, "intersectsLineEnabled", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js
var j7 = class extends h8 {
  constructor(e27) {
    super(e27), this.produces = t12.LASERLINES, this.consumes = { required: [t12.LASERLINES, "normals"] }, this.requireGeometryDepth = true, this._configuration = new n16(), this._pathTechniqueConfiguration = new e18(), this._heightManifoldEnabled = false, this._pointDistanceEnabled = false, this._lineVerticalPlaneEnabled = false, this._intersectsLineEnabled = false, this._intersectsLineInfinite = false, this._pathVerticalPlaneEnabled = false, this._passParameters = new a25();
    const t26 = e27.view._stage.renderView.techniques, i23 = new e18();
    i23.contrastControlEnabled = e27.contrastControlEnabled, t26.precompile(c14, i23);
  }
  initialize() {
    this._passParameters.renderCoordsHelper = this.view.renderCoordsHelper, this._pathTechniqueConfiguration.spherical = this.view.state.viewingMode === l6.Global, this._pathTechniqueConfiguration.contrastControlEnabled = this.contrastControlEnabled, this._techniques.precompile(c14, this._pathTechniqueConfiguration), this._blit = new o17(this._techniques, i12.PremultipliedAlpha);
  }
  destroy() {
    this._pathVerticalPlaneData = r4(this._pathVerticalPlaneData), this._blit = null;
  }
  get _techniques() {
    return this.view._stage.renderView.techniques;
  }
  get heightManifoldEnabled() {
    return this._heightManifoldEnabled;
  }
  set heightManifoldEnabled(e27) {
    this._heightManifoldEnabled !== e27 && (this._heightManifoldEnabled = e27, this.requestRender(a8.UPDATE));
  }
  get heightManifoldTarget() {
    return this._passParameters.heightManifoldTarget;
  }
  set heightManifoldTarget(e27) {
    s5(this._passParameters.heightManifoldTarget, e27), this.requestRender(a8.UPDATE);
  }
  get pointDistanceEnabled() {
    return this._pointDistanceEnabled;
  }
  set pointDistanceEnabled(e27) {
    e27 !== this._pointDistanceEnabled && (this._pointDistanceEnabled = e27, this.requestRender(a8.UPDATE));
  }
  get pointDistanceTarget() {
    return this._passParameters.pointDistanceTarget;
  }
  set pointDistanceTarget(e27) {
    s5(this._passParameters.pointDistanceTarget, e27), this.requestRender(a8.UPDATE);
  }
  get pointDistanceOrigin() {
    return this._passParameters.pointDistanceOrigin;
  }
  set pointDistanceOrigin(e27) {
    s5(this._passParameters.pointDistanceOrigin, e27), this.requestRender(a8.UPDATE);
  }
  get lineVerticalPlaneEnabled() {
    return this._lineVerticalPlaneEnabled;
  }
  set lineVerticalPlaneEnabled(e27) {
    e27 !== this._lineVerticalPlaneEnabled && (this._lineVerticalPlaneEnabled = e27, this.requestRender(a8.UPDATE));
  }
  get lineVerticalPlaneSegment() {
    return this._passParameters.lineVerticalPlaneSegment;
  }
  set lineVerticalPlaneSegment(e27) {
    p6(e27, this._passParameters.lineVerticalPlaneSegment), this.requestRender(a8.UPDATE);
  }
  get intersectsLineEnabled() {
    return this._intersectsLineEnabled;
  }
  set intersectsLineEnabled(e27) {
    e27 !== this._intersectsLineEnabled && (this._intersectsLineEnabled = e27, this.requestRender(a8.UPDATE));
  }
  get intersectsLineSegment() {
    return this._passParameters.intersectsLineSegment;
  }
  set intersectsLineSegment(e27) {
    p6(e27, this._passParameters.intersectsLineSegment), this.requestRender(a8.UPDATE);
  }
  get intersectsLineInfinite() {
    return this._intersectsLineInfinite;
  }
  set intersectsLineInfinite(e27) {
    e27 !== this._intersectsLineInfinite && (this._intersectsLineInfinite = e27, this.requestRender(a8.UPDATE));
  }
  get pathVerticalPlaneEnabled() {
    return this._pathVerticalPlaneEnabled;
  }
  set pathVerticalPlaneEnabled(e27) {
    e27 !== this._pathVerticalPlaneEnabled && (this._pathVerticalPlaneEnabled = e27, null != this._pathVerticalPlaneData && this.requestRender(a8.UPDATE));
  }
  set pathVerticalPlaneVertices(e27) {
    null == this._pathVerticalPlaneData && (this._pathVerticalPlaneData = new _6(this._passParameters.renderCoordsHelper)), this._pathVerticalPlaneData.vertices = e27, this.pathVerticalPlaneEnabled && this.requestRender(a8.UPDATE);
  }
  set pathVerticalPlaneBuffers(e27) {
    null == this._pathVerticalPlaneData && (this._pathVerticalPlaneData = new _6(this._passParameters.renderCoordsHelper)), this._pathVerticalPlaneData.buffers = e27, this.pathVerticalPlaneEnabled && this.requestRender(a8.UPDATE);
  }
  setParameters(e27) {
    n10(this._passParameters, e27) && this.requestRender(a8.UPDATE);
  }
  precompile() {
    this._acquireTechnique();
  }
  render(e27) {
    const t26 = e27.find(({ name: e28 }) => e28 === this.produces);
    if (!this.bindParameters.decorations || null == this._blit) return t26;
    const i23 = this.renderingContext, n29 = e27.find(({ name: e28 }) => "normals" === e28);
    this._passParameters.normals = n29 == null ? void 0 : n29.getTexture();
    const s13 = () => {
      (this.heightManifoldEnabled || this.pointDistanceEnabled || this.lineVerticalPlaneSegment || this.intersectsLineEnabled) && this._renderUnified(), this.pathVerticalPlaneEnabled && this._renderPath();
    };
    if (!this.contrastControlEnabled) return i23.bindFramebuffer(t26.fbo), s13(), t26;
    this._passParameters.colors = t26.getTexture();
    const r25 = this.fboCache.acquire(t26.fbo.width, t26.fbo.height, "laser lines");
    return i23.bindFramebuffer(r25.fbo), i23.setClearColor(0, 0, 0, 0), i23.clear(_5.COLOR | _5.DEPTH), s13(), i23.unbindTexture(t26.getTexture()), this._blit.blend(i23, r25, t26, this.bindParameters) || this.requestRender(a8.UPDATE), r25.release(), t26;
  }
  _acquireTechnique() {
    return this._configuration.heightManifoldEnabled = this.heightManifoldEnabled, this._configuration.lineVerticalPlaneEnabled = this.lineVerticalPlaneEnabled, this._configuration.pointDistanceEnabled = this.pointDistanceEnabled, this._configuration.intersectsLineEnabled = this.intersectsLineEnabled, this._configuration.contrastControlEnabled = this.contrastControlEnabled, this._configuration.spherical = this.view.state.viewingMode === l6.Global, this._techniques.get(h15, this._configuration);
  }
  _renderUnified() {
    if (!this._updatePassParameters()) return;
    const e27 = this._acquireTechnique();
    if (e27.compiled) {
      const t26 = this.renderingContext;
      t26.bindTechnique(e27, this.bindParameters, this._passParameters), t26.screen.draw();
    } else this.requestRender(a8.UPDATE);
  }
  _renderPath() {
    if (null == this._pathVerticalPlaneData) return;
    const e27 = this._techniques.get(c14, this._pathTechniqueConfiguration);
    if (e27.compiled) {
      const t26 = this.renderingContext;
      this._passParameters.origin = this._pathVerticalPlaneData.origin, t26.bindTechnique(e27, this.bindParameters, this._passParameters), this._pathVerticalPlaneData.draw(t26);
    } else this.requestRender(a8.UPDATE);
  }
  _updatePassParameters() {
    if (!this._intersectsLineEnabled) return true;
    const e27 = this.bindParameters.camera, t26 = this._passParameters;
    if (this._intersectsLineInfinite) {
      if (y5(k(t26.intersectsLineSegment.origin, t26.intersectsLineSegment.vector), w6), w6.c0 = -Number.MAX_VALUE, !m2(e27.frustum, w6)) return false;
      p7(w6, t26.lineStartWorld), g5(w6, t26.lineEndWorld);
    } else s5(t26.lineStartWorld, t26.intersectsLineSegment.origin), u6(t26.lineEndWorld, t26.intersectsLineSegment.origin, t26.intersectsLineSegment.vector);
    return true;
  }
  get test() {
  }
};
r2([m({ constructOnly: true })], j7.prototype, "contrastControlEnabled", void 0), r2([m({ constructOnly: true })], j7.prototype, "isDecoration", void 0), r2([m()], j7.prototype, "produces", void 0), r2([m()], j7.prototype, "consumes", void 0), j7 = r2([a2("esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer")], j7);
var w6 = a7();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js
var c15 = class extends t16 {
  constructor(e27) {
    super(e27), this._angleCutoff = V5, this._style = {}, this._heightManifoldTarget = n3(), this._heightManifoldEnabled = false, this._intersectsLine = v5(), this._intersectsLineEnabled = false, this._intersectsLineInfinite = false, this._lineVerticalPlaneSegment = null, this._pathVerticalPlaneBuffers = null, this._pointDistanceLine = null, this.applyProperties(e27);
  }
  get testData() {
  }
  createResources() {
    this._ensureRenderer();
  }
  destroyResources() {
    this._disposeRenderer();
  }
  updateVisibility() {
    this._syncRenderer(), this._syncHeightManifold(), this._syncIntersectsLine(), this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance();
  }
  get angleCutoff() {
    return this._angleCutoff;
  }
  set angleCutoff(e27) {
    this._angleCutoff !== e27 && (this._angleCutoff = e27, this._syncAngleCutoff());
  }
  get style() {
    return this._style;
  }
  set style(e27) {
    this._style = e27, this._syncStyle();
  }
  get heightManifoldTarget() {
    return this._heightManifoldEnabled ? this._heightManifoldTarget : null;
  }
  set heightManifoldTarget(t26) {
    null != t26 ? (s5(this._heightManifoldTarget, t26), this._heightManifoldEnabled = true) : this._heightManifoldEnabled = false, this._syncRenderer(), this._syncHeightManifold();
  }
  set intersectsWorldUpAtLocation(e27) {
    if (null == e27) return void (this.intersectsLine = null);
    const t26 = this.view.renderCoordsHelper.worldUpAtPosition(e27, _7);
    this.intersectsLine = h6(e27, t26), this.intersectsLineInfinite = true;
  }
  get intersectsLine() {
    return this._intersectsLineEnabled ? this._intersectsLine : null;
  }
  set intersectsLine(e27) {
    null != e27 ? (p6(e27, this._intersectsLine), this._intersectsLineEnabled = true) : this._intersectsLineEnabled = false, this._syncIntersectsLine(), this._syncRenderer();
  }
  get intersectsLineInfinite() {
    return this._intersectsLineInfinite;
  }
  set intersectsLineInfinite(e27) {
    this._intersectsLineInfinite = e27, this._syncIntersectsLineInfinite();
  }
  get lineVerticalPlaneSegment() {
    return this._lineVerticalPlaneSegment;
  }
  set lineVerticalPlaneSegment(e27) {
    this._lineVerticalPlaneSegment = null != e27 ? p6(e27) : null, this._syncLineVerticalPlane(), this._syncRenderer();
  }
  get pathVerticalPlane() {
    return this._pathVerticalPlaneBuffers;
  }
  set pathVerticalPlane(e27) {
    this._pathVerticalPlaneBuffers = e27, this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance(), this._syncRenderer();
  }
  get pointDistanceLine() {
    return this._pointDistanceLine;
  }
  set pointDistanceLine(e27) {
    this._pointDistanceLine = null != e27 ? { origin: t3(e27.origin), target: e27.target ? t3(e27.target) : null } : null, this._syncPointDistance(), this._syncRenderer();
  }
  _syncRenderer() {
    this.attached && this.visible && (this._intersectsLineEnabled || this._heightManifoldEnabled || null != this._pointDistanceLine || null != this._pathVerticalPlaneBuffers) ? this._ensureRenderer() : this._disposeRenderer();
  }
  _ensureRenderer() {
    null == this._renderer && (this._renderer = new j7({ view: this.view, contrastControlEnabled: true, isDecoration: this.isDecoration }), this._syncStyle(), this._syncHeightManifold(), this._syncIntersectsLine(), this._syncIntersectsLineInfinite(), this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance(), this._syncAngleCutoff());
  }
  _syncStyle() {
    null != this._renderer && this._renderer.setParameters(this._style);
  }
  _syncAngleCutoff() {
    var _a;
    (_a = this._renderer) == null ? void 0 : _a.setParameters({ angleCutoff: this._angleCutoff });
  }
  _syncHeightManifold() {
    null != this._renderer && (this._renderer.heightManifoldEnabled = this._heightManifoldEnabled && this.visible, this._heightManifoldEnabled && (this._renderer.heightManifoldTarget = this._heightManifoldTarget));
  }
  _syncIntersectsLine() {
    null != this._renderer && (this._renderer.intersectsLineEnabled = this._intersectsLineEnabled && this.visible, this._intersectsLineEnabled && (this._renderer.intersectsLineSegment = this._intersectsLine));
  }
  _syncIntersectsLineInfinite() {
    null != this._renderer && (this._renderer.intersectsLineInfinite = this._intersectsLineInfinite);
  }
  _syncPathVerticalPlane() {
    null != this._renderer && (this._renderer.pathVerticalPlaneEnabled = null != this._pathVerticalPlaneBuffers && this.visible, null != this._pathVerticalPlaneBuffers && (this._renderer.pathVerticalPlaneBuffers = this._pathVerticalPlaneBuffers));
  }
  _syncLineVerticalPlane() {
    null != this._renderer && (this._renderer.lineVerticalPlaneEnabled = null != this._lineVerticalPlaneSegment && this.visible, null != this._lineVerticalPlaneSegment && (this._renderer.lineVerticalPlaneSegment = this._lineVerticalPlaneSegment));
  }
  _syncPointDistance() {
    if (null == this._renderer) return;
    const e27 = this._pointDistanceLine, t26 = null != e27;
    this._renderer.pointDistanceEnabled = t26 && null != e27.target && this.visible, t26 && (this._renderer.pointDistanceOrigin = e27.origin, null != e27.target && (this._renderer.pointDistanceTarget = e27.target));
  }
  _disposeRenderer() {
    null != this._renderer && this.view._stage && (this._renderer.destroy(), this._renderer = null);
  }
};
var _7 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/ExtendedLineVisualElement.js
var G5 = class extends t17 {
  constructor(e27) {
    super(e27), this._ray = b5(), this._isWorldDown = false, this._start = n3(), this._end = r6(1, 0, 0), this._width = 1, this._color = r8(1, 0, 1, 1), this._polygonOffset = false, this._writeDepthEnabled = true, this._innerWidth = 0, this._innerColor = r8(1, 1, 1, 1), this._stipplePattern = null, this._stippleOffColor = null, this._stipplePreferContinuous = true, this._falloff = 0, this._extensionType = M6.LINE, this._laserlineStyle = null, this._laserlineEnabled = false, this._renderOccluded = p8.OccludeAndTransparent, this._fadedExtensions = L2, this._laserline = new c15({ view: this.view, isDecoration: e27.isDecoration }), this.applyProperties(e27);
  }
  destroy() {
    this._laserline.destroy(), super.destroy();
  }
  createObject3DResourceFactory(e27) {
    return { view: e27, createResources: (e28) => this._createObject3DResources(e28), destroyResources: P8, recreateGeometry: (e28, t26) => this._recreateObject3DGeometry(e28, t26), cameraChanged: () => this._updateGeometry() };
  }
  createDrapedResourceFactory(e27) {
    return { view: e27, createResources: () => this._createDrapedResources(), destroyResources: P8, recreateGeometry: (e28) => this._recreateDrapedGeometry(e28) };
  }
  updateVisibility(e27) {
    super.updateVisibility(e27), this._laserline.visible = e27;
  }
  onAttachedChange() {
    this._laserline.attached = this._laserlineAttached;
  }
  setStartEndFromWorldDownAtLocation(r25) {
    this._isWorldDown = true, s5(this._start, r25), this.view.renderCoordsHelper.worldUpAtPosition(r25, this._end), c2(this._end, r25, this._end), S3(this._start, this._end, this._ray), this._updateGeometry();
  }
  get start() {
    return this._start;
  }
  set start(t26) {
    this._isWorldDown = false, H(this._start, t26) || (s5(this._start, t26), S3(this._start, this._end, this._ray), this._updateGeometry());
  }
  get end() {
    return this._end;
  }
  set end(t26) {
    this._isWorldDown = false, H(this._end, t26) || (s5(this._end, t26), S3(this._start, this._end, this._ray), this._updateGeometry());
  }
  get width() {
    return this._width;
  }
  set width(e27) {
    e27 !== this._width && (this._width = e27, this._updateMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e27) {
    E(e27, this._color) || (a6(this._color, e27), this._updateMaterial());
  }
  get polygonOffset() {
    return this._polygonOffset;
  }
  set polygonOffset(e27) {
    e27 !== this._polygonOffset && (this._polygonOffset = e27, this._updateMaterial());
  }
  get writeDepthEnabled() {
    return this._writeDepthEnabled;
  }
  set writeDepthEnabled(e27) {
    this._writeDepthEnabled !== e27 && (this._writeDepthEnabled = e27, this._updateMaterial());
  }
  get innerWidth() {
    return this._innerWidth;
  }
  set innerWidth(e27) {
    e27 !== this._innerWidth && (this._innerWidth = e27, this._updateMaterial());
  }
  get innerColor() {
    return this._innerColor;
  }
  set innerColor(e27) {
    E(e27, this._innerColor) || (a6(this._innerColor, e27), this._updateMaterial());
  }
  get stipplePattern() {
    return this._stipplePattern;
  }
  set stipplePattern(e27) {
    const t26 = null != e27 != (null != this._stipplePattern);
    this._stipplePattern = e27, t26 ? this.recreate() : this._updateMaterial();
  }
  get stippleOffColor() {
    return this._stippleOffColor;
  }
  set stippleOffColor(e27) {
    null != e27 && null != this._stippleOffColor && E(e27, this._stippleOffColor) || (this._stippleOffColor = null != e27 ? t4(e27) : null, this._updateMaterial());
  }
  get stipplePreferContinuous() {
    return this._stipplePreferContinuous;
  }
  set stipplePreferContinuous(e27) {
    e27 !== this._stipplePreferContinuous && (this._stipplePreferContinuous = e27, this._updateMaterial());
  }
  get falloff() {
    return this._falloff;
  }
  set falloff(e27) {
    e27 !== this._falloff && (this._falloff = e27, this._updateMaterial());
  }
  get extensionType() {
    return this._extensionType;
  }
  set extensionType(e27) {
    e27 !== this._extensionType && (this._extensionType = e27, this.recreateGeometry());
  }
  get _laserlineAttached() {
    return this._laserlineEnabled && null != this._laserlineStyle && this.attached && !this.isDraped;
  }
  get laserlineStyle() {
    return this._laserlineStyle;
  }
  set laserlineStyle(e27) {
    this._laserlineStyle = e27, this._laserline.attached = this._laserlineAttached, null != e27 && (this._laserline.style = e27);
  }
  get laserlineEnabled() {
    return this._laserlineEnabled;
  }
  set laserlineEnabled(e27) {
    this._laserlineEnabled !== e27 && (this._laserlineEnabled = e27, this._laserline.attached = this._laserlineAttached);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e27) {
    e27 !== this._renderOccluded && (this._renderOccluded = e27, this._updateMaterial());
  }
  get _normalizedRenderOccluded() {
    return this.isDraped && this._renderOccluded === p8.OccludeAndTransparentStencil ? p8.OccludeAndTransparent : this._renderOccluded;
  }
  get fadedExtensions() {
    return this._fadedExtensions;
  }
  set fadedExtensions(e27) {
    this._fadedExtensions = e27 ?? L2, this.recreateGeometry();
  }
  _updateMaterial() {
    var _a, _b;
    const { materialParameters: e27 } = this;
    (_a = this.object3dResources.resources) == null ? void 0 : _a.material.setParameters(e27), (_b = this.drapedResources.resources) == null ? void 0 : _b.material.setParameters(e27);
  }
  get materialParameters() {
    return { width: this._width, color: this._color, stippleOffColor: this._stippleOffColor, stipplePattern: this._stipplePattern, stipplePreferContinuous: this._stipplePreferContinuous, innerWidth: this._innerWidth, innerColor: this._innerColor, falloff: this._falloff, hasPolygonOffset: this._polygonOffset, renderOccluded: this._normalizedRenderOccluded, isDecoration: this.isDecoration, writeDepth: this._writeDepthEnabled };
  }
  _createObject3DResources(e27) {
    const t26 = new W3(this.materialParameters), r25 = new Array();
    return this._createObject3DGeometry(t26, e27, r25), { material: t26, geometries: r25, forEach: (e28) => {
      e28(t26), r25.forEach(e28);
    } };
  }
  _recreateObject3DGeometry(e27, t26) {
    e27.geometries.length = 0, this._createObject3DGeometry(e27.material, t26, e27.geometries);
  }
  _createObject3DGeometry(e27, t26, r25) {
    const i23 = this._createGeometry(e27);
    r25.push(i23), t26.addGeometry(i23), this._updateVerticesObject3D(t26);
  }
  _createDrapedResources() {
    const e27 = new W3(this.materialParameters);
    return { material: e27, geometries: [this._createDrapedGeometry(e27)] };
  }
  _recreateDrapedGeometry(e27) {
    e27.geometries = [this._createDrapedGeometry(e27.material)];
  }
  _createDrapedGeometry(e27) {
    const t26 = this._createGeometry(e27);
    return this._updateVerticesDraped(t26), new g9(t26);
  }
  _createGeometry(e27) {
    const t26 = this.extensionType === M6.FADED, r25 = t26 ? [n3(), n3(), n3(), n3()] : [n3(), n3()];
    return wt(e27, r25, null, t26 ? [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0] : null);
  }
  _updateGeometry() {
    if (this.isDraped) this.drapedResources.recreateGeometry();
    else {
      const e27 = this.object3dResources.object;
      e27 && this._updateVerticesObject3D(e27);
    }
  }
  _updateVerticesObject3D(e27) {
    const t26 = this._lineSegment;
    this._updateVertexAttributesObject3D(e27, t26), this._laserline.intersectsLine = t26;
  }
  _updateVerticesDraped(e27) {
    this._updateVertexAttributesDraped(e27, this._lineSegment);
  }
  get _lineSegment() {
    return this._extensionType === M6.FADED ? this._updateLineSegmentFinite(V7) : this._updateLineSegmentInfinite(this._extensionType, V7);
  }
  _updateLineSegmentFinite(e27) {
    return b4(this._start, this._end, e27);
  }
  _updateLineSegmentInfinite(e27, t26) {
    const r25 = this.view.state.camera;
    switch (y5(this._ray, x8), e27) {
      case M6.LINE:
        x8.c0 = -Number.MAX_VALUE;
        break;
      case M6.RAY:
      case M6.GROUND_RAY: {
        const e28 = this._ray.origin, t27 = this.view.elevationProvider.getElevation(e28[0], e28[1], e28[2], this.view.renderCoordsHelper.spatialReference, "ground") ?? 0, r26 = this.view.renderCoordsHelper.getAltitude(e28);
        this._isWorldDown && r26 < t27 && y3(x8.ray.direction, x8.ray.direction), this._extensionType === M6.GROUND_RAY && null != t27 && (x8.c1 = Math.abs(r26 - t27));
        break;
      }
    }
    if (!m2(r25.frustum, x8)) return this._updateLineSegmentFinite(t26);
    const s13 = p7(x8, v8), n29 = g5(x8, S7);
    return b4(s13, n29, t26);
  }
  _updateVertexAttributesObject3D(e27, t26) {
    var _a;
    const r25 = (_a = e27.geometries[0].getMutableAttribute(e4.POSITION)) == null ? void 0 : _a.data;
    if (!r25) return;
    let i23 = 0;
    for (const s13 of this._lineVertices(t26)) r25[i23++] = s13[0], r25[i23++] = s13[1], r25[i23++] = s13[2];
    e27.geometryVertexAttributeUpdated(e27.geometries[0], e4.POSITION);
  }
  _updateVertexAttributesDraped(e27, t26) {
    var _a;
    const r25 = (_a = e27.getMutableAttribute(e4.POSITION)) == null ? void 0 : _a.data;
    if (!r25) return;
    let i23 = 0;
    for (const s13 of this._lineVertices(t26)) r25[i23++] = s13[0], r25[i23++] = s13[1], r25[i23++] = te;
    e27.invalidateBoundingInfo();
  }
  *_lineVertices(e27) {
    this.extensionType === M6.FADED ? (yield l7(e27, -this.fadedExtensions.start, v8), yield l7(e27, 0, v8), yield l7(e27, 1, v8), yield l7(e27, 1 + this.fadedExtensions.end, v8)) : (yield l7(e27, 0, v8), yield l7(e27, 1, v8));
  }
};
function P8(e27) {
  e27.geometries = [];
}
var x8 = a7();
var v8 = n3();
var S7 = n3();
var V7 = v5();
var M6;
!function(e27) {
  e27[e27.LINE = 0] = "LINE", e27[e27.RAY = 1] = "RAY", e27[e27.GROUND_RAY = 2] = "GROUND_RAY", e27[e27.FADED = 3] = "FADED";
}(M6 || (M6 = {}));
var T4 = 1 / 3;
var L2 = { start: T4, end: T4 };

// node_modules/@arcgis/core/views/3d/interactive/visualElements/ParallelLineVisualElement.js
var v9 = class extends t17 {
  constructor(e27) {
    super(e27), this._location = n3(), this._direction = r6(1, 0, 0), this._width = 1, this._offset = 1, this._length = 18, this._color = r8(1, 0, 1, 1), this._renderOccluded = p8.OccludeAndTransparent, this.applyProperties(e27);
  }
  createObject3DResourceFactory(e27) {
    return { view: e27, createResources: (e28) => this._createObject3DResources(e28), destroyResources: A8, recreateGeometry: (e28, t26) => this._recreateObject3DGeometry(e28, t26), cameraChanged: () => this._updateGeometry() };
  }
  createDrapedResourceFactory(e27) {
    return { view: e27, createResources: () => this._createDrapedResources(), destroyResources: M7, recreateGeometry: (e28) => this._recreateDrapedGeometry(e28) };
  }
  get location() {
    return this._location;
  }
  set location(e27) {
    H(this._location, e27) || (s5(this._location, e27), this._updateGeometry());
  }
  get direction() {
    return this._direction;
  }
  set direction(e27) {
    H(this._direction, e27) || (s5(this._direction, e27), this._updateGeometry());
  }
  setDirectionFromPoints(e27, t26) {
    A2(this._direction, c2(this._direction, t26, e27)), this._updateGeometry();
  }
  get width() {
    return this._width;
  }
  set width(e27) {
    e27 !== this._width && (this._width = e27, this._updateMaterial());
  }
  get offset() {
    return this._offset;
  }
  set offset(e27) {
    e27 !== this._offset && (this._offset = e27, this._updateGeometry());
  }
  get length() {
    return this._length;
  }
  set length(e27) {
    e27 !== this._length && (this._length = e27, this._updateGeometry());
  }
  get color() {
    return this._color;
  }
  set color(e27) {
    E(e27, this._color) || (a6(this._color, e27), this._updateMaterial());
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e27) {
    e27 !== this._renderOccluded && (this._renderOccluded = e27, this._updateMaterial());
  }
  _createObject3DResources(e27) {
    const t26 = new W3(this.materialParameters), r25 = new Array();
    return this._createObject3DGeometry(t26, e27, r25), { material: t26, geometries: r25, forEach: (e28) => {
      e28(t26), r25.forEach(e28);
    } };
  }
  _recreateObject3DGeometry(e27, t26) {
    e27.geometries.length = 0, this._createObject3DGeometry(e27.material, t26, e27.geometries);
  }
  _createObject3DGeometry(e27, t26, r25) {
    const [i23, s13] = P9(e27);
    t26.addGeometry(i23), t26.addGeometry(s13), r25.push(i23), r25.push(s13), this._updateVerticesObject3D(t26);
  }
  _createDrapedResources() {
    const t26 = new W3(this.materialParameters), r25 = d2(() => this.view.state.contentPixelRatio, () => this.drapedResources.recreateGeometry());
    return { material: t26, geometries: this._createDrapedGeometry(t26), pixelRatioHandle: r25 };
  }
  _recreateDrapedGeometry(e27) {
    e27.geometries = this._createDrapedGeometry(e27.material);
  }
  _createDrapedGeometry(e27) {
    const t26 = P9(e27);
    return this._updateVerticesDraped(t26), t26.map((e28) => new g9(e28));
  }
  _updateMaterial() {
    var _a, _b;
    const { materialParameters: e27 } = this;
    (_a = this.object3dResources.resources) == null ? void 0 : _a.material.setParameters(e27), (_b = this.drapedResources.resources) == null ? void 0 : _b.material.setParameters(e27);
  }
  get materialParameters() {
    return { width: this._width, color: this._color, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateGeometry() {
    if (this.isDraped) this.drapedResources.recreateGeometry();
    else {
      const e27 = this.object3dResources.object;
      e27 && this._updateVerticesObject3D(e27);
    }
  }
  _updateVerticesObject3D(e27) {
    const t26 = this.view.state.camera;
    t26.projectToScreen(this.location, U2), u6(I4, this.location, this.direction), t26.projectToScreen(I4, E11), v3(E11, e3(E11, E11, U2)), this._updateVertexAttributesObject3D(t26, e27, 0, U2, E11, 1), this._updateVertexAttributesObject3D(t26, e27, 1, U2, E11, -1);
  }
  _updateVertexAttributesObject3D(e27, r25, i23, s13, o23, a39) {
    var _a;
    const c22 = r25.geometries[i23], n29 = (_a = c22.getMutableAttribute(e4.POSITION)) == null ? void 0 : _a.data;
    if (!n29) return;
    const { start: d18, end: h25 } = V8(o23, s13, a39, this.offset, this.width, this.length);
    e27.unprojectFromScreen(a5(d18), I4), n29[0] = I4[0], n29[1] = I4[1], n29[2] = I4[2], e27.unprojectFromScreen(a5(h25), I4), n29[3] = I4[0], n29[4] = I4[1], n29[5] = I4[2], r25.geometryVertexAttributeUpdated(c22, e4.POSITION);
  }
  _updateVerticesDraped(e27) {
    const { view: { basemapTerrain: { overlayManager: t26 }, state: { contentPixelRatio: r25 } } } = this, { location: i23, width: s13, length: o23, offset: a39 } = this, c22 = N6;
    c22.spatialReference = t26.renderer.spatialReference, c22.x = i23[0], c22.y = i23[1];
    const n29 = this.view.overlayPixelSizeInMapUnits(c22) * r25, d18 = s13 * n29, h25 = o23 * n29, l26 = a39 * n29;
    this._updateVertexAttributesDraped(e27[0], d18, h25, l26, -1), this._updateVertexAttributesDraped(e27[1], d18, h25, l26, 1);
  }
  _updateVertexAttributesDraped(e27, t26, r25, i23, s13) {
    var _a;
    const o23 = (_a = e27.getMutableAttribute(e4.POSITION)) == null ? void 0 : _a.data;
    if (!o23) return;
    const { location: a39, direction: c22 } = this, { start: n29, end: d18 } = V8(c22, a39, s13, i23, t26, r25);
    o23[0] = n29[0], o23[1] = n29[1], o23[2] = te, o23[3] = d18[0], o23[4] = d18[1], o23[5] = te, e27.invalidateBoundingInfo();
  }
};
function P9(e27) {
  return [wt(e27, [n3(), n3()]), wt(e27, [n3(), n3()])];
}
function V8(e27, t26, r25, i23, s13, n29) {
  const d18 = l4(S8, o5(S8, e27[1] * r25, e27[0] * -r25), i23 + s13 / 2), h25 = u5(T5, u5(T5, u5(T5, t26, l4(T5, e27, n29 / 2)), d18), d18);
  return { start: h25, end: u5(F8, h25, l4(F8, e27, -n29)) };
}
function A8(e27) {
  e27.geometries.length = 0;
}
function M7(e27) {
  e27.pixelRatioHandle.remove(), e27.geometries = [];
}
var I4 = n3();
var S8 = n5();
var T5 = n5();
var F8 = n5();
var U2 = f2();
var E11 = f2();
var N6 = e7(0, 0, void 0, null);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js
var a26 = class extends t16 {
  constructor(e27) {
    super(e27), this._resources = null, this._transform = e6();
  }
  get object() {
    return null != this._resources ? this._resources.object : null;
  }
  get transform() {
    return this._transform;
  }
  set transform(s13) {
    n4(this._transform, s13), null != this._resources && (this._resources.object.transformation = this._transform);
  }
  recreate() {
    this.attached && this.createResources();
  }
  recreateGeometry() {
    if (null == this._resources) return;
    const e27 = this._resources.object, s13 = this.view._stage;
    s13.removeMany(e27.geometries), e27.removeAllGeometries(), this.createGeometries(e27), e27.visible = this.visible, s13.addMany(e27.geometries);
  }
  createResources() {
    this.destroyResources();
    const e27 = this.view._stage;
    if (!e27) return;
    const s13 = new a17(e27, { pickable: false, updatePolicy: C3.SYNC }), r25 = new A5({ castShadow: false });
    r25.transformation = this._transform, this.createExternalResources(), this.createGeometries(r25), e27.addMany(r25.geometries), this.forEachExternalMaterial((s14) => e27.add(s14)), e27.add(r25), s13.add(r25), r25.visible = this.visible, this._resources = { layer: s13, object: r25 };
  }
  destroyResources() {
    const e27 = this.view._stage;
    null != this._resources && e27 && (e27.remove(this._resources.object), this._resources.layer.destroy(), this.forEachExternalMaterial((s13) => {
      e27.remove(s13);
    }), e27.removeMany(this._resources.object.geometries), this._resources.object.dispose(), this.destroyExternalResources(), this._resources = null);
  }
  updateVisibility(e27) {
    null != this._resources && (this._resources.object.visible = e27);
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/PointVisualElement.js
var S9 = class extends a26 {
  constructor(e27) {
    super(e27), this._material = null, this._texture = null, this._geometry = null, this._size = 3, this._color = r8(1, 0, 1, 1), this._pixelSnappingEnabled = true, this._primitive = "square", this._outlineSize = 1, this._outlineColor = r8(1, 1, 1, 1), this._elevationInfo = null, this.applyProperties(e27);
  }
  get geometry() {
    return this._geometry;
  }
  set geometry(e27) {
    this._geometry = e27, this.recreateGeometry();
  }
  get size() {
    return this._size;
  }
  set size(e27) {
    if (e27 !== this._size) {
      const t26 = this._preferredTextureSize;
      this._size = e27, t26 < this._preferredTextureSize ? this.recreate() : this._updateSizeAttribute();
    }
  }
  get color() {
    return this._color;
  }
  set color(e27) {
    E(e27, this._color) || (a6(this._color, e27), this._updateMaterial());
  }
  get pixelSnappingEnabled() {
    return this._pixelSnappingEnabled;
  }
  set pixelSnappingEnabled(e27) {
    this._pixelSnappingEnabled !== e27 && (this._pixelSnappingEnabled = e27, this._updateMaterial());
  }
  get primitive() {
    return this._primitive;
  }
  set primitive(e27) {
    this._primitive !== e27 && (this._primitive = e27, this.recreate());
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e27) {
    e27 !== this._outlineSize && (this._outlineSize = e27, this._updateMaterial());
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e27) {
    E(e27, this._outlineColor) || (a6(this._outlineColor, e27), this._updateMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e27) {
    this._elevationInfo = e27, this.recreateGeometry();
  }
  _updateMaterial() {
    var _a;
    (_a = this._material) == null ? void 0 : _a.setParameters(this._materialParameters);
  }
  _updateSizeAttribute() {
    const e27 = this.object;
    if (null == e27) return;
    const t26 = e27.geometries[0];
    if (null == t26) return;
    const i23 = t26.getMutableAttribute(e4.SIZE).data, r25 = this._geometrySize;
    i23[0] = r25, i23[1] = r25, e27.geometryVertexAttributeUpdated(e27.geometries[0], e4.SIZE);
  }
  get _materialParameters() {
    var _a;
    return { color: this._color, textureIsSignedDistanceField: true, sampleSignedDistanceFieldTexelCenter: s7(this._primitive), distanceFieldBoundingBox: c7, occlusionTest: false, outlineColor: this._outlineColor, outlineSize: this._outlineSize, textureId: (_a = this._texture) == null ? void 0 : _a.id, polygonOffset: false, shaderPolygonOffset: 0, drawAsLabel: true, depthEnabled: false, pixelSnappingEnabled: this.pixelSnappingEnabled, isDecoration: this.isDecoration };
  }
  get _geometrySize() {
    return this._size / a10;
  }
  createExternalResources() {
    this._texture = u8(this._primitive, this._preferredTextureSize), this._material = new ae(this._materialParameters, this.view.state.viewingMode === l6.Global);
    const e27 = this.view._stage;
    this._texture.load(e27.renderView.renderingContext), e27.add(this._texture);
  }
  destroyExternalResources() {
    if (this._texture) {
      this.view._stage.remove(this._texture), this._texture.dispose(), this._texture = null;
    }
    this._material = null;
  }
  createGeometries(e27) {
    const t26 = this._createRenderGeometry();
    null != t26 && e27.addGeometry(t26);
  }
  forEachExternalMaterial(e27) {
    this._material && e27(this._material);
  }
  get _preferredTextureSize() {
    return r(2 * this._geometrySize, 16, 128);
  }
  calculateMapBounds(e27) {
    var _a;
    const t26 = (_a = this.object) == null ? void 0 : _a.geometries[0];
    if (!t26) return false;
    const i23 = t26.attributes.get(e4.POSITION).data;
    return n8(i23, this.view.renderCoordsHelper.spatialReference, b11, this.view.spatialReference), s4(e27, b11), true;
  }
  _createRenderGeometry() {
    const { geometry: e27, _material: i23 } = this;
    if (null == e27 || null == i23) return null;
    const { renderCoordsHelper: r25, elevationProvider: s13 } = this.view, o23 = f14(e27, s13, o15.fromElevationInfo(this.elevationInfo), r25), a39 = o6(c4.get(), e27.x, e27.y, o23), h25 = c4.get();
    n8(a39, e27.spatialReference, h25, r25.spatialReference);
    const u24 = this._geometrySize;
    return lt(i23, { position: h25, size: [u24, u24], centerOffsetAndDistance: [0, 0, 0, 1] });
  }
};
var b11 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js
var D3 = class extends t17 {
  constructor(e27) {
    super(e27), this._maxSize = 0, this._position = n3(), this._up = n3(), this._right = n3(), this._renderOccluded = p8.OccludeAndTransparent, this._color = r8(1, 0, 0, 1), this._outlineColor = r8(0, 0, 0, 1), this._outlineSize = 0, this._size = 32, this._outlineRenderOccluded = p8.Opaque, this.applyProperties(e27);
  }
  createObject3DResourceFactory(e27) {
    return { view: e27, createResources: (e28) => this._createObject3DResources(e28), destroyResources: () => {
    }, cameraChanged: () => this._updateTransformObject3D() };
  }
  createDrapedResourceFactory(e27) {
    return { view: e27, createResources: () => this._createDrapedResources(), destroyResources: P10 };
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e27) {
    e27 !== this._renderOccluded && (this._renderOccluded = e27, this._updateQuadMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e27) {
    a6(this._color, e27), this._updateQuadMaterial();
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e27) {
    a6(this._outlineColor, e27), this._updateOutlineMaterial();
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e27) {
    const t26 = 0 === this._outlineSize != (0 === e27);
    this._outlineSize = e27, t26 ? this.recreateGeometry() : this._updateOutlineMaterial();
  }
  get size() {
    return this._size;
  }
  set size(e27) {
    e27 !== this._size && (this._size = e27, this._updateTransform());
  }
  get outlineRenderOccluded() {
    return this._outlineRenderOccluded;
  }
  set outlineRenderOccluded(e27) {
    this._outlineRenderOccluded = e27, this._updateOutlineMaterial();
  }
  set geometry({ previous: e27, center: t26, next: r25 }) {
    this._maxSize = Math.min(p5(t26, e27), p5(t26, r25)) / 3, A2(this._up, c2(this._up, e27, t26)), A2(this._right, c2(this._right, r25, t26)), s5(this._position, t26), this.recreateGeometry();
  }
  _createObject3DResources(e27) {
    const t26 = new A6(this._quadMaterialParameters), r25 = 0 === this._outlineSize ? void 0 : new W3(this._outlineMaterialParameters);
    return this._createObject3DGeometries(e27, t26, r25), { quadMaterial: t26, outlineMaterial: r25, forEach: (e28) => {
      e28(t26), r25 && e28(r25);
    } };
  }
  _createObject3DGeometries(e27, t26, r25) {
    if (H(this._up, _) && H(this._right, _)) return;
    const i23 = this._createGeometries(t26, r25);
    for (const s13 of i23) e27.addGeometry(s13);
    this._updateTransformObject3D(e27);
  }
  _createDrapedResources() {
    const t26 = new A6(this._quadMaterialParameters), r25 = 0 === this._outlineSize ? void 0 : new W3(this._outlineMaterialParameters), i23 = this._createGeometries(t26, r25).map((e27) => new g9(e27));
    this._setTransformDraped(i23);
    return { quadMaterial: t26, outlineMaterial: r25, geometries: i23, pixelRatioHandle: d2(() => this.view.state.contentPixelRatio, () => this.drapedResources.recreateGeometry()) };
  }
  _createGeometries(e27, t26) {
    const { up: r25, right: i23, corner: s13 } = this._getVertices(), o23 = v10(r25, i23, s13, e27);
    if (!t26) return [o23];
    return [o23, wt(t26, [r25, s13, i23])];
  }
  _getVertices() {
    let e27 = this._up, t26 = this._right;
    const r25 = u6(c4.get(), e27, t26);
    return this.isDraped && (e27 = s5(c4.get(), e27), t26 = s5(c4.get(), t26), e27[2] = 0, t26[2] = 0, r25[2] = 0), { up: e27, right: t26, corner: r25 };
  }
  _updateTransform() {
    this.isDraped ? this.drapedResources.recreateGeometry() : this._updateTransformObject3D();
  }
  _updateTransformObject3D(e27 = this.object3dResources.object) {
    if (!e27) return;
    const i23 = this.view.state.camera, s13 = this._size * i23.computeScreenPixelSizeAt(this._position), o23 = Math.min(this._maxSize, s13);
    q4(x9, this._position), f3(x9, x9, [o23, o23, o23]), e27.transformation = x9;
  }
  _setTransformDraped(e27) {
    if (0 === e27.length) return;
    const { view: { basemapTerrain: { overlayManager: i23 }, state: { contentPixelRatio: s13 } } } = this, { _position: o23, _size: a39 } = this, c22 = s5(c4.get(), o23);
    c22[2] = te;
    const l26 = S10;
    l26.spatialReference = i23.renderer.spatialReference, l26.x = c22[0], l26.y = c22[1];
    const u24 = a39 * (this.view.overlayPixelSizeInMapUnits(l26) * s13), d18 = Math.min(this._maxSize, u24);
    q4(x9, c22), f3(x9, x9, [d18, d18, 1]);
    for (const t26 of e27) t26.transformation = x9;
  }
  get _quadMaterialParameters() {
    return { color: this._color, forceTransparentMode: true, writeDepth: false, polygonOffset: true, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateQuadMaterial() {
    var _a, _b;
    (_a = this.object3dResources.resources) == null ? void 0 : _a.quadMaterial.setParameters(this._quadMaterialParameters), (_b = this.drapedResources.resources) == null ? void 0 : _b.quadMaterial.setParameters(this._quadMaterialParameters);
  }
  get _outlineMaterialParameters() {
    return { color: this._outlineColor, width: this._outlineSize, renderOccluded: this._outlineRenderOccluded, isDecoration: this.isDecoration };
  }
  _updateOutlineMaterial() {
    var _a, _b, _c, _d;
    (_b = (_a = this.object3dResources.resources) == null ? void 0 : _a.outlineMaterial) == null ? void 0 : _b.setParameters(this._outlineMaterialParameters), (_d = (_c = this.drapedResources.resources) == null ? void 0 : _c.outlineMaterial) == null ? void 0 : _d.setParameters(this._outlineMaterialParameters);
  }
};
function P10(e27) {
  e27.pixelRatioHandle.remove(), e27.geometries = [];
}
function v10(e27, t26, r25, i23) {
  return new f9(i23, [[e4.POSITION, new t10([0, 0, 0, ...t26, ...e27, ...r25], [0, 1, 2, 1, 2, 3], 3, true)]]);
}
var x9 = e6();
var S10 = e7(0, 0, void 0, null);

// node_modules/@arcgis/core/views/3d/interactive/SnappingVisualizer3D.js
var R8 = class extends r14 {
  sortUniqueHints(e27) {
    return e27.sort((e28, i23) => (i23 instanceof n12 ? i23.length : 0) - (e28 instanceof n12 ? e28.length : 0));
  }
  visualizeIntersectionPoint(e27, i23) {
    const { spatialReference: t26, view: r25 } = i23, o23 = D4(i23);
    return i(new S9({ view: r25, primitive: "circle", geometry: T2(e27.intersectionPoint, t26), elevationInfo: e27.isDraped ? z : j4, size: 20, outlineSize: 2, color: o23.intersectionPointColor, outlineColor: o23.intersectionPointOutlineColor, pixelSnappingEnabled: false, isDecoration: true, attached: true }));
  }
  visualizePoint(e27, i23) {
    const { view: t26, spatialReference: r25 } = i23, o23 = D4(i23), a39 = x10(e27.point, e27.domain, i23);
    return i(new S9({ view: t26, primitive: "circle", geometry: T2(a39, r25), elevationInfo: A9(e27), size: 20, outlineSize: 2, color: o23.pointColor, outlineColor: o23.pointOutlineColor, pixelSnappingEnabled: false, isDecoration: true, attached: true }));
  }
  visualizeLine(e27, i23) {
    const { view: t26, spatialReference: r25 } = i23, o23 = D4(i23), a39 = x10(e27.lineStart, e27.domain, i23), l26 = x10(e27.lineEnd, e27.domain, i23);
    return i(H5(e27.type, a39, l26, r25, A9(e27), t26, o23, e27.isDraped, e27.fadeLeft, e27.fadeRight));
  }
  visualizeParallelSign(e27, i23) {
    const { view: r25, spatialReference: o23 } = i23, a39 = D4(i23), { isDraped: l26 } = e27, s13 = A9(e27), p19 = x10(e27.lineStart, e27.domain, i23), c22 = x10(e27.lineEnd, e27.domain, i23), m15 = z6(p19, o23, s13, r25, l26), u24 = z6(c22, o23, s13, r25, l26), v16 = I(u24, m15, u24, 0.5), h25 = new v9({ view: r25, attached: false, offset: p11.parallelLineHintOffset, length: p11.parallelLineHintLength, width: p11.parallelLineHintWidth, color: a39.parallelSignColor, location: v16, renderOccluded: l26 ? p8.OccludeAndTransparent : p8.Opaque, isDraped: l26, renderGroup: a16.SnappingHint, isDecoration: true });
    return h25.setDirectionFromPoints(m15, v16), h25.attached = true, i(h25);
  }
  visualizeRightAngleQuad(e27, i23) {
    const { view: t26, spatialReference: r25 } = i23, o23 = D4(i23), a39 = A9(e27), { isDraped: l26 } = e27, s13 = x10(e27.previousVertex, e27.domain, i23), p19 = x10(e27.centerVertex, e27.domain, i23), c22 = x10(e27.nextVertex, e27.domain, i23), d18 = z6(s13, r25, a39, t26, l26), m15 = z6(p19, r25, a39, t26, l26), v16 = z6(c22, r25, a39, t26, l26);
    return i(new D3({ view: t26, attached: true, color: l26 ? o23.rightAngleColorDraped : o23.rightAngleColor, renderOccluded: l26 ? p8.OccludeAndTransparent : p8.Transparent, outlineRenderOccluded: l26 ? p8.OccludeAndTransparent : p8.Opaque, outlineColor: o23.rightAngleOutlineColor, outlineSize: p11.rightAngleHintOutlineSize, size: p11.rightAngleHintSize, isDraped: l26, geometry: { previous: d18, center: m15, next: v16 }, renderGroup: a16.SnappingHint, isDecoration: true }));
  }
};
function D4(n29) {
  const { effectiveTheme: t26 } = n29.view, r25 = h.toUnitRGBA(t26.accentColor), o23 = [0, 0, 0, 0];
  return { intersectionPointColor: o23, intersectionPointOutlineColor: r25, pointColor: o23, pointOutlineColor: r25, lineColor: r25, lineOutlineColor: void 0, parallelSignColor: r25, rightAngleColor: r25, rightAngleColorDraped: h.toUnitRGBA(P4(t26.accentColor, 0.5)), rightAngleOutlineColor: r25 };
}
function x10(e27, i23, { selfSnappingZ: n29, view: t26, spatialReference: r25 }) {
  return i23 & E7.SELF && m4(e27) && null != n29 ? y9(e27, n29, t26, r25) : e27;
}
function A9(e27) {
  return e27.isDraped ? z : j4;
}
function H5(e27, i23, n29, t26, r25, o23, a39, l26 = false, s13 = true, d18 = true) {
  const m15 = z6(i23, t26, r25, o23, l26), u24 = z6(n29, t26, r25, o23, l26), v16 = new G5({ view: o23, extensionType: M6.FADED, start: m15, end: u24, isDraped: l26, color: a39.lineColor, renderOccluded: l26 ? p8.OccludeAndTransparent : p8.Opaque, renderGroup: a16.SnappingHint, isDecoration: true });
  switch (e27) {
    case h12.TARGET:
      v16.width = p11.lineHintWidthTarget, v16.fadedExtensions = { start: 0, end: p11.lineHintFadedExtensions };
      break;
    case h12.REFERENCE_EXTENSION:
      v16.width = p11.lineHintWidthReference, v16.fadedExtensions = { start: 0, end: 0 };
      break;
    case h12.REFERENCE:
      v16.width = p11.lineHintWidthReference, v16.fadedExtensions = { start: s13 ? p11.lineHintFadedExtensions : 0, end: d18 ? p11.lineHintFadedExtensions : 0 };
  }
  return v16.attached = true, v16;
}
function z6(e27, i23, n29, t26, a39) {
  const l26 = n3();
  if (a39) {
    const n30 = t26.basemapTerrain.overlayManager.renderer.spatialReference;
    n8(e27, i23, l26, n30);
  } else i11(e27, i23, n29, t26, l26);
  return l26;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/meshFastUpdateUtils.js
function a27(a39) {
  const t26 = a39.graphic;
  return t26 ? [d2(() => "visible" in a39 ? a39.visible : a39.displaying, (s13) => {
    s13 && t26.notifyMeshTransformChanged({ action: a19.EnableFastUpdates });
  }, { ...A }), e(() => t26.notifyMeshTransformChanged({ action: a19.DisableFastUpdates }))] : [];
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/settings.js
var d12 = 0.3;
function u17(o23, t26) {
  t26 && Object.assign(o23, t26);
}
var g11 = class {
  constructor(o23) {
    this.height = 90, this.coneHeight = 40, this.coneWidth = 23, this.width = 3, this.renderOccluded = p8.Opaque, this.color = o23.accent;
  }
};
var f16 = class {
  constructor({ colors: o23, ...t26 }) {
    this.size = 11, this.outlineSize = 1, this.collisionPadding = 9, this.color = o23.accent, this.outlineColor = o23.outline, this.renderOccluded = p8.Opaque, this.hoverOutlineColor = o23.selectedOutline, u17(this, t26);
  }
  applyColor(o23) {
    this._apply(this.color, o23);
  }
  applyOutline(o23) {
    this._apply(this.outlineColor, o23);
  }
  applyHoverOutline(o23) {
    this._apply(this.hoverOutlineColor, o23);
  }
  _apply(o23, t26) {
    t26.setParameters({ color: F3(o23), renderOccluded: this.renderOccluded });
  }
};
var w7 = class {
  constructor({ colors: o23, ...t26 }) {
    this.size = 40, this.height = 0.2, this.offset = 0.25, this.collisionPadding = 2, this.renderOccluded = p8.Transparent, this.minSquaredEdgeLength = 900, this.color = P4(o23.accent, 0.5), this.hoverColor = o23.accent, u17(this, t26);
  }
  applyColor(o23) {
    this._apply(this.color, o23);
  }
  applyHover(o23) {
    this._apply(this.hoverColor, o23);
  }
  _apply(o23, t26) {
    t26.setParameters({ color: F3(o23), renderOccluded: this.renderOccluded });
  }
};
var C4 = class {
  constructor(o23) {
    this.vertex = new f16({ colors: o23, color: o23.accent, outlineColor: o23.outline }), this.edge = new f16({ colors: o23, color: D(P4(o23.accent, 2 / 3), 0.5), outlineColor: P4(o23.outline, 0.5), size: 8, collisionPadding: 8 }), this.selected = new f16({ colors: o23, color: o23.selected, outlineColor: o23.outline }), this.edgeOffset = new w7({ colors: o23 });
  }
};
var m9 = class {
  constructor({ colors: o23, ...t26 }) {
    this.width = 1.5, this.stipplePattern = h13(3.3), this.falloff = 0, this.innerWidth = 1.5, this.renderOccluded = p8.OccludeAndTransparent, this.color = o23.selected, this.stippleOffColor = o23.outline, this.innerColor = o23.selected, u17(this, t26);
  }
  apply(o23) {
    o23.color = F3(this.color), o23.width = this.width, o23.stipplePattern = this.stipplePattern, o23.stippleOffColor = F3(this.stippleOffColor), o23.falloff = this.falloff, o23.innerWidth = this.innerWidth, o23.innerColor = F3(this.innerColor), o23.renderOccluded = this.renderOccluded;
  }
};
var O5 = class {
  constructor({ colors: o23, ...t26 }) {
    this.size = 4, this.outlineSize = 1, this.shape = "square", this.color = o23.selected, this.outlineColor = o23.outline, u17(this, t26);
  }
  apply(o23) {
    o23.color = F3(this.color), o23.size = this.size, o23.outlineSize = this.outlineSize, o23.outlineColor = F3(this.outlineColor), o23.primitive = this.shape;
  }
};
var y11 = class {
  constructor({ colors: o23, ...t26 }) {
    this.innerWidth = 1, this.glowWidth = 8, this.glowFalloff = 8, this.globalAlpha = d12, this.globalAlphaContrastBoost = 1.5, this.radius = 3, this.innerColor = o23.selected, this.glowColor = o23.accent, this.heightFillColor = o23.accent, u17(this, t26);
  }
  apply(o23, e27 = 1) {
    const l26 = { glowColor: h.toUnitRGB(this.glowColor), glowFalloff: this.glowFalloff, glowWidth: this.glowWidth, innerColor: h.toUnitRGB(this.innerColor), innerWidth: this.innerWidth, globalAlpha: this.globalAlpha * e27 * this.glowColor.a, globalAlphaContrastBoost: this.globalAlphaContrastBoost, intersectsLineRadius: this.radius };
    "style" in o23 ? o23.style = l26 : o23.laserlineStyle = l26;
  }
};
var A10 = class {
  constructor(o23) {
    this.outline = new m9({ colors: o23, color: o23.stippleOff, renderOccluded: p8.OccludeAndTransparentStencil, stippleOffColor: o23.stippleOn, innerWidth: 0 }), this.staged = new m9({ colors: o23, color: o23.stippleOn, renderOccluded: p8.OccludeAndTransparentStencil, innerColor: o23.stagedSolid, stippleOffColor: o23.stippleOff }), this.shadowStyle = new y11({ colors: o23, globalAlpha: d12, glowColor: o23.accent, glowFalloff: 8, glowWidth: 8, innerColor: o23.selected, innerWidth: 1 });
  }
};
var W4 = class {
  constructor(o23) {
    this.outline = new O5({ colors: o23, color: o23.selected, outlineColor: o23.outline, outlineSize: 1, shape: "circle", size: 4 }), this.shadowStyle = new y11({ colors: o23, globalAlpha: d12, glowColor: o23.accent, glowFalloff: 1.5, glowWidth: 6, innerColor: o23.selected, innerWidth: 1, radius: 2 });
  }
};
var b12 = class extends m9 {
  constructor({ colors: o23, ...t26 }) {
    super({ colors: o23 }), this.extensionType = M6.GROUND_RAY, u17(this, t26);
  }
};
var S11 = class {
  constructor(o23) {
    this.laserlineAlphaMultiplier = 1.5, this.heightPlaneAngleCutoff = 20, this.lineObjects = new A10(o23), this.pointObjects = new W4(o23), this.heightPlane = new y11({ colors: o23, globalAlpha: d12, glowColor: o23.accent, glowFalloff: 8, glowWidth: 8, innerColor: o23.selected, innerWidth: 1 }), this.heightBox = new y11({ colors: o23, globalAlpha: d12, glowColor: o23.accent, glowFalloff: 8, glowWidth: 8, innerColor: o23.selected, innerWidth: 0, heightFillColor: o23.accent }), this.zVerticalLine = new b12({ colors: o23, color: P4(o23.accent, 5 * d12 / 3), falloff: 2, innerColor: P4(o23.selected, 0), renderOccluded: p8.OccludeAndTransparent, stipplePattern: null, width: 5, extensionType: M6.GROUND_RAY });
  }
};
var j8 = class extends g {
  constructor(o23) {
    super(o23);
  }
  get colors() {
    const o23 = this.getTheme().accentColor, e27 = o23.a;
    return { accent: o23, contrast: E4(o23), selected: h.fromArray([255, 255, 255, e27]), selectedOutline: h.fromArray([255, 255, 255, e27]), staged: h.fromArray([12, 207, 255, e27]), stagedSolid: h.fromArray([12, 207, 255, 1]), outline: h.fromArray([0, 0, 0, 0.5 * e27]), stippleOn: h.fromArray([255, 255, 255, 1]), stippleOff: h.fromArray([0, 0, 0, 0.5]) };
  }
  get visualElements() {
    return new S11(this.colors);
  }
  get manipulators() {
    return new C4(this.colors);
  }
  get zManipulator() {
    return new g11(this.colors);
  }
};
r2([m()], j8.prototype, "colors", null), r2([m()], j8.prototype, "visualElements", null), r2([m()], j8.prototype, "manipulators", null), r2([m()], j8.prototype, "zManipulator", null), r2([m()], j8.prototype, "getTheme", void 0), j8 = r2([a2("esri.views.3d.interactive.editingTools.settings")], j8);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/OutlineVisualElement.js
var j9 = class extends t17 {
  constructor(t26) {
    super(t26), this._attachmentOrigin = e7(0, 0, 0, null), this._attachmentOriginDirty = true, this.events = new i3(), this._geometry = null, this._width = 1, this._color = r8(1, 0, 1, 1), this._innerWidth = 0, this._innerColor = r8(1, 1, 1, 1), this._stipplePattern = null, this._stippleOffColor = null, this._falloff = 0, this._elevationInfo = null, this._laserlineStyle = null, this._laserlineEnabled = false, this._renderOccluded = p8.OccludeAndTransparentStencil, this._attachmentOrigin.spatialReference = t26.view.spatialReference, this._laserline = new c15({ view: t26.view, isDecoration: t26.isDecoration }), this.applyProperties(t26), this.attached = t26.attached ?? true;
  }
  destroy() {
    this._laserline.destroy(), super.destroy();
  }
  createObject3DResourceFactory(e27) {
    return { view: e27, createResources: (e28) => this._createObject3DResources(e28), destroyResources: D5, recreateGeometry: (e28, t26) => {
      e28.geometries.length = 0, this._recreateGeometry(t26, e28.material, e28.geometries);
    } };
  }
  createDrapedResourceFactory(e27) {
    return { view: e27, createResources: () => this._createDrapedResources(), destroyResources: D5, recreateGeometry: (e28) => {
      e28.geometries = this._createRenderGeometriesDraped(e28.material), this._attachmentOriginChanged();
    } };
  }
  get _laserlineAttached() {
    return this.attached && this.visible && null != this._laserlineStyle && !this.isDraped && this.laserlineEnabled;
  }
  onAttachedChange(e27) {
    this._laserline.attached = this._laserlineAttached, e27 && this._attachmentOriginChanged();
  }
  get geometry() {
    return this._geometry;
  }
  set geometry(e27) {
    this._geometry = e27, this.recreateGeometry();
  }
  get width() {
    return this._width;
  }
  set width(e27) {
    e27 !== this._width && (this._width = e27, this._updateMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e27) {
    E(e27, this._color) || (a6(this._color, e27), this._updateMaterial());
  }
  get innerWidth() {
    return this._innerWidth;
  }
  set innerWidth(e27) {
    e27 !== this._innerWidth && (this._innerWidth = e27, this._updateMaterial());
  }
  get innerColor() {
    return this._innerColor;
  }
  set innerColor(e27) {
    E(e27, this._innerColor) || (a6(this._innerColor, e27), this._updateMaterial());
  }
  get stipplePattern() {
    return this._stipplePattern;
  }
  set stipplePattern(e27) {
    const t26 = null != e27 != (null != this._stipplePattern);
    this._stipplePattern = e27, t26 ? this.recreate() : this._updateMaterial();
  }
  get stippleOffColor() {
    return this._stippleOffColor;
  }
  set stippleOffColor(e27) {
    e27 && this._stippleOffColor && E(e27, this._stippleOffColor) || (this._stippleOffColor = e27 ? t4(e27) : null, this._updateMaterial());
  }
  get falloff() {
    return this._falloff;
  }
  set falloff(e27) {
    e27 !== this._falloff && (this._falloff = e27, this._updateMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e27) {
    this._elevationInfo = e27, this.recreateGeometry();
  }
  get laserlineStyle() {
    return this._laserlineStyle;
  }
  set laserlineStyle(e27) {
    this._laserlineStyle = e27, this._laserline.attached = this._laserlineAttached, null != e27 && (this._laserline.style = e27);
  }
  get laserlineEnabled() {
    return this._laserlineEnabled;
  }
  set laserlineEnabled(e27) {
    this._laserlineEnabled !== e27 && (this._laserlineEnabled = e27, this._laserline.attached = this._laserlineAttached);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e27) {
    e27 !== this._renderOccluded && (this._renderOccluded = e27, this._updateMaterial());
  }
  get attachmentOrigin() {
    var _a;
    if (!this._attachmentOriginDirty) return this._attachmentOrigin;
    const e27 = (_a = this.object3dResources.resources) == null ? void 0 : _a.geometries;
    if (!e27 || 0 === e27.length) return null;
    o6(E12, 0, 0, 0);
    let s13 = 0;
    for (const t26 of e27) t26.computeAttachmentOrigin(P11) && (u6(E12, E12, P11), s13++);
    return 0 === s13 ? null : (g4(E12, E12, 1 / s13), this.view.renderCoordsHelper.fromRenderCoords(E12, this._attachmentOrigin), this._attachmentOriginDirty = false, this._attachmentOrigin);
  }
  _updateMaterial() {
    var _a, _b;
    (_a = this.object3dResources.resources) == null ? void 0 : _a.material.setParameters(this._materialParameters), (_b = this.drapedResources.resources) == null ? void 0 : _b.material.setParameters(this._materialParameters);
  }
  get _isClosed() {
    return null != this.geometry && "polygon" === this.geometry.type;
  }
  get _materialParameters() {
    return { width: this._width, color: this._color, stippleOffColor: this._stippleOffColor, stipplePattern: this._stipplePattern, stipplePreferContinuous: false, isClosed: this._isClosed, falloff: this._falloff, innerColor: this._innerColor, innerWidth: this._innerWidth, join: "round", hasPolygonOffset: true, renderOccluded: this._normalizedRenderOccluded, isDecoration: this.isDecoration };
  }
  get _normalizedRenderOccluded() {
    return this.isDraped && this._renderOccluded === p8.OccludeAndTransparentStencil ? p8.OccludeAndTransparent : this._renderOccluded;
  }
  _recreateGeometry(e27, t26, r25) {
    this._createRenderGeometries(t26, r25);
    for (const i23 of r25) e27.addGeometry(i23);
    this._attachmentOriginChanged();
  }
  _attachmentOriginChanged() {
    this._attachmentOriginDirty = true, this.events.emit("attachment-origin-changed");
  }
  _createObject3DResources(e27) {
    const t26 = new W3(this._materialParameters), r25 = new Array();
    return this._recreateGeometry(e27, t26, r25), { material: t26, geometries: r25, forEach: (e28) => {
      e28(t26), r25.forEach(e28);
    } };
  }
  _createDrapedResources() {
    const e27 = new W3(this._materialParameters);
    return { material: e27, geometries: this._createRenderGeometriesDraped(e27) };
  }
  _createRenderGeometriesDraped(e27) {
    const { geometry: t26, view: r25 } = this, i23 = r25.basemapTerrain.spatialReference;
    if (null == t26 || null == i23) return [];
    return l12(t26, i23).lines.map(({ position: t27 }) => {
      const s13 = { overlayInfo: { spatialReference: i23, renderCoordsHelper: r25.renderCoordsHelper }, attributeData: { position: t27 }, removeDuplicateStartEnd: this._isClosed };
      return new g9(b8(e27, s13));
    });
  }
  calculateMapBounds(e27) {
    if (null == this.object3dResources.resources) return false;
    const t26 = this.view.renderCoordsHelper;
    for (const r25 of this.object3dResources.resources.geometries) {
      const i23 = r25.attributes.get(e4.POSITION), s13 = t2(i23.data.length);
      o3(i23.data, t26.spatialReference, 0, s13, this.view.spatialReference, 0), s4(e27, s13);
    }
    return true;
  }
  _createRenderGeometries(e27, t26) {
    const r25 = this.geometry;
    if (null == r25) return;
    const i23 = p14(r25, this.view.elevationProvider, this.view.renderCoordsHelper, o15.fromElevationInfo(this.elevationInfo ?? new h4({ mode: i10(r25, null) }))), s13 = new Array();
    for (const { position: n29, mapPositions: o23 } of i23.lines) {
      const r26 = { mapPositions: o23, attributeData: { position: n29 }, removeDuplicateStartEnd: this._isClosed };
      t26.push(b8(e27, r26)), s13.push(n29);
    }
    this._laserline.pathVerticalPlane = s13;
  }
};
function D5(e27) {
  e27.geometries = [];
}
var P11 = n3();
var E12 = n3();

// node_modules/@arcgis/core/views/3d/support/renderInfoUtils/point.js
function o18(o23, n29, r25, s13, i23) {
  const l26 = t2(3 * o23.length), p19 = t2(l26.length);
  o23.forEach((t26, e27) => {
    l26[3 * e27] = t26[0], l26[3 * e27 + 1] = t26[1], l26[3 * e27 + 2] = t26.length > 2 ? t26[2] : 0;
  });
  const c22 = u15(l26, n29, 0, p19, 0, l26, 0, l26.length / 3, r25, s13, i23), m15 = null != c22;
  return { numVertices: o23.length, position: l26, mapPositions: p19, projectionSuccess: m15, sampledElevation: c22 };
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js
var h16 = class extends l8 {
  constructor(e27, t26) {
    super(e27, t26, new t11(u16, () => import("./ShadedColorMaterial.glsl-PSJZJ4IT.js")), f17);
  }
  initializePipeline(r25) {
    const { oitPass: t26, output: l26, transparent: d18, cullFace: h25, shadingEnabled: f21 } = r25, S20 = t26 === o11.NONE, b20 = t26 === o11.FrontFace;
    return B({ blending: u7(l26) && d18 ? a9(t26) : null, culling: f5(h25), depthTest: { func: b20 ? O2.LESS : f21 ? O2.LEQUAL : O2.LESS }, depthWrite: l9(r25), drawBuffers: i8(t26, l26), colorWrite: g6, polygonOffset: S20 || b20 ? null : C2 });
  }
};
var f17 = /* @__PURE__ */ new Map([[e4.POSITION, 0], [e4.NORMAL, 1], [e4.OFFSET, 2]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechniqueConfiguration.js
var n17 = class extends a12 {
  constructor() {
    super(...arguments), this.cullFace = e8.None, this.transparent = false, this.writeDepth = true, this.screenSizeEnabled = true, this.shadingEnabled = true, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.textureCoordinateType = d6.None, this.emissionSource = d7.None, this.occlusionPass = false, this.objectAndLayerIdColorInstanced = false;
  }
  get discardInvisibleFragments() {
    return this.transparent;
  }
};
r2([i9({ count: e8.COUNT })], n17.prototype, "cullFace", void 0), r2([i9()], n17.prototype, "transparent", void 0), r2([i9()], n17.prototype, "writeDepth", void 0), r2([i9()], n17.prototype, "screenSizeEnabled", void 0), r2([i9()], n17.prototype, "shadingEnabled", void 0), r2([i9()], n17.prototype, "terrainDepthTest", void 0), r2([i9()], n17.prototype, "cullAboveTerrain", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js
var x11 = class extends n11 {
  constructor(e27) {
    super(e27, O6), this._configuration = new n17(), this.vertexAttributeLocations = f17, this.supportsEdges = true, this.produces = /* @__PURE__ */ new Map([[A3.OPAQUE_MATERIAL, (e28) => e28 === n9.Highlight || d5(e28) && !this.parameters.transparent], [A3.TRANSPARENT_MATERIAL, (e28) => d5(e28) && this.parameters.transparent && this.parameters.writeDepth], [A3.TRANSPARENT_MATERIAL_WITHOUT_DEPTH, (e28) => d5(e28) && this.parameters.transparent && !this.parameters.writeDepth]]);
  }
  getConfiguration(e27, t26) {
    return this._configuration.output = e27, this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.screenSizeEnabled = this.parameters.screenSizeEnabled, this._configuration.shadingEnabled = this.parameters.shadingEnabled, this._configuration.oitPass = t26.oitPass, this._configuration.terrainDepthTest = t26.terrainDepthTest && u7(e27), this._configuration.cullAboveTerrain = t26.cullAboveTerrain, this._configuration;
  }
  get visible() {
    return this.parameters.color[3] >= o13;
  }
  intersect(e27, s13, a39, c22, h25, l26) {
    if (this.parameters.screenSizeEnabled) {
      const s14 = e27.attributes.get(e4.OFFSET), p19 = { applyToVertex: (e28, o23, n29, c23) => {
        const h26 = o6(P12, s14.data[3 * c23], s14.data[3 * c23 + 1], s14.data[3 * c23 + 2]), l27 = o6(I5, e28, o23, n29);
        return g4(h26, h26, this.parameters.screenSizeScale * a39.camera.computeScreenPixelSizeAt(h26)), u6(l27, l27, h26), [l27[0], l27[1], l27[2]];
      }, applyToAabb: (e28) => {
        const t26 = p2(e28, P12);
        return G2(e28, this.parameters.screenSizeScale * a39.camera.computeScreenPixelSizeAt(t26));
      } };
      p9(e27, a39, c22, h25, p19, l26);
    } else p9(e27, a39, c22, h25, void 0, l26);
  }
  createGLMaterial(e27) {
    return new z7(e27);
  }
  createBufferWriter() {
    return new M8(this.parameters.screenSizeEnabled);
  }
};
var z7 = class extends e11 {
  beginSlot(e27) {
    return this.getTechnique(h16, e27);
  }
};
var O6 = class extends o10 {
  constructor() {
    super(...arguments), this.color = r8(1, 1, 1, 1), this.shadingTint = r8(0, 0, 0, 0.25), this.shadingDirection = A2(n3(), [0.5, -0.5, -0.5]), this.screenSizeScale = 14, this.forceTransparentMode = false, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = e8.None, this.screenSizeEnabled = false, this.shadingEnabled = true;
  }
  get transparent() {
    return this.color[3] < 1 || this.forceTransparentMode;
  }
};
var M8 = class {
  constructor(e27) {
    this.screenSizeEnabled = e27;
    const t26 = H2().vec3f(e4.POSITION).vec3f(e4.NORMAL);
    this.screenSizeEnabled && t26.vec3f(e4.OFFSET), this.vertexBufferLayout = t26;
  }
  elementCount(e27) {
    return e27.get(e4.POSITION).indices.length;
  }
  write(e27, t26, r25, i23, s13, a39) {
    if (E6(r25, i23, this.vertexBufferLayout, e27, t26, s13, a39), this.screenSizeEnabled) {
      if (!r25.has(e4.OFFSET)) throw new Error(`${e4.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);
      {
        const e28 = r25.get(e4.OFFSET);
        s6(3 === e28.size);
        const i24 = s13.getField(e4.OFFSET, i5);
        if (!i24) throw new Error("unable to acquire view for " + e4.OFFSET);
        b6(e28, t26, i24, a39);
      }
    }
  }
};
var P12 = n3();
var I5 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VerticesVisualElement.js
var d13 = class extends a26 {
  constructor(e27) {
    super(e27), this.view = null, this._renderOccluded = p8.OccludeAndTransparent, this._vertices = null, this._spatialReference = null, this._color = u4([1, 127 / 255, 0, 1]), this._size = 11, this._outlineColor = u4([0, 0, 0, 0.5]), this._outlineSize = 1, this._elevationInfo = null, this.applyProperties(e27);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e27) {
    e27 !== this._renderOccluded && (this._renderOccluded = e27, this._updateMaterial(), this._updateOutlineMaterial());
  }
  get vertices() {
    return this._vertices;
  }
  set vertices(e27) {
    this._vertices = e27, this.recreateGeometry();
  }
  get spatialReference() {
    return this._spatialReference;
  }
  set spatialReference(e27) {
    this._spatialReference = e27, this.recreateGeometry();
  }
  get color() {
    return this._color;
  }
  set color(e27) {
    E(e27, this._color) || (a6(this._color, e27), this._updateMaterial());
  }
  get size() {
    return this._size;
  }
  set size(e27) {
    e27 !== this._size && (this._size = e27, this._updateMaterial());
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e27) {
    E(e27, this._outlineColor) || (a6(this._outlineColor, e27), this._updateOutlineMaterial());
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e27) {
    e27 !== this._outlineSize && (this._outlineSize = e27, this._updateOutlineMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e27) {
    this._elevationInfo = e27, this.recreateGeometry();
  }
  get _vertexMaterialParameters() {
    return { color: this._color, screenSizeScale: this.size, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  get _vertexOutlineMaterialParameters() {
    return { color: this._outlineColor, screenSizeScale: this.size + 2 * this.outlineSize, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateMaterial() {
    this.attached && this._vertexMaterial.setParameters(this._vertexMaterialParameters);
  }
  _updateOutlineMaterial() {
    this.attached && this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters);
  }
  _createRenderGeometries() {
    const t26 = this.vertices;
    if (null == t26 || 0 === t26.length) return [];
    const r25 = 0.5, i23 = 0.5, s13 = o18(t26, this.spatialReference, this.view.elevationProvider, this.view.renderCoordsHelper, o15.fromElevationInfo(this.elevationInfo)), a39 = [], n29 = s13.numVertices, c22 = s13.position;
    for (let l26 = 0; l26 < n29; ++l26) {
      const t27 = o6(_8, c22[3 * l26], c22[3 * l26 + 1], c22[3 * l26 + 2]), s14 = m10(this._vertexMaterial, r25, t27), o23 = m10(this._vertexOutlineMaterial, i23, t27);
      a39.push({ vertexGeometry: s14, vertexOutlineGeometry: o23 });
    }
    return a39;
  }
  createGeometries(e27) {
    const t26 = this._createRenderGeometries();
    for (const { vertexGeometry: r25, vertexOutlineGeometry: i23 } of t26) e27.addGeometry(r25), e27.addGeometry(i23);
  }
  createExternalResources() {
    this._vertexMaterial = new x11({ ...this._vertexMaterialParameters, writeDepth: true, cullFace: e8.Back, screenSizeEnabled: true }), this._vertexOutlineMaterial = new x11({ ...this._vertexOutlineMaterialParameters, forceTransparentMode: true, writeDepth: true, cullFace: e8.Front, screenSizeEnabled: true, shadingEnabled: false });
  }
  destroyExternalResources() {
    this._vertexMaterial = null, this._vertexOutlineMaterial = null;
  }
  forEachExternalMaterial(e27) {
    e27(this._vertexMaterial), e27(this._vertexOutlineMaterial);
  }
};
var _8 = n3();
function m10(e27, t26, r25) {
  return ot(e27, t26, 16, 16, { offset: r25 });
}

// node_modules/@arcgis/core/views/3d/layers/graphics/GraphicState.js
var e19 = class extends i3.EventedAccessor {
  constructor(r25) {
    super(r25), this.tracking = false, this.displaying = false, this.error = null, this.isDraped = false;
  }
};
r2([m({ constructOnly: true })], e19.prototype, "graphic", void 0), r2([m()], e19.prototype, "tracking", void 0), r2([m()], e19.prototype, "displaying", void 0), r2([m()], e19.prototype, "error", void 0), r2([m()], e19.prototype, "isDraped", void 0), e19 = r2([a2("esri.views.3d.layers.graphics.GraphicState")], e19);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/draw/DrawGraphicTool3D.js
var z8 = class extends I3 {
  constructor(e27) {
    super(e27), this._activeVertexVisualElement = null, this._createGraphicState = null, this._outlineVisualElement = null, this._verticesVisualElement = null, this._verticalLineVisualElement = null, this._settings = new j8({ getTheme: () => this.view.effectiveTheme }), this.geometryType = null, this.type = "draw-3d";
  }
  initialize() {
    const { mode: e27, offset: t26, unit: i23 } = this.elevationInfo;
    this.internalGraphicsLayer.elevationInfo = new h4({ mode: e27, offset: t26, unit: i23 });
  }
  normalizeCtorArgs(e27) {
    if (!e27.elevationInfo) {
      const t26 = e27.hasZ ?? true;
      return { ...e27, elevationInfo: u10(t26) };
    }
    return e27;
  }
  initializeGraphic(e27) {
    const { view: t26 } = this, r25 = this._createGraphicState = new e19({ graphic: e27 });
    return t([t26.maskOccludee(e27), t26.trackGraphicState(r25), d2(() => ({ element: this._outlineVisualElement, isDraped: r25.isDraped }), ({ element: e28, isDraped: t27 }) => {
      e28 && (e28.isDraped = t27);
    }, A), i2(() => {
      z2(this.tooltipInfos.mesh, this.geometryToPlace);
    }), this._setupLoadingIndicator(r25), ...a27(r25)]);
  }
  makeDrawOperation() {
    const { geometryType: e27 } = this, t26 = "circle" !== e27 && "rectangle" !== e27;
    return new F6({ view: this.view, manipulators: this.manipulators, geometryType: M4(e27), drawingMode: this.mode, hasZ: this.hasZ, defaultZ: this.defaultZ, snapToSceneEnabled: this.snapToScene, drawSurface: new l11(this.view, this.elevationInfo, [this.internalGraphicsLayer]), elevationDrawSurface: new c10(this.elevationInfo, this.defaultZ, this.view, this.internalGraphicsLayer), hasM: false, elevationInfo: this.elevationInfo, snappingManager: this.snappingManager, snappingVisualizer: new R8(), segmentLabels: t26 ? new a21() : null, labelOptions: this.sketchOptions.labels, isDraped: this._createGraphicState ? this._createGraphicState.isDraped : "on-the-ground" === r13(this.hasZ, this.elevationInfo), cursor: this.cursor, constraintsEnabled: true });
  }
  onActiveVertexChanged(e27) {
    const { view: n29 } = this;
    if (this._activeVertexVisualElement) return this._activeVertexVisualElement.vertices = [e27], this._activeVertexVisualElement.recreate(), this._updateVerticalLineVisualElement(e27), e();
    const a39 = this._settings, c22 = a39.manipulators.vertex, m15 = new d13({ view: n29, spatialReference: n29.spatialReference, vertices: [e27], elevationInfo: this.internalGraphicsLayer.elevationInfo, size: c22.size, outlineSize: c22.outlineSize, renderOccluded: c22.renderOccluded, attached: false, isDecoration: true });
    this._activeVertexVisualElement = m15;
    const p19 = a39.visualElements.zVerticalLine, h25 = new G5({ view: n29, extensionType: p19.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: p8.OccludeAndTransparent, isDecoration: true });
    this._verticalLineVisualElement = h25;
    const u24 = t([d2(() => a39.visualElements.zVerticalLine, (e28) => e28.apply(h25), P), d2(() => ({ selectedColor: F3(a39.colors.selected), outlineColor: F3(a39.manipulators.vertex.outlineColor) }), ({ selectedColor: e28, outlineColor: t26 }) => {
      m15.color = e28, m15.outlineColor = t26;
    }, P), e(() => {
      this._activeVertexVisualElement = u(this._activeVertexVisualElement), this._verticalLineVisualElement = u(this._verticalLineVisualElement);
    })]);
    return m15.attached = true, this._updateVerticalLineVisualElement(e27), u24;
  }
  _updateVerticalLineVisualElement(e27) {
    const t26 = this._verticalLineVisualElement;
    if (!t26) return;
    const { renderCoordsHelper: i23, elevationProvider: r25 } = this.view;
    o6(A11, e27[0], e27[1], e27[2]), U3.setFromElevationInfo(this.elevationInfo), A11[2] = f14(A11, r25, U3, i23);
    i23.toRenderCoords(A11, this.view.spatialReference, A11) ? (t26.setStartEndFromWorldDownAtLocation(A11), t26.attached = true) : t26.attached = false;
  }
  onOutlineChanged(e27) {
    if (this._outlineVisualElement) return this._outlineVisualElement.geometry = e27, e();
    const t26 = this.internalGraphicsLayer.elevationInfo, { view: n29 } = this, a39 = this._settings, c22 = new j9({ view: n29, geometry: e27, elevationInfo: t26, isDraped: this._createGraphicState ? this._createGraphicState.isDraped : "on-the-ground" === r13(this.hasZ, t26), attached: false, isDecoration: true });
    this._outlineVisualElement = c22;
    const m15 = t([d2(() => a39.visualElements.lineObjects.outline, (e28) => e28.apply(c22), P), d2(() => a39.visualElements.lineObjects.shadowStyle, (e28) => e28.apply(c22), P), e(() => {
      this._outlineVisualElement = u(this._outlineVisualElement);
    })]);
    return c22.attached = true, c22.laserlineEnabled = true, m15;
  }
  onRegularVerticesChanged(e27) {
    if (this._verticesVisualElement) return this._verticesVisualElement.vertices = e27, e();
    const { view: n29 } = this, a39 = this._settings, c22 = a39.manipulators.vertex, m15 = new d13({ view: n29, spatialReference: n29.spatialReference, vertices: e27, elevationInfo: this.internalGraphicsLayer.elevationInfo, size: c22.size, outlineSize: c22.outlineSize, renderOccluded: c22.renderOccluded, attached: false, isDecoration: true }), p19 = t([d2(() => ({ color: F3(a39.manipulators.vertex.color), outlineColor: F3(a39.manipulators.vertex.outlineColor) }), ({ color: e28, outlineColor: t26 }) => {
      m15.color = e28, m15.outlineColor = t26;
    }, P), e(() => {
      this._verticesVisualElement = u(this._verticesVisualElement);
    })]);
    return m15.attached = true, this._verticesVisualElement = m15, p19;
  }
  updateGraphicGeometry(e27) {
    if ("mesh" !== this.geometryType || "point" !== (e27 == null ? void 0 : e27.type)) super.updateGraphicGeometry(e27);
    else {
      const t26 = this.geometryToPlace;
      t26 == null ? void 0 : t26.centerAt(e27), z2(this.tooltipInfos.mesh, t26);
      const i23 = this._graphic;
      t26 && i23.geometry === t26 || (i23.geometry = t26);
    }
  }
  _setupLoadingIndicator(e27) {
    const { drawOperation: t26 } = this;
    if (!this.geometryToPlace) return t26.loading = false, null;
    t26.loading = true;
    const s13 = e(() => {
      t26.loading = false;
    });
    let o23;
    const l26 = () => o23 && cancelAnimationFrame(o23);
    return t([p(() => e27.displaying, () => {
      l26(), o23 = requestAnimationFrame(() => s13.remove());
    }, { ...A, once: true }), e(l26), s13]);
  }
};
r2([m({ constructOnly: true })], z8.prototype, "elevationInfo", void 0), r2([m({ constructOnly: true })], z8.prototype, "geometryType", void 0), r2([m()], z8.prototype, "type", void 0), r2([m({ constructOnly: true })], z8.prototype, "view", void 0), z8 = r2([a2("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")], z8);
var U3 = new o15();
var A11 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/geometryUtils.js
function n18(o23) {
  const n29 = r19(o23);
  return t5(Math.cos(n29), Math.sin(n29));
}
function r19(t26) {
  if (null == t26 || "polyline" !== t26.type && "polygon" !== t26.type) return 0;
  const n29 = "polyline" === t26.type ? t26.paths : t26.rings, r25 = e2();
  for (const o23 of n29) for (let t27 = 0; t27 < o23.length - 1; t27++) {
    const n30 = o23[t27], e27 = o23[t27 + 1], i23 = n30[0] - e27[0], l26 = n30[1] - e27[1];
    if (i23 * i23 + l26 * l26 > r25) return Math.atan2(e27[1] - n30[1], e27[0] - n30[0]);
  }
  return 0;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatedObjectUtils.js
function t18(t26) {
  var _a;
  return (_a = t26 == null ? void 0 : t26.operations) == null ? void 0 : _a.data.geometry;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatorUtils.js
function o19(e27, n29) {
  return t19(e27 == null ? void 0 : e27.data.coordinateHelper.hasZ(), n29);
}
function t19(e27, o23) {
  return !!e27 && "on-the-ground" !== o23.mode && !c8(o23);
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/tooltipUtils3D.js
function m11(o23, e27, s13) {
  function l26() {
    const t26 = s13(), o24 = t26.sketchOptions.tooltips.effectiveEnabled ? t26.activeTooltipInfo : null;
    return { ...t26, activeTooltipInfo: o24 };
  }
  let p19 = false;
  function u24(t26) {
    p19 || (p19 = true, t26(), p19 = false);
  }
  function f21({ activeTooltipInfo: t26, sketchOptions: i23, scaleRotateTransform: n29 }) {
    u24(() => {
      t26 && (t26.sketchOptions = i23, y12(t26, e27), k4(t26, n29)), o23.info = t26;
    });
  }
  return t([d2(l26, f21, A), d2(() => {
    const t26 = l26(), { activeTooltipInfo: o24 } = t26;
    if (o24) return { context: t26, activeTooltipInfo: o24, key: o24.key, geometry: t18(e27) };
  }, (t26, o24) => {
    t26 && o24 && o24.key !== t26.key && u24(() => v11(e27, t26.context));
  }, C), e27.on("committed", () => {
    queueMicrotask(() => f21(l26()));
  }), G3(o23, { onBeforePaste: () => {
    p19 = true;
  }, onAfterPaste: () => {
    v11(e27, l26()), p19 = false;
  } })]);
}
function v11(t26, { activeTooltipInfo: o23, callbacks: e27 }) {
  if (!o23) return;
  e27.onBeforeUpdate();
  const i23 = t18(t26);
  switch (i23 == null ? void 0 : i23.type) {
    case "mesh":
      d14(o23, i23.origin, t26, e27), "orientation" in o23 && "scale" in o23 && z2(o23, i23, e27);
      break;
    case "point":
      d14(o23, i23, t26, e27);
  }
}
function d14(t26, o23, e27, i23) {
  var _a;
  const { dx: n29, dy: r25, dz: a39 } = F5(t26, o23);
  0 === n29 && 0 === r25 && 0 === a39 || (i23.onMoveStart(), (_a = e27.operations) == null ? void 0 : _a.move(n29, r25, a39, E8.NEW_STEP), i23.onMove(n29, r25, a39), i23.onMoveStop());
}
function y12(t26, o23) {
  const e27 = t18(o23), i23 = e27 == null ? void 0 : e27.type;
  if (!t26 || !e27 || "mesh" !== i23 && "point" !== i23) return;
  const n29 = "mesh" === i23, r25 = n29 ? e27.origin : e27;
  t26.setLocationFromPoint(r25), h17(t26, r25, o23), "transform-mesh" === t26.type && n29 && V3(t26, e27), t26.clearInputValues();
}
function h17(t26, o23, e27) {
  var _a;
  t26.elevation.actual = R6(o23), t26.elevation.visible = !!((_a = e27.operations) == null ? void 0 : _a.data.coordinateHelper.hasZ()), t26.elevation.readOnly = false, t26.elevation.showAsZ = true;
}
function k4(t26, i23) {
  if ("transform-point" !== (t26 == null ? void 0 : t26.type)) return;
  if (!i23) return t26.orientation.actual = void 0, t26.size.actual = void 0, t26.orientation.visible = false, void (t26.size.visible = false);
  const n29 = i23.mode, { size: r25, orientationClockwise: a39 } = i23.adapter, { visualVariables: s13 } = t26.sketchOptions.tooltips, c22 = s13 == null ? void 0 : s13.rotation, l26 = null != a39 && (null == n29 || "rotate" === n29), p19 = (c22 == null ? void 0 : c22.rotationType) ?? "geographic";
  t26.orientation.actual = l26 ? o14(a39, "radians", p19) : void 0, t26.orientation.precision = T6(c22 == null ? void 0 : c22.valueType), t26.orientation.visible = l26;
  const u24 = s13 == null ? void 0 : s13.size, f21 = null != r25 && (null == n29 || "scale" === n29);
  t26.size.actual = f21 ? a15(r25, (u24 == null ? void 0 : u24.unit) ?? "meters") : void 0, t26.size.precision = T6(u24 == null ? void 0 : u24.valueType), t26.size.visible = f21;
}
function T6(t26) {
  switch (t26) {
    case "integer":
    case "long":
      return 0;
    default:
      return null;
  }
}

// node_modules/@arcgis/core/views/3d/support/geometryUtils/ray.js
function m12(e27, n29, o23 = b5()) {
  return g12(e27, g3(n29), o23), A2(o23.direction, o23.direction), o23;
}
function g12(r25, n29, t26) {
  return l14(r25, r25.screenToRender(n29, p3(c4.get())), t26);
}
function l14(r25, t26, i23) {
  const c22 = p3(r9(c4.get(), t26));
  if (c22[2] = 0, !r25.unprojectFromRenderScreen(c22, i23.origin)) return null;
  const s13 = p3(r9(c4.get(), t26));
  s13[2] = 1;
  const m15 = r25.unprojectFromRenderScreen(s13, c4.get());
  return null == m15 ? null : (c2(i23.direction, m15, i23.origin), i23);
}

// node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js
var ee = class {
  constructor(e27) {
    var _a;
    this.metadata = void 0, this._camera = new it(), this._elevation = { offset: 0, override: null }, this.collisionType = { type: "point" }, this.collisionPriority = 0, this._renderObjects = new Array(), this.autoScaleRenderObjects = true, this._available = true, this._noDisplayCount = 0, this._radius = 10, this._worldSized = false, this.focusMultiplier = 2, this.touchMultiplier = 2.5, this.worldOriented = false, this._modelTransform = e6(), this._worldFrame = null, this._renderLocation = n3(), this._renderLocationDirty = true, this._location = new j({ x: 0, y: 0, z: 0 }), this._elevationAlignedLocation = new j(), this._elevationAlignedLocationDirty = true, this.interactive = true, this.selectable = false, this.grabbable = true, this.consumesClicks = true, this.cursor = null, this.grabCursor = null, this._grabbing = false, this.dragging = false, this._hovering = false, this._selected = false, this._state = u11.None, this._focused = false, this.events = new i3.EventEmitter(), this._screenLocation = { screenPointArray: f2(), renderScreenPointArray: y2(), pixelSize: 0 }, this._screenLocationDirty = true, this._engineResourcesAddedToStage = false, this._attached = false, this._location.spatialReference = e27.view.spatialReference, Object.assign(this, e27);
    const i23 = (_a = this.view.state) == null ? void 0 : _a.camera;
    i23 && this._camera.copyFrom(i23);
  }
  destroy() {
    this._applyObjectTransform = pe, this._removeResourcesFromStage(), this._engineResources = null, this.view = null, this._camera = null;
  }
  get _stage() {
    var _a;
    return (_a = this.view) == null ? void 0 : _a._stage;
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e27) {
    this._elevationInfo = e27, this._elevationAlignedLocationDirty = true, this._renderLocationDirty = true, this._updateEngineObject();
  }
  get renderObjects() {
    return this._renderObjects;
  }
  set renderObjects(e27) {
    this._removeResourcesFromStage(), this._engineResources = null, this._renderObjects = e27.slice(), this._updateEngineObject();
  }
  set available(e27) {
    e27 !== this._available && (this._available = e27, this._updateEngineObject());
  }
  get available() {
    return this._available;
  }
  disableDisplay() {
    return this._noDisplayCount++, 1 === this._noDisplayCount && this._updateEngineObject(), e(() => {
      this._noDisplayCount--, 0 === this._noDisplayCount && this._updateEngineObject();
    });
  }
  set radius(e27) {
    e27 !== this._radius && (this._radius = e27, this._updateEngineObject());
  }
  get radius() {
    return this._radius;
  }
  set worldSized(e27) {
    e27 !== this._worldSized && (this._worldSized = e27, this._updateEngineObject());
  }
  get worldSized() {
    return this._worldSized;
  }
  get modelTransform() {
    return this._modelTransform;
  }
  set modelTransform(e27) {
    te2(e27) && (this._screenLocationDirty = true), n4(this._modelTransform, e27), this._updateEngineObject();
  }
  get renderLocation() {
    return this._renderLocationDirty && (this._renderLocationDirty = false, this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation, this._renderLocation), this.worldOriented ? (this._worldFrame || (this._worldFrame = e6()), ie(this.view, this._renderLocation, this._worldFrame)) : this._worldFrame && (this._worldFrame = null)), this._renderLocation;
  }
  set renderLocation(e27) {
    this.view.renderCoordsHelper.fromRenderCoords(e27, this._location), this.elevationAlignedLocation = this._location;
  }
  get location() {
    return this._location;
  }
  set location(e27) {
    x3(e27, this._location), this._notifyLocationChanged();
  }
  _notifyLocationChanged() {
    this._renderLocationDirty = true, this._screenLocationDirty = true, this._elevationAlignedLocationDirty = true, this._updateEngineObject(), this.events.emit("location-update", { location: this._location });
  }
  get elevationAlignedLocation() {
    return this._elevationAlignedLocationDirty ? (this._evaluateElevationAlignment(), this._updateElevationAlignedLocation(), this._elevationAlignedLocation) : this._elevationAlignedLocation;
  }
  set elevationAlignedLocation(e27) {
    x3(e27, this._location), this._evaluateElevationAlignment(), this._location.z -= this._elevation.offset, this._updateElevationAlignedLocation(), this._updateEngineObject(), this.events.emit("location-update", { location: this._location });
  }
  _updateElevationAlignedLocation() {
    const e27 = null != this._elevation.override ? this._elevation.override : this.location.z || 0;
    this._elevationAlignedLocation.x = this.location.x, this._elevationAlignedLocation.y = this.location.y, this._elevationAlignedLocation.z = e27 + this._elevation.offset, this._elevationAlignedLocation.spatialReference = k2(this.location.spatialReference), this._renderLocationDirty = true, this._screenLocationDirty = true, this._elevationAlignedLocationDirty = false;
  }
  grabbableForEvent() {
    return true;
  }
  get grabbing() {
    return this._grabbing;
  }
  set grabbing(e27) {
    e27 !== this._grabbing && (this._grabbing = e27, this._setFocused(this._hovering || this._grabbing), this._updateEngineObject());
  }
  get hovering() {
    return this._hovering;
  }
  set hovering(e27) {
    e27 !== this._hovering && (this._hovering = e27, this._setFocused(this._hovering || this._grabbing), this._updateEngineObject());
  }
  get selected() {
    return this._selected;
  }
  set selected(e27) {
    e27 !== this._selected && (this._selected = e27, this._updateEngineObject(), this.events.emit("select-changed", { action: e27 ? "select" : "deselect" }));
  }
  get state() {
    return this._state;
  }
  set state(e27) {
    e27 !== this._state && (this._state = e27, this._updateEngineObject());
  }
  updateStateEnabled(e27, t26) {
    t26 ? this.state |= e27 : this.state &= ~e27;
  }
  _setFocused(e27) {
    e27 !== this._focused && (this._focused = e27, this.events.emit("focus-changed", { action: true === e27 ? "focus" : "unfocus" }));
  }
  get focused() {
    return this._focused;
  }
  get screenLocation() {
    return this._ensureScreenLocation(), this._screenLocation;
  }
  _ensureScreenLocation() {
    if (!this._screenLocationDirty) return;
    this._screenLocation.pixelSize = this._camera.computeScreenPixelSizeAt(this.renderLocation), this._screenLocationDirty = false;
    let e27;
    if (te2(this._modelTransform)) {
      const t26 = this._calculateModelTransformOffset(me);
      e27 = u6(t26, t26, this.renderLocation);
    } else e27 = this.renderLocation;
    this._camera.projectToRenderScreen(e27, this._screenLocation.renderScreenPointArray), this._camera.renderToScreen(this._screenLocation.renderScreenPointArray, this._screenLocation.screenPointArray);
  }
  get applyObjectTransform() {
    return this._applyObjectTransform;
  }
  set applyObjectTransform(e27) {
    this._applyObjectTransform = e27, this._screenLocationDirty = true, this._updateEngineObject();
  }
  get attached() {
    return this._attached;
  }
  intersectionDistance(t26, i23) {
    if (!this.available) return null;
    const s13 = g3(t26, se), o23 = this._getCollisionRadius(i23), r25 = -1 * this.collisionPriority;
    switch (this.collisionType.type) {
      case "point":
        if (b3(this.screenLocation.screenPointArray, s13) < o23 * o23) return this.screenLocation.renderScreenPointArray[2] + r25;
        break;
      case "line": {
        const e27 = this.collisionType.paths, t27 = this._getWorldToScreenObjectScale(), i24 = this._calculateObjectTransform(t27, ce), n29 = o23 * this.screenLocation.pixelSize, a39 = g12(this._camera, s13, re);
        if (null == a39) return null;
        for (const s14 of e27) {
          if (0 === s14.length) continue;
          const e28 = E2(he, s14[0], i24);
          for (let t28 = 1; t28 < s14.length; t28++) {
            const o24 = E2(de, s14[t28], i24), l26 = d4(b4(e28, o24, oe), a39);
            if (null != l26 && l26 < n29 * n29) {
              const t29 = u6(c4.get(), e28, o24);
              g4(t29, t29, 0.5);
              const i25 = l2(c4.get());
              return this._camera.projectToRenderScreen(t29, i25), i25[2] + r25;
            }
            s5(e28, o24);
          }
        }
        break;
      }
      case "disc": {
        const e27 = this.collisionType.direction, t27 = this.collisionType.offset ?? _, i24 = this._getWorldToScreenObjectScale(), n29 = this._calculateObjectTransform(i24, ce), a39 = o23 * this.screenLocation.pixelSize, c22 = g12(this._camera, s13, re);
        if (null == c22) return null;
        const h25 = n6(ne, n29), d18 = N2(ue, e27, h25), _10 = E2(ge, t27, n29);
        l5(_10, d18, le);
        const u24 = _e;
        if (x2(le, c22, u24) && v4(u24, _10) < a39 * a39) return this.screenLocation.renderScreenPointArray[2] + r25;
        break;
      }
      case "ribbon": {
        const { paths: e27, direction: t27 } = this.collisionType, i24 = this._getWorldToScreenObjectScale(), n29 = this._calculateObjectTransform(i24, ce), a39 = o23 * this._camera.computeScreenPixelSizeAt(this.renderLocation), h25 = g12(this._camera, s13, re);
        if (null == h25) return null;
        const d18 = n6(ne, n29), _10 = N2(ue, t27, d18), u24 = this._calculateModelTransformPosition(ge);
        l5(u24, _10, le);
        const g17 = _e;
        if (!x2(le, h25, g17)) break;
        for (const s14 of e27) {
          if (0 === s14.length) continue;
          const e28 = E2(he, s14[0], n29);
          for (let t28 = 1; t28 < s14.length; t28++) {
            const i25 = E2(de, s14[t28], n29), o24 = M3(b4(e28, i25, oe), g17);
            if (null != o24 && o24 < a39 * a39) {
              const t29 = u6(c4.get(), e28, i25);
              g4(t29, t29, 0.5);
              const s15 = l2(c4.get());
              return this._camera.projectToRenderScreen(t29, s15), s15[2] + r25;
            }
            s5(e28, i25);
          }
        }
        break;
      }
      default:
        n(this.collisionType);
    }
    return null;
  }
  attach(e27 = { manipulator3D: {} }) {
    const t26 = this._stage;
    if (!t26) return;
    const i23 = e27.manipulator3D;
    null == i23.engineLayerId ? (this._engineLayer = new a17(t26, { pickable: false, updatePolicy: C3.SYNC }), i23.engineLayerId = this._engineLayer.id) : (t26 == null ? void 0 : t26.getObject) && (this._engineLayer = t26.getObject(i23.engineLayerId)), i23.engineLayerReferences = (i23.engineLayerReferences || 0) + 1, this._materialIdReferences = i23.materialIdReferences, null == this._materialIdReferences && (this._materialIdReferences = /* @__PURE__ */ new Map(), i23.materialIdReferences = this._materialIdReferences), this._camera.copyFrom(this.view.state.camera), this._attached = true, this._updateEngineObject(), L(this._location.spatialReference, this.view.spatialReference) || (this.location = new j({ x: 0, y: 0, z: 0, spatialReference: this.view.spatialReference }));
  }
  detach(e27 = { manipulator3D: {} }) {
    const t26 = e27.manipulator3D;
    t26.engineLayerReferences--;
    const i23 = 0 === t26.engineLayerReferences;
    this._removeResourcesFromStage(), i23 && (t26.engineLayerId = null, u(this._engineLayer)), this._engineResources = null, this._engineLayer = null, this._materialIdReferences = null, this._attached = false;
  }
  onViewChange() {
    this._camera.copyFrom(this.view.state.camera), this._screenLocationDirty = true, this._updateEngineObject();
  }
  onElevationChange(e27) {
    nn(this.location, fe, e27.spatialReference) && q(e27.extent, fe) && this._notifyLocationChanged();
  }
  _evaluateElevationAlignment() {
    if (null == this.elevationInfo) return;
    let e27 = null, t26 = 0;
    const i23 = h9(this.elevationInfo, this.location.spatialReference ?? this.view.elevationProvider.spatialReference);
    switch (this.elevationInfo.mode) {
      case "on-the-ground":
        e27 = a18(this.view.elevationProvider, this.location, "ground") ?? 0;
        break;
      case "relative-to-ground":
        t26 = (a18(this.view.elevationProvider, this.location, "ground") ?? 0) + i23;
        break;
      case "relative-to-scene":
        t26 = (a18(this.view.elevationProvider, this.location, "scene") ?? 0) + i23;
        break;
      case "absolute-height":
        t26 = i23;
    }
    return t26 !== this._elevation.offset || e27 !== this._elevation.override ? (this._elevation.offset = t26, void (this._elevation.override = e27)) : void 0;
  }
  _updateEngineObject() {
    if (!this._attached) return;
    if (!this.available) return void this._removeResourcesFromStage();
    const e27 = this._getWorldToScreenObjectScale(), t26 = ce;
    if (true === this.autoScaleRenderObjects) {
      const i24 = this._getFocusedSize(this._radius, this.focused) * e27;
      this._calculateObjectTransform(i24, t26);
    } else this._calculateObjectTransform(e27, t26);
    const { objectsByState: i23 } = this._ensureEngineResources(), s13 = (this.focused ? t14.Focused : t14.Unfocused) | (this.selected ? t14.Selected : t14.Unselected), o23 = this._noDisplayCount > 0;
    for (const { stateMask: r25, objects: n29 } of i23) {
      if (o23) {
        for (const e29 of n29) e29.visible = false;
        continue;
      }
      const e28 = (r25 & t14.All) !== t14.None, i24 = (r25 & u11.All) !== u11.None, a39 = !e28 || (s13 & r25) == (r25 & t14.All), c22 = !i24 || (this.state & r25) == (r25 & u11.All);
      if (a39 && c22) for (const s14 of n29) s14.visible = true, s14.transformation = t26;
      else for (const t27 of n29) t27.visible = false;
    }
  }
  _ensureEngineResources() {
    if (null == this._engineResources) {
      const e27 = this._engineLayer, t26 = [], i23 = /* @__PURE__ */ new Set();
      this.renderObjects.forEach(({ geometry: { material: e28 } }) => {
        i23.has(e28) || (t26.push(e28), i23.add(e28));
      });
      const s13 = /* @__PURE__ */ new Map();
      this._renderObjects.forEach((e28) => {
        const t27 = new A5({ castShadow: false, geometries: [e28.geometry] }), i24 = s13.get(e28.stateMask) || [];
        i24.push(t27), s13.set(e28.stateMask, i24);
      });
      const o23 = [];
      s13.forEach((e28, t27) => o23.push({ stateMask: t27, objects: e28 })), this._engineResources = { objectsByState: o23, layer: e27, materials: t26 };
    }
    return this._addResourcesToStage(), this._engineResources;
  }
  _addResourcesToStage() {
    const e27 = this._stage;
    if (this._engineResourcesAddedToStage || null == this._engineResources || !e27) return;
    const { objectsByState: t26, layer: i23, materials: s13 } = this._engineResources;
    s13.forEach((t27) => {
      const i24 = this._materialIdReferences, s14 = i24.get(t27.id) || 0;
      0 === s14 && e27.add(t27), i24.set(t27.id, s14 + 1);
    }), t26.forEach(({ objects: t27 }) => {
      i23.addMany(t27), e27.addMany(t27);
    }), this._engineResourcesAddedToStage = true;
  }
  _removeResourcesFromStage() {
    const e27 = this._stage;
    if (!this._engineResourcesAddedToStage || null == this._engineResources || !e27) return;
    const { objectsByState: t26, layer: i23, materials: s13 } = this._engineResources;
    t26.forEach(({ objects: t27 }) => {
      i23.removeMany(t27), e27.removeMany(t27);
    }), s13.forEach((t27) => {
      const i24 = this._materialIdReferences, s14 = i24.get(t27.id);
      1 === s14 ? (e27.remove(t27), i24.delete(t27.id)) : i24.set(t27.id, s14 - 1);
    }), this._engineResourcesAddedToStage = false;
  }
  _getCollisionRadius(e27) {
    return this._getFocusedSize(this.radius, true) * ("touch" === e27 ? this.touchMultiplier : 1);
  }
  _getFocusedSize(e27, t26) {
    return e27 * (t26 ? this.focusMultiplier : 1);
  }
  _getWorldToScreenObjectScale() {
    return this._worldSized ? 1 : this.screenLocation.pixelSize;
  }
  _calculateModelTransformPosition(e27) {
    const t26 = this._getWorldToScreenObjectScale(), i23 = this._calculateObjectTransform(t26, ae2);
    return o6(e27, i23[12], i23[13], i23[14]);
  }
  _calculateModelTransformOffset(e27) {
    const t26 = this._calculateModelTransformPosition(e27);
    return c2(e27, t26, this.renderLocation);
  }
  _calculateObjectTransform(e27, t26) {
    return r7(t26, e27, 0, 0, 0, 0, e27, 0, 0, 0, 0, e27, 0, 0, 0, 0, 1), this._worldFrame && c(t26, t26, this._worldFrame), c(t26, t26, this._modelTransform), t26[12] += this.renderLocation[0], t26[13] += this.renderLocation[1], t26[14] += this.renderLocation[2], t26[15] = 1, null != this._applyObjectTransform && this._applyObjectTransform(t26), t26;
  }
  get test() {
  }
};
function te2(e27) {
  return 0 !== e27[12] || 0 !== e27[13] || 0 !== e27[14];
}
function ie(e27, t26, i23) {
  switch (e27.viewingMode) {
    case "local":
      return o4(i23), true;
    case "global": {
      const o23 = s3(e27.renderCoordsHelper.spatialReference);
      return v2(t26, 0, he, 0, o23.radius), n7(s(he[0]), s(he[1]), i23), true;
    }
  }
}
var se = f2();
var oe = v5();
var re = b5();
var ne = e5();
var ae2 = e6();
var ce = e6();
var le = M2();
var he = n3();
var de = n3();
var _e = n3();
var ue = n3();
var ge = n3();
var me = n3();
var fe = new j({ x: 0, y: 0, z: 0, spatialReference: null });
var pe = () => {
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/GrabbingState.js
var N7;
!function(N10) {
  N10[N10.NONE = 0] = "NONE", N10[N10.ANY = 1] = "ANY", N10[N10.Z = 2] = "Z", N10[N10.XY = 4] = "XY";
}(N7 || (N7 = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorType.js
var A12;
!function(A16) {
  A16[A16.TRANSLATE_Z = 0] = "TRANSLATE_Z", A16[A16.TRANSLATE_XY = 1] = "TRANSLATE_XY", A16[A16.SCALE = 2] = "SCALE", A16[A16.ROTATE = 3] = "ROTATE", A16[A16.SCALE_ROTATE = 4] = "SCALE_ROTATE";
}(A12 || (A12 = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorState.js
var a28 = class {
  constructor() {
    this.grabbingState = N7.NONE, this.zManipulator = null, this.firstSelected = null, this.numSelected = 0, this.firstGrabbedXY = null;
  }
  update(a39) {
    this.grabbingState = N7.NONE, this.zManipulator = null, this.numSelected = 0, this.firstSelected = null, this.firstGrabbedXY = null, a39.forEachManipulator((a40, s13) => {
      if (s13 === A12.TRANSLATE_Z && (this.zManipulator = a40), a40 instanceof ee && (a40.selected && (0 === this.numSelected && (this.firstSelected = a40), this.numSelected++), null == this.firstGrabbedXY && a40.grabbing && s13 === A12.TRANSLATE_XY && (this.firstGrabbedXY = a40)), a40.grabbing) switch (this.grabbingState |= N7.ANY, s13) {
        case A12.TRANSLATE_Z:
          this.grabbingState |= N7.Z;
          break;
        case A12.TRANSLATE_XY:
          this.grabbingState |= N7.XY;
      }
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/lineObjectVisualElementUtils.js
function y13(t26) {
  const { object: n29 } = t26, a39 = S12(t26), l26 = [a39, M9(t26, a39.visualElement)];
  return n29.maskOccludee && l26.push(n29.maskOccludee()), { visualElement: a39.visualElement, remove: () => o2(l26) };
}
function S12(e27) {
  const { view: a39, object: l26 } = e27, s13 = t18(l26), r25 = new j9({ view: a39, geometry: D6(s13) ? s13 : null, elevationInfo: l26.elevationInfo, attached: false, isDecoration: true }), c22 = new j8({ getTheme: () => a39.effectiveTheme }), m15 = () => {
    r25.attached = l26.visible;
  }, u24 = t([d2(() => c22.visualElements.lineObjects.outline, (e28) => e28.apply(r25), P), d2(() => c22.visualElements.lineObjects.shadowStyle, (e28) => e28.apply(r25), P), d2(() => l26.visible, m15), d2(() => l26.isDraped, (e28) => {
    r25.isDraped = e28;
  }, P), l26.on("committed", () => {
    const e28 = t18(l26);
    r25.geometry = D6(e28) ? e28 : null;
  }), i(r25)]);
  return m15(), { visualElement: r25, remove: () => u24.remove() };
}
function M9(r25, c22) {
  const { object: m15, view: u24 } = r25, p19 = [], v16 = m15.elevationInfo, j15 = "on-the-ground" === v16.mode || !v16.offset && "absolute-height" !== v16.mode, y15 = new a28(), S20 = new j8({ getTheme: () => u24.effectiveTheme }), M18 = S20.visualElements, L9 = new G5({ view: u24, extensionType: M18.zVerticalLine.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: p8.OccludeAndTransparent, isDecoration: true }), A16 = s(M18.heightPlaneAngleCutoff), x15 = new c15({ view: u24, attached: false, angleCutoff: A16, isDecoration: true }), C11 = r5(1);
  p19.push(d2(() => ({ lineShadowStyle: S20.visualElements.lineObjects.shadowStyle, pointShadowStyle: S20.visualElements.pointObjects.shadowStyle, alpha: C11.value }), ({ lineShadowStyle: e27, pointShadowStyle: t26, alpha: n29 }) => {
    e27.apply(c22, n29), t26.apply(L9, n29);
  }, P));
  const V10 = r5(1);
  p19.push(d2(() => ({ heightPlane: S20.visualElements.heightPlane, alpha: V10.value }), ({ heightPlane: e27, alpha: t26 }) => e27.apply(x15, t26), P));
  const P18 = () => {
    y15.update(r25);
    const e27 = t18(m15);
    if (!m15.visible || j15 && (m15.isDraped || !D6(e27) || !e27.hasZ)) return c22.laserlineEnabled = false, L9.attached = false, void (x15.attached = false);
    c22.laserlineEnabled = true;
    const t26 = y15.grabbingState & N7.XY ? M18.laserlineAlphaMultiplier : 1;
    C11.value = t26;
    const n29 = y15.grabbingState & N7.Z ? M18.laserlineAlphaMultiplier : 1;
    V10.value = n29, T7(L9, y15), O7(r25, c22, x15, y15);
  };
  p19.push(d2(() => S20.visualElements.zVerticalLine, (e27) => e27.apply(L9), P)), p19.push(m15.on("committed", P18), d2(() => m15.visible, P18), c22.events.on("attachment-origin-changed", P18), i(L9), i(x15));
  const U9 = [], X3 = () => {
    o2(U9), U9.length = 0, r25.forEachManipulator((e27) => U9.push(e27.events.on("grab-changed", P18))), r25.forEachManipulator((e27) => U9.push(e27.events.on("select-changed", P18))), P18();
  };
  return X3(), p19.push(r25.onManipulatorsChanged(X3), u2(() => t(U9))), t(p19);
}
function T7(e27, t26) {
  const n29 = 1 === t26.numSelected ? t26.firstSelected : t26.numSelected > 1 && null != t26.firstGrabbedXY ? t26.firstGrabbedXY : null;
  null != n29 ? (e27.setStartEndFromWorldDownAtLocation(n29.renderLocation), e27.attached = true) : e27.attached = false;
}
function O7(e27, t26, n29, a39) {
  if (a39.numSelected > 0) {
    o6(L3, 0, 0, 0);
    let t27 = 0;
    e27.forEachManipulator((e28, n30) => {
      n30 === A12.TRANSLATE_XY && e28.selected && e28 instanceof ee && (u6(L3, L3, e28.renderLocation), t27++);
    }), t27 > 0 ? (n29.heightManifoldTarget = g4(L3, L3, 1 / t27), n29.attached = true) : n29.attached = false;
  } else {
    const a40 = t26.attachmentOrigin;
    null != a40 && e27.view.renderCoordsHelper.toRenderCoords(a40, L3) ? (n29.heightManifoldTarget = L3, n29.attached = true) : n29.attached = false;
  }
}
function D6(e27) {
  return null != e27 && ("polygon" === e27.type || "polyline" === e27.type);
}
var L3 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/originGeometryVisualElementUtils.js
function P13(t26) {
  const o23 = [], n29 = S13(t26, o23);
  return I6(t26, o23, n29), { visualElement: n29, remove: () => o2(o23) };
}
function I6(e27, o23, s13) {
  const { view: c22, object: m15 } = e27, h25 = new j8({ getTheme: () => c22.effectiveTheme }), E15 = new G5({ view: c22, extensionType: h25.visualElements.zVerticalLine.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: p8.OccludeAndTransparent, isDecoration: true });
  o23.push(d2(() => h25.visualElements.zVerticalLine, (e28) => e28.apply(E15), P));
  const P18 = new c15({ view: c22, intersectsLineInfinite: true, attached: false, isDecoration: true }), I15 = s(h25.visualElements.heightPlaneAngleCutoff), S20 = new c15({ view: c22, attached: false, angleCutoff: I15, isDecoration: true }), A16 = m15.elevationInfo, L9 = o15.fromElevationInfo(A16), M18 = "on-the-ground" === A16.mode || !A16.offset && "absolute-height" !== A16.mode, R13 = new a28(), O11 = r5(1);
  o23.push(d2(() => ({ heightPlane: h25.visualElements.heightPlane, alpha: O11.value }), ({ heightPlane: e28, alpha: t26 }) => e28.apply(S20, t26), P));
  const z11 = r5(1);
  o23.push(d2(() => ({ shadowStyle: h25.visualElements.pointObjects.shadowStyle, alpha: z11.value }), ({ shadowStyle: e28, alpha: t26 }) => e28.apply(P18, t26), P));
  const B5 = () => {
    R13.update(e27);
    let t26 = V9(t18(m15));
    const o24 = M18 && (m15.isDraped || null == t26 || !t26.hasZ);
    let n29 = true;
    if (o24 || null == t26) n29 = false;
    else {
      d9(m15.elevationInfo) && (t26 = t26.clone(), t26.z = 0);
      const e28 = f14(t26, c22.elevationProvider, L9, c22.renderCoordsHelper);
      o6(U4, t26.x, t26.y, e28), n8(U4, t26.spatialReference, U4, c22.renderCoordsHelper.spatialReference), E15.setStartEndFromWorldDownAtLocation(U4), P18.intersectsWorldUpAtLocation = U4;
    }
    const i23 = R13.grabbingState & N7.Z ? h25.visualElements.laserlineAlphaMultiplier : 1;
    O11.value = i23;
    const l26 = q3(C5);
    !o24 && m15.visible && s13.calculateMapBounds(l26) && n8(O(l26, U4), c22.spatialReference, U4, c22.renderCoordsHelper.spatialReference) ? (S20.heightManifoldTarget = U4, S20.attached = true) : S20.attached = false;
    const r25 = R13.grabbingState & N7.XY ? h25.visualElements.laserlineAlphaMultiplier : 1;
    z11.value = r25;
    const j15 = n29 && m15.visible && !o24;
    P18.attached = j15, E15.attached = j15;
  };
  o23.push(d2(() => [m15.visible, m15.isDraped], B5), m15.on("committed", B5)), e27.forEachManipulator((e28) => {
    o23.push(e28.events.on("grab-changed", B5));
  }), o23.push(i(P18)), o23.push(i(E15)), o23.push(i(S20)), B5();
}
function S13(e27, o23) {
  const { view: n29, object: i23 } = e27, l26 = new S9({ view: n29, geometry: V9(t18(i23)), elevationInfo: i23.elevationInfo, isDecoration: true });
  return A13(e27, l26, o23), o23.push(i(l26)), l26;
}
function V9(e27) {
  return null == e27 ? null : "point" === e27.type ? e27 : "mesh" === e27.type ? e27.origin.clone() : null;
}
function A13(e27, t26, o23) {
  const { view: n29, object: r25 } = e27, a39 = () => {
    t26.attached = r25.visible;
  }, s13 = new j8({ getTheme: () => n29.effectiveTheme });
  L4(e27, t26, o23), s13.visualElements.pointObjects.outline.apply(t26), o23.push(d2(() => r25.visible, a39, P));
}
function L4(e27, t26, n29) {
  const { view: i23, object: l26 } = e27;
  let r25 = null;
  const a39 = (e28) => {
    null != r25 && (r25.remove(), r25 = null), l26.isDraped && null != e28 && (r25 = M10(i23, e28, () => {
      t26.geometry = e28;
    }));
  }, s13 = () => {
    const e28 = V9(t18(l26));
    null != e28 && d9(l26.elevationInfo) && (e28.z = 0), a39(e28), t26.geometry = e28;
  };
  n29.push(l26.on("committed", s13), u2(() => r25)), s13();
}
function M10(e27, t26, o23) {
  const n29 = e27.elevationProvider.spatialReference;
  c3(t26, U4, n29);
  const i23 = U4[0], l26 = U4[1];
  return e27.elevationProvider.on("elevation-change", (e28) => {
    w(e28.extent, i23, l26) && o23();
  });
}
var U4 = n3();
var C5 = u3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/visualElementUtils.js
function l15(l26) {
  var _a;
  switch ((_a = t18(l26.object)) == null ? void 0 : _a.type) {
    case "point":
    case "mesh":
      return P13(l26);
    case "polygon":
    case "polyline":
      return y13(l26);
    default:
      return null;
  }
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/config.js
var t20 = 128;
var a29 = 70;
var e20 = 80;
var h18 = 0.02;
var M11 = 54;
var c16 = 100;
var o20 = Math.ceil(a29 / 3 * 2);
var I7 = 160;
var P14 = 0.5;
var i16 = 24;
var l16 = 9;
var n19 = I7 + 30;
var p17 = I7 + 53;
var r20 = 60;
var s10 = 23;
var x12 = 5 * Math.PI / 12;
var b13 = 1 * Math.PI / 3;
var d15 = 10;
var f18 = 0.2;
var g13 = 30;
var j10 = 53;
var k5 = 0.2;
var m13 = 0.3;
var q7 = 200;
var u18 = 3;
var v12 = 1e6;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/Manipulation.js
var t21 = class {
  constructor() {
    this._available = true;
  }
  set location(a39) {
    this._forEachManipulator3D((t26) => t26.location = a39);
  }
  set elevationAlignedLocation(a39) {
    this._forEachManipulator3D((t26) => t26.elevationAlignedLocation = a39);
  }
  set elevationInfo(a39) {
    this._forEachManipulator3D((t26) => t26.elevationInfo = a39);
  }
  get renderLocation() {
    let a39;
    return this._forEachManipulator3D((t26) => {
      a39 || (a39 = t26.renderLocation);
    }), a39;
  }
  set renderLocation(a39) {
    this._forEachManipulator3D((t26) => t26.renderLocation = a39);
  }
  get available() {
    return this._available;
  }
  set available(a39) {
    this._available = a39, this._forEachManipulator3D((t26) => t26.available = a39);
  }
  get hovering() {
    return this.someManipulator((a39) => a39.hovering);
  }
  get grabbing() {
    return this.someManipulator((a39) => a39.grabbing);
  }
  get dragging() {
    return this.someManipulator((a39) => a39.dragging);
  }
  get selected() {
    return this.someManipulator((a39) => a39.selected);
  }
  hasManipulator(a39) {
    return this.someManipulator((t26) => t26 === a39);
  }
  someManipulator(a39) {
    let t26 = false;
    return this.forEachManipulator((o23) => {
      !t26 && a39(o23) && (t26 = true);
    }), t26;
  }
  _forEachManipulator3D(t26) {
    this.forEachManipulator((o23, e27) => {
      o23 instanceof ee && t26(o23, e27);
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/InteractiveManipulation.js
var i17 = class extends t21 {
  constructor() {
    super(...arguments), this._interactive = true;
  }
  get interactive() {
    return this._interactive;
  }
  set interactive(t26) {
    this._interactive !== t26 && (this._interactive = t26), this._updateManipulatorInteractivity();
  }
  _updateManipulatorInteractivity() {
    const t26 = !this.grabbing && this._interactive;
    this.forEachManipulator((i23) => {
      i23.interactive = t26 || i23.grabbing;
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/RenderObject.js
var e21 = class {
  constructor(e27, s13 = t14.None) {
    this.geometry = e27, this.stateMask = s13;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/dragEventPipeline3D.js
function C6(e27, n29) {
  return T9(e27, () => n29);
}
function P15(e27) {
  return T9(e27, (e28) => e28.plane);
}
function T9(r25, t26) {
  const o23 = n3(), l26 = n3();
  let s13 = false;
  return (c22) => {
    const a39 = t26(c22);
    if ("start" === c22.action) {
      const t27 = g3(c22.screenStart, a5(t9.get())), l27 = g12(r25.state.camera, t27, Q3);
      null != l27 && (s13 = x2(a39, l27, o23));
    }
    if (!s13) return null;
    const i23 = g3(c22.screenEnd, a5(t9.get())), u24 = g12(r25.state.camera, i23, Q3);
    return null == u24 ? null : x2(a39, u24, l26) ? { ...c22, renderStart: o23, renderEnd: l26, plane: a39, ray: u24 } : null;
  };
}
function D7(e27, n29, t26 = 0, o23 = null, l26 = null) {
  let s13 = null;
  return (c22) => {
    if ("start" === c22.action && (s13 = e27.sceneIntersectionHelper.intersectElevationFromScreen(f2(c22.screenStart.x, c22.screenStart.y), n29, t26, l26), null != s13 && null != o23 && !nn(s13, s13, o23))) return null;
    if (null == s13) return null;
    const a39 = e27.sceneIntersectionHelper.intersectElevationFromScreen(f2(c22.screenEnd.x, c22.screenEnd.y), n29, t26, l26);
    return null != a39 && (null == o23 || nn(a39, a39, o23)) ? { ...c22, mapStart: s13, mapEnd: a39 } : null;
  };
}
function M13(e27, n29, r25, t26 = null, o23 = null) {
  return D7(e27, r25, p10(n29, e27, r25), t26, o23);
}
function N8(e27, n29, r25, t26) {
  const o23 = r25.toMap(e27.screenStart);
  return null != o23 ? M13(n29, o23, r25.elevationInfo, t26) : null;
}
function h19(e27, n29) {
  const r25 = K3, t26 = L5, o23 = M2();
  e27.renderCoordsHelper.worldUpAtPosition(n29, r25);
  const l26 = _4(O3(o23), r25, c2(t26, n29, e27.state.camera.eye));
  return _4(l26, l26, r25), l5(n29, l26, o23);
}
function G6(e27, n29, r25) {
  let t26 = null;
  const o23 = new w5();
  return o23.next(C6(e27, h19(e27, n29))).next(k6(e27, n29)).next(F9(e27, r25)).next((e28) => {
    e28.mapEnd.x = e28.mapStart.x, e28.mapEnd.y = e28.mapStart.y, t26 = e28;
  }), (e28) => (t26 = null, o23.execute(e28), t26);
}
function k6(e27, n29) {
  const r25 = n3(), t26 = r10(n29);
  e27.renderCoordsHelper.worldUpAtPosition(n29, r25);
  const s13 = n3(), m15 = n3(), d18 = (l26) => {
    if (c2(l26, l26, n29), i6(r25, l26, l26), "global" === e27.viewingMode) {
      r10(l26) * Math.sign(P3(r25, l26)) < 1e-3 - t26 && c2(l26, g4(l26, r25, 1e-3), n29);
    }
    return u6(l26, l26, n29), l26;
  };
  return (e28) => (e28.renderStart = d18(s5(s13, e28.renderStart)), e28.renderEnd = d18(s5(m15, e28.renderEnd)), e28);
}
function F9(e27, n29) {
  const r25 = e27.renderCoordsHelper;
  return (e28) => {
    const t26 = r25.fromRenderCoords(e28.renderStart, new j({ spatialReference: n29 })), o23 = r25.fromRenderCoords(e28.renderEnd, new j({ spatialReference: n29 }));
    return null != t26 && null != o23 ? { ...e28, mapStart: t26, mapEnd: o23 } : null;
  };
}
var q8;
!function(e27) {
  e27[e27.GROUND = 0] = "GROUND", e27[e27.OTHER = 1] = "OTHER";
}(q8 || (q8 = {}));
var J2 = n5();
var K3 = n3();
var L5 = n3();
var Q3 = b5();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/moveUtils.js
function n20(n29, a39, r25) {
  const c22 = (t26, e27) => {
    a39({ action: t26, object: n29, dxScreen: e27.screenDeltaX, dyScreen: e27.screenDeltaY });
  };
  return r25((a40, r26, s13) => (r26.next((t26) => ("start" === t26.action && c22("start", t26), t26)).next(f12(n29)).next((t26) => {
    switch (t26.action) {
      case "start":
      case "update":
        (t26.translationX || t26.translationY || t26.translationZ) && c22("update", t26);
        break;
      case "end":
        c22("end", t26);
    }
    return t26;
  }), { steps: r26, cancel: s13 = s13.next(g8(n29)).next((t26) => (c22("end", { screenDeltaX: 0, screenDeltaY: 0 }), t26)) }));
}
function a30(t26) {
  if (null == (t26 == null ? void 0 : t26.axis)) return 1;
  const { mapStart: e27, mapEnd: n29, axis: a39 } = t26, r25 = [n29.x - e27.x, n29.y - e27.y];
  return r25[0] * a39[0] + r25[1] * a39[1] > 0 ? 1 : -1;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYAxisManipulation.js
var C7 = class extends t21 {
  constructor(t26) {
    super(), this._handles = new r3(), this._arrowManipulatorInfos = new Array(), this._angle = 0, this._scale = 1, this._radius = a29, this._updateAfterDrag = false, this.events = new i3(), this._tool = t26.tool, this._view = t26.view, this._opaqueMaterial = this._createMaterial(), this._transparentMaterial = this._createMaterial(0.5), null != t26.radius && (this._radius = t26.radius), this._createManipulators(), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  set orthogonalAvailable(t26) {
    this._arrowManipulatorInfos.length >= 3 && (this._arrowManipulatorInfos[1].manipulator.available = t26, this._arrowManipulatorInfos[3].manipulator.available = t26);
  }
  destroy() {
    this._handles = u(this._handles), this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    }), this._tool = null, this._view = null, this._arrowManipulatorInfos.length = 0;
  }
  forEachManipulator(t26) {
    for (const { manipulator: r25 } of this._arrowManipulatorInfos) t26(r25, A12.TRANSLATE_XY);
  }
  createManipulatedObjectDragPipeline(t26, r25, a39) {
    if (!r25.operations) return e();
    const i23 = r25.operations.data.spatialReference, o23 = r25.graphic;
    return n20(r25, a39, (a40) => this.createDragPipeline((r26, e27, i24, o24, s13) => ({ steps: e27, cancel: i24 } = t26(r26, e27, i24, o24, s13), a40(r26, e27, i24)), r25.elevationInfo, i23, o23));
  }
  createDragPipeline(t26, r25, a39, e27) {
    return t(this._arrowManipulatorInfos.map(({ manipulator: i23 }, o23) => p13(i23, (i24, s13, n29, l26, p19) => {
      const u24 = s13.next((t27) => ({ ...t27, manipulatorType: A12.TRANSLATE_XY })).next(M5(this._view, i24.elevationAlignedLocation)).next(M13(this._view, i24.elevationAlignedLocation, r25, a39, e27)).next(m6(i24.location, this.angle + (o23 + 1) * Math.PI * 0.5)).next(j6());
      t26(i24, u24, n29, l26, p19);
    })));
  }
  get angle() {
    return this._angle;
  }
  set angle(t26) {
    this._angle = t26, this.dragging ? this._updateAfterDrag = true : this._updateManipulatorTransform();
  }
  get displayScale() {
    return this._scale;
  }
  set displayScale(t26) {
    this._scale = t26, this._updateManipulatorTransform();
  }
  get radius() {
    return this._radius;
  }
  set radius(t26) {
    this._radius !== t26 && (this._radius = t26, this._updateManipulators());
  }
  _updateManipulators() {
    for (let t26 = 0; t26 < this._arrowManipulatorInfos.length; t26++) this._updateArrowManipulator(this._arrowManipulatorInfos[t26], t26);
    this._updateManipulatorTransform();
  }
  _updateArrowManipulator({ manipulator: t26, transform: r25 }, a39) {
    const e27 = this._radius / a29, i23 = M11 * e27, o23 = i23 * Math.sqrt(3) / 2, s13 = gt(this._opaqueMaterial, o23, i23 / 2, i23 / 2, h18);
    Ot(s13, q4(f4.get(), o6(c4.get(), 0, -o23 / 3, 0))), t26.renderObjects = [new e21(s13, t14.Focused), new e21(s13.instantiate({ material: this._transparentMaterial }), t14.Unfocused)], t26.radius = o23 / 3 * 2 * 1.2;
    const n29 = R(f4.get(), a39 * Math.PI / 2), h25 = q4(f4.get(), o6(c4.get(), 0, c16 * e27, 0));
    c(r25, n29, h25);
  }
  _createManipulators() {
    for (let t26 = 0; t26 < 4; t26++) {
      const r25 = this._createArrowManipulator(t26);
      this._arrowManipulatorInfos.push(r25);
    }
    this._updateManipulatorTransform();
  }
  _updateManipulatorTransform() {
    const t26 = this.angle, r25 = p4(f4.get(), t26, r6(0, 0, 1));
    if (null == r25) return;
    const a39 = d3(f4.get(), o6(c4.get(), this.displayScale, this.displayScale, this.displayScale)), e27 = c(f4.get(), a39, r25);
    for (const i23 of this._arrowManipulatorInfos) {
      const t27 = c(f4.get(), e27, i23.transform);
      i23.manipulator.modelTransform = t27;
    }
  }
  _createArrowManipulator(t26) {
    const r25 = new ee({ view: this._view, autoScaleRenderObjects: false, worldOriented: true, focusMultiplier: 1, touchMultiplier: 1, collisionType: { type: "disc", direction: r6(0, 0, 1) } }), a39 = { manipulator: r25, transform: e6() };
    return this._updateArrowManipulator(a39, t26), this._handles.add(r25.events.on("drag", (t27) => {
      this._updateAfterDrag && "end" === t27.action && !this.dragging && (this._updateManipulatorTransform(), this._updateAfterDrag = false);
    })), a39;
  }
  _createMaterial(r25 = 1) {
    const a39 = new A6({ cullFace: e8.Back, renderOccluded: p8.Transparent, isDecoration: true });
    return this._handles.add(d2(() => h.toUnitRGBA(this._view.effectiveTheme.accentColor), (t26) => {
      t26[3] *= r25, a39.setParameters({ color: t26 });
    }, P)), a39;
  }
  get test() {
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/snapping/SnapToScene.js
var e23 = class {
  constructor() {
    this._view = null, this._elevationInfo = null, this._lastDragEvent = null, this._next = null, this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t26) {
    if (this._enabled !== t26 && null != this._lastDragEvent && null != this._next) {
      const n29 = this._lastDragEvent.mapEnd, e27 = this._snap(this._lastDragEvent.screenEnd);
      if (null != e27) {
        const s13 = { action: "update", mapStart: this._lastDragEvent.mapStart, mapEnd: true === t26 ? e27 : n29, screenStart: this._lastDragEvent.screenEnd, screenEnd: this._lastDragEvent.screenEnd };
        this._next.execute(s13);
      }
    }
    this._enabled = t26;
  }
  _snap(n29) {
    const e27 = null != this._view ? this._view.toMap(n29, { exclude: [] }) : null;
    return null != e27 && null != this._view && (e27.z = p10(e27, this._view, this._elevationInfo)), e27;
  }
  createDragEventPipelineStep(t26, e27) {
    this._view = t26, this._elevationInfo = e27, this._lastDragEvent = null;
    const s13 = new w5();
    this._next = s13;
    return [(t27) => {
      if (this._lastDragEvent = "end" !== t27.action ? { ...t27 } : null, this._enabled) {
        const n29 = this._snap(t27.screenEnd);
        return null != n29 ? { action: t27.action, mapStart: t27.mapStart, mapEnd: n29, screenStart: t27.screenStart, screenEnd: t27.screenEnd } : null;
      }
      return { action: t27.action, mapStart: t27.mapStart, mapEnd: t27.mapEnd, screenStart: t27.screenStart, screenEnd: t27.screenEnd };
    }, s13];
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYDiscManipulation.js
var O8 = class extends t21 {
  constructor(t26) {
    super(), this._handles = new r3(), this._snapToScene = new e23(), this._scale = 1, this._radius = a29, this._view = t26.view, this._tool = t26.tool, this._discMaterial = this._createMaterial(), this._discMaterialTransparent = this._createMaterial(0.5), null != t26.snapToScene && (this.snapToScene = t26.snapToScene), null != t26.radius && (this._radius = t26.radius), this._createManipulator(), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  destroy() {
    this._handles = u(this._handles), this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    }), this._tool = null, this._view = null, this._manipulator = null;
  }
  forEachManipulator(t26) {
    t26(this._manipulator, A12.TRANSLATE_XY);
  }
  get displayScale() {
    return this._scale;
  }
  set displayScale(t26) {
    this._scale = t26, this._updateManipulatorTransform();
  }
  get snapToScene() {
    return this._snapToScene.enabled;
  }
  set snapToScene(t26) {
    this._snapToScene.enabled = t26;
  }
  get radius() {
    return this._radius;
  }
  set radius(t26) {
    t26 !== this._radius && (this._radius = t26, this._updateManipulator());
  }
  get discManipulator() {
    return this._manipulator;
  }
  createManipulatedObjectDragPipeline(t26, e27, a39) {
    if (!e27.operations) return e();
    const r25 = e27.graphic, s13 = e27.elevationInfo, o23 = e27.operations.data.spatialReference;
    return n20(e27, a39, (e28) => this.createDragPipeline((i23, a40, r26, s14, o24) => ({ steps: a40, cancel: r26 } = t26(i23, a40, r26, s14, o24), e28(i23, a40, r26)), s13, o23, r25));
  }
  createDragPipeline(t26, e27, i23, a39) {
    const r25 = this._view;
    return p13(this._manipulator, (s13, o23, n29, l26, p19) => {
      const c22 = o23.next(M5(r25, s13.elevationAlignedLocation)).next(M13(r25, s13.elevationAlignedLocation, e27, i23, a39)).next(...this._snapToScene.createDragEventPipelineStep(r25, e27)).next((t27) => ({ ...t27, manipulatorType: A12.TRANSLATE_XY })).next(j6());
      t26(s13, c22, n29, l26, p19);
    });
  }
  _updateManipulatorTransform() {
    const t26 = d3(f4.get(), o6(c4.get(), this.displayScale, this.displayScale, this.displayScale));
    this._manipulator.modelTransform = t26;
  }
  _createManipulator() {
    const t26 = this._view;
    this._manipulator = new ee({ view: t26, worldSized: false, autoScaleRenderObjects: false, focusMultiplier: 1, touchMultiplier: 1, collisionType: { type: "disc", direction: r6(0, 0, 1) }, worldOriented: true }), this._updateManipulator();
  }
  _updateManipulator() {
    const t26 = ft(this._discMaterial, h18, 1, t20, r6(0, 0, 1), r6(0, 0, 0));
    t26.transformation = d3(e6(), r6(this._radius, this._radius, this._radius)), this._manipulator.renderObjects = [new e21(t26, t14.Focused), new e21(t26.instantiate({ material: this._discMaterialTransparent }), t14.Unfocused)], this._manipulator.radius = e20 * (this._radius / a29);
  }
  _createMaterial(e27 = 1) {
    const i23 = new A6({ cullFace: e8.Back, renderOccluded: p8.Transparent, isDecoration: true });
    return this._handles.add(d2(() => h.toUnitRGBA(this._view.effectiveTheme.accentColor), (t26) => {
      t26[3] *= e27, i23.setParameters({ color: t26 });
    }, P)), i23;
  }
  get test() {
  }
};

// node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js
function f19(t26, r25 = p8.OccludeAndTransparent, o23 = true) {
  const n29 = N3(t26), i23 = !(t26[3] < 1);
  return o23 ? new x11({ color: n29, writeDepth: i23, cullFace: e8.Back, renderOccluded: r25, isDecoration: true }) : new A6({ color: n29, writeDepth: i23, cullFace: e8.Back, renderOccluded: r25, isDecoration: true });
}
function h20(t26, r25 = p8.OccludeAndTransparent) {
  const o23 = N3(t26);
  return new A6({ color: o23, writeDepth: true, cullFace: e8.Front, renderOccluded: r25, isDecoration: true });
}
var j11 = Object.freeze({ calloutLength: 40, calloutWidth: 1, discRadius: 27, focusMultiplier: 1.1 });
var b14 = Object.freeze({ autoScaleRenderObjects: false, worldSized: true });
function w9(e27, i23, a39, s13) {
  const u24 = c2(c4.get(), e27, a39), m15 = O9(u24, _4(c4.get(), s13, u24), a39, f4.get());
  h3(m15, m15);
  const p19 = E2(c4.get(), i23, m15);
  return Math.atan2(p19[1], p19[0]);
}
function O9(e27, t26, r25, n29) {
  const l26 = A2(c4.get(), e27), a39 = A2(c4.get(), t26), s13 = _4(c4.get(), l26, a39);
  return n29[0] = l26[0], n29[1] = l26[1], n29[2] = l26[2], n29[3] = 0, n29[4] = a39[0], n29[5] = a39[1], n29[6] = a39[2], n29[7] = 0, n29[8] = s13[0], n29[9] = s13[1], n29[10] = s13[2], n29[11] = 0, n29[12] = r25[0], n29[13] = r25[1], n29[14] = r25[2], n29[15] = 1, n29;
}
function D8(e27, t26) {
  const r25 = e27.getViewForGraphic(t26);
  return null != r25 && "computeAttachmentOrigin" in r25 ? r25.computeAttachmentOrigin(t26, e27.spatialReference) : null;
}
function F10(e27, t26) {
  const r25 = t26.origin;
  null == r25 ? y14(e27, t18(t26)) : e27.elevationAlignedLocation = r25;
}
function y14(e27, t26) {
  if (null == t26) return;
  const r25 = "mesh" === t26.type ? t26.origin : b7(t26);
  null != r25 && (e27.location = u9(r25));
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveZManipulation.js
var R9 = class extends t21 {
  constructor(t26) {
    super(), this._radius = a29, this.events = new i3(), this._tool = t26.tool, this._view = t26.view;
    const e27 = new j8({ getTheme: () => this._view.effectiveTheme });
    this._settings = e27, null != t26.radius && (this._radius = t26.radius);
    const r25 = this._view.effectiveTheme.accentColor;
    this._materials = { materialUnfocused: f19(C8(r25, 1, 0.25), p8.Occlude), materialFocused: f19(C8(r25, 1, 0), p8.Occlude), materialOccludedUnfocused: f19(C8(r25, 0.7, 0), e27.zManipulator.renderOccluded), materialOccludedFocused: f19(C8(r25, 0.85, 0), e27.zManipulator.renderOccluded) }, this._themeHandle = d2(() => this._view.effectiveTheme.accentColor, (t27) => {
      const e28 = C8(t27, 1, 0.25), i23 = C8(t27, 1, 0), r26 = C8(t27, 0.7, 0), a39 = C8(t27, 0.85, 0), { materialUnfocused: o23, materialFocused: s13, materialOccludedUnfocused: n29, materialOccludedFocused: l26 } = this._materials;
      o23.setParameters({ color: e28 }), s13.setParameters({ color: i23 }), n29.setParameters({ color: r26 }), l26.setParameters({ color: a39 });
    }), this._createManipulator(), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  destroy() {
    this._themeHandle = l(this._themeHandle), this._manipulator.applyObjectTransform = L6, this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    });
  }
  forEachManipulator(t26) {
    t26(this._manipulator, A12.TRANSLATE_Z);
  }
  createManipulatedObjectDragPipeline(t26, e27, i23) {
    if (!e27.operations) return e();
    const a39 = e27.operations.data.spatialReference;
    return n20(e27, i23, (e28) => this.createDragPipeline((i24, r25, a40, o23, s13) => ({ steps: r25, cancel: a40 } = t26(i24, r25, a40, o23, s13), e28(i24, r25, a40)), a39));
  }
  createDragPipeline(t26, e27) {
    const i23 = this._view;
    return p13(this._manipulator, (r25, a39, o23, s13, n29) => {
      const l26 = a39.next((t27) => ({ ...t27, manipulatorType: A12.TRANSLATE_Z })).next(G6(i23, r25.renderLocation, e27)).next(j6());
      t26(r25, l26, o23, s13, n29);
    });
  }
  get radius() {
    return this._radius;
  }
  set radius(t26) {
    t26 !== this._radius && (this._radius = t26, this._updateManipulator());
  }
  _updateManipulator() {
    const t26 = this._settings, e27 = this._radius / a29, i23 = t26.zManipulator.height * e27, r25 = t26.zManipulator.coneHeight * e27, a39 = t26.zManipulator.coneWidth * e27, o23 = t26.zManipulator.width * e27, s13 = [r6(0, 0, 0), r6(0, 0, i23)], m15 = [r6(0, 0, 0), r6(0, 0, i23 + r25)], d18 = (() => {
      const t27 = e6();
      return i4(t27, t27, [0, 0, i23]), l3(t27, t27, Math.PI / 2), t27;
    })(), { materialUnfocused: u24, materialFocused: p19, materialOccludedUnfocused: h25, materialOccludedFocused: f21 } = this._materials, _10 = pt(u24, s13, o23 / 2, 16, false), w12 = at(u24, r25, a39 / 2, 16, false);
    w12.transformation = d18, this._manipulator.renderObjects = [new e21(w12, t14.Unfocused), new e21(_10, t14.Unfocused), new e21(w12.instantiate({ material: p19 }), t14.Focused), new e21(_10.instantiate({ material: p19 }), t14.Focused), new e21(w12.instantiate({ material: h25 }), t14.Unfocused), new e21(_10.instantiate({ material: h25 }), t14.Unfocused), new e21(w12.instantiate({ material: f21 }), t14.Focused), new e21(_10.instantiate({ material: f21 }), t14.Focused)], this._manipulator.radius = o23 / 2 + 2, this._manipulator.collisionType = { type: "line", paths: [m15] };
  }
  _createManipulator() {
    const t26 = this._view, e27 = new ee({ view: t26, autoScaleRenderObjects: false, worldSized: false, selectable: false, cursor: "ns-resize", elevationInfo: this.elevationInfo, worldOriented: true, collisionPriority: 1.6 });
    e27.applyObjectTransform = (e28) => {
      const i23 = t26.state.camera, r25 = D9;
      t26.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation, r25);
      const o23 = W(i23.eye, r25), s13 = i23.computeRenderPixelSizeAtDist(o23), n29 = c2(H6, r25, i23.eye);
      A2(n29, n29);
      const l26 = S14;
      t26.renderCoordsHelper.worldUpAtPosition(D9, l26);
      const c22 = Math.abs(P3(n29, l26)), _10 = _4(H6, n29, l26), j15 = _4(H6, _10, l26), w12 = r(c22, 0.01, 1), v16 = 1 - Math.sqrt(1 - w12 * w12) / w12 / i23.fullWidth, g17 = this._settings, M18 = this._radius / a29, U9 = g17.zManipulator.width * M18;
      g4(j15, A2(j15, j15), (1 / v16 - 1) * o23 + s13 * U9), e28[12] -= H6[0], e28[13] -= H6[1], e28[14] -= H6[2];
    }, this._manipulator = e27, this._updateManipulator();
  }
  get test() {
  }
};
function C8(i23, r25, a39) {
  const o23 = I2(i23, a39);
  return o23.a *= r25, h.toUnitRGBA(o23);
}
var D9 = n3();
var H6 = n3();
var S14 = n3();
var L6 = () => {
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveManipulation.js
var u19 = class extends i17 {
  constructor(a39) {
    super(), this._handles = new r3();
    const { tool: t26, view: n29, snapToScene: e27, radius: s13 } = a39;
    this._view = n29, this.xyManipulation = new O8({ tool: t26, view: n29, snapToScene: e27, radius: s13 }), this.xyAxisManipulation = new C7({ tool: t26, view: n29, radius: s13 }), this.zManipulation = new R9({ tool: t26, view: n29, radius: s13 }), this.xyManipulation.available = a39.xyAvailable, this.xyAxisManipulation.available = a39.xyAxisAvailable, this.zManipulation.available = a39.zAvailable, this._autoHideXYAxis(), this.forEachManipulator((i23) => this._handles.add(i23.events.on("grab-changed", () => this._updateManipulatorInteractivity())));
  }
  destroy() {
    this._handles.destroy(), this.xyManipulation.destroy(), this.xyAxisManipulation.destroy(), this.zManipulation.destroy();
  }
  createManipulatedObjectDragPipeline(i23, t26, n29) {
    return t([this.xyManipulation.createManipulatedObjectDragPipeline((a39, t27, n30, e27, s13) => i23(c17.XY, a39, t27, n30, e27, s13), t26, n29), this.xyAxisManipulation.createManipulatedObjectDragPipeline((a39, t27, n30, e27, s13) => i23(c17.XY_AXIS, a39, t27, n30, e27, s13), t26, n29), this.zManipulation.createManipulatedObjectDragPipeline((a39, t27, n30, e27, s13) => i23(c17.Z, a39, t27, n30, e27, s13), t26, n29)]);
  }
  createDragPipeline(i23, t26, n29, e27) {
    return t([this.xyManipulation.createDragPipeline((a39, t27, n30, e28, s13) => i23(c17.XY, a39, t27, n30, e28, s13), t26, n29, e27), this.xyAxisManipulation.createDragPipeline((a39, t27, n30, e28, s13) => i23(c17.XY_AXIS, a39, t27, n30, e28, s13), t26, n29, e27), this.zManipulation.createDragPipeline((a39, t27, n30, e28, s13) => i23(c17.Z, a39, t27, n30, e28, s13), n29)]);
  }
  set snapToScene(i23) {
    this.xyManipulation.snapToScene = i23;
  }
  set angle(i23) {
    this.xyAxisManipulation.angle = i23;
  }
  set radius(i23) {
    this.xyAxisManipulation.radius = i23, this.xyManipulation.radius = i23, this.zManipulation.radius = i23;
  }
  set displayScale(i23) {
    this.xyManipulation.displayScale = i23, this.xyAxisManipulation.displayScale = i23;
  }
  forEachManipulator(i23) {
    this.xyManipulation.forEachManipulator((a39) => i23(a39, A12.TRANSLATE_XY)), this.xyAxisManipulation.forEachManipulator((a39) => i23(a39, A12.TRANSLATE_XY)), this.zManipulation.forEachManipulator((a39) => i23(a39, A12.TRANSLATE_Z));
  }
  get _xyAxisVisible() {
    const i23 = this.xyManipulation.someManipulator((i24) => i24.focused) || this.xyAxisManipulation.someManipulator((i24) => i24.focused);
    return this._view.inputManager && "touch" === this._view.inputManager.latestPointerType || i23;
  }
  _autoHideXYAxis() {
    const i23 = this.xyAxisManipulation, a39 = this.xyManipulation;
    if (has("esri-mobile")) return;
    const n29 = [];
    a39.forEachManipulator((i24) => n29.push(i24)), i23.forEachManipulator((i24) => n29.push(i24));
    const e27 = () => {
      const a40 = [];
      this._xyAxisVisible || i23.forEachManipulator((i24) => a40.push(i24.disableDisplay())), this._handles.remove(h21), this._handles.add(a40, h21);
    };
    for (const t26 of n29) this._handles.add(t26.events.on("focus-changed", e27));
    this._view.inputManager && this._handles.add(p(() => {
      var _a;
      return (_a = this._view.inputManager) == null ? void 0 : _a.latestPointerType;
    }, e27)), e27();
  }
  static radiusForSymbol(i23) {
    const a39 = null != i23 && "point-3d" === i23.type && i23.symbolLayers;
    return !!a39 && a39.some((i24) => "icon" === i24.type) ? o20 : a29;
  }
};
var h21 = "disable-xy-axis-display";
var c17;
!function(i23) {
  i23[i23.XY = 0] = "XY", i23[i23.XY_AXIS = 1] = "XY_AXIS", i23[i23.Z = 2] = "Z";
}(c17 || (c17 = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYObjectManipulation.js
var l17 = class extends t21 {
  constructor(t26) {
    var _a, _b;
    super(), this._view = t26.view, this._tool = t26.tool, this._object = t26.object, this._manipulator = (_b = (_a = this._object).createManipulator) == null ? void 0 : _b.call(_a, { selectable: true, cursor: "move" }), this.forEachManipulator((t27) => this._tool.manipulators.add(t27));
  }
  destroy() {
    this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    }), this._tool = null, this._view = null, this._manipulator = null;
  }
  forEachManipulator(t26) {
    this._manipulator && t26(this._manipulator, A12.TRANSLATE_XY);
  }
  createManipulatedObjectDragPipeline(t26) {
    return n20(this._object, t26, (t27) => this.createDragPipeline(t27));
  }
  createDragPipeline(e27) {
    if (!this._manipulator) return e();
    const o23 = this._view;
    return p13(this._manipulator, (t26, r25, a39, l26, p19) => {
      var _a;
      const h25 = (_a = this._object.operations) == null ? void 0 : _a.data.spatialReference, u24 = r25.next((t27) => h25 ? t27 : null).next(N8(p19, o23, this._object, h25)).next(v7()).next(j6());
      e27(t26, u24, a39, l26, p19);
    });
  }
};

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateXYTooltipInfo.js
var i19 = class extends r15 {
  constructor(o23) {
    super(o23), this.type = "translate-xy", this.distance = h10;
  }
};
r2([m()], i19.prototype, "type", void 0), r2([m()], i19.prototype, "distance", void 0), i19 = r2([a2("esri.views.interactive.tooltip.infos.TranslateXYTooltipInfo")], i19);

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateZTooltipInfo.js
var i20 = class extends r15 {
  constructor(o23) {
    super(o23), this.type = "translate-z", this.distance = h10;
  }
  clear() {
    this.distance = h10;
  }
};
r2([m()], i20.prototype, "type", void 0), r2([m()], i20.prototype, "distance", void 0), i20 = r2([a2("esri.views.interactive.tooltip.infos.TranslateZTooltipInfo")], i20);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/move/MoveTool3D.js
var L7 = class {
  constructor(t26) {
    this.objects = t26, this.type = "move-start";
  }
};
var B2 = class {
  constructor(t26, o23, e27) {
    this.dx = t26, this.dy = o23, this.objects = e27, this.type = "move";
  }
};
var N9 = class {
  constructor(t26) {
    this.objects = t26, this.type = "move-stop";
  }
};
var q9 = Symbol("manipulators");
var J3 = Symbol("tooltips");
var K4 = class extends n13 {
  constructor(t26) {
    super(t26), this._infos = /* @__PURE__ */ new Map(), this.events = new i3(), this.objects = new V(), this.enableZ = true, this.sketchOptions = new l10(), this.type = "move-3d", this._latestTooltipInfo = null, this._translateTooltipInfo = null, this._translateXYTooltipInfo = null, this._translateZTooltipInfo = null, this._updatingHandles = new h5(), this._moveManipulation = null;
  }
  initialize() {
    const { view: t26 } = this;
    this.tooltip = R4(() => ({ view: t26, options: this.sketchOptions.tooltips })), this.addHandles([this.objects.on("change", (t27) => {
      t27.removed.forEach((t28) => this.removeHandles(t28)), this._updateObjectInfos(t27), this._setupFastTransformUpdates(t27.added), this._refreshManipulators();
    }), this.objects.on("change", () => this._connectTooltips())]);
    const o23 = this.objects.toArray();
    this._updateObjectInfos({ added: o23, removed: [] }), this._setupFastTransformUpdates(o23), this._refreshManipulators(), this._connectTooltips(), this.finishToolCreation();
  }
  destroy() {
    this.tooltip = u(this.tooltip), this._moveManipulation = u(this._moveManipulation), this._set("view", null), this._updatingHandles.destroy();
  }
  onInputEvent(t26) {
    if (!this.destroyed && !O4(t26, this.tooltip)) return super.onInputEvent(t26);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get _shouldShowMovePointTooltip() {
    var _a;
    const { objects: t26 } = this;
    if (1 !== t26.length) return false;
    const o23 = (_a = t18(t26.at(0))) == null ? void 0 : _a.type;
    return "point" === o23 || "mesh" === o23;
  }
  get activeTooltipInfo() {
    return this._shouldShowMovePointTooltip ? this._movePointTooltipInfo : this._latestTooltipInfo;
  }
  reset() {
  }
  _updateObjectInfos({ added: t26, removed: o23 }) {
    for (const e27 of t26) {
      if (r16(e27) !== P6.SUPPORTED) continue;
      const t27 = new Q4(e27);
      this._infos.set(e27, t27);
    }
    for (const e27 of o23) this._infos.delete(e27);
  }
  _setupFastTransformUpdates(t26) {
    for (const o23 of t26) {
      const t27 = this._infos.get(o23);
      this.addHandles(a27(t27.object), o23);
    }
  }
  _refreshManipulators() {
    if (this.removeHandles(q9), this._moveManipulation = u(this._moveManipulation), this.manipulators.removeAll(), 0 === this._infos.size) return;
    const t26 = Array.from(this._infos.values());
    this._createManipulators(t26), this._createVisualElements(t26), this._updateMoveManipulation(t26);
  }
  _createManipulators(t26) {
    for (const o23 of t26) {
      const e27 = o23.object;
      o23.manipulationXY = new l17({ tool: this, view: this.view, object: e27 }), o23.manipulationXY.forEachManipulator((t27) => {
        this.addHandles([t27.events.on("immediate-click", (t28) => {
          this.events.emit("immediate-click", { ...t28, object: e27 }), t28.stopPropagation();
        }), t27.events.on("grab-changed", ({ action: t28 }) => {
          "start" === t28 ? this._showTooltip(c17.XY) : this._hideTooltip();
        })], q9);
      }), this.addHandles(o23.manipulationXY.createDragPipeline((o24, e28, i23, n29) => this._buildDragEventPipeline(t26, c17.XY, o24, e28, i23, n29)), q9);
    }
    this._createMoveManipulation(t26);
  }
  _createMoveManipulation(t26) {
    var _a;
    const o23 = new u19({ tool: this, view: this.view, snapToScene: false, xyAvailable: true, xyAxisAvailable: true, zAvailable: true, radius: 1 === t26.length ? u19.radiusForSymbol((_a = t26[0].object.graphic) == null ? void 0 : _a.symbol) : a29 });
    this._moveManipulation = o23, o23.elevationInfo = { mode: "absolute-height", offset: 0 }, o23.forEachManipulator((t27) => {
      this.addHandles(t27.events.on("immediate-click", (e28) => {
        const i24 = this.objects.at(0);
        !o23.zManipulation.hasManipulator(t27) && 1 === this.objects.length && i24 && this.events.emit("immediate-click", { ...e28, object: i24 }), e28.stopPropagation();
      }), q9);
    });
    const e27 = (t27) => (o24) => {
      this.addHandles([o24.events.on("focus-changed", ({ action: o25 }) => {
        "focus" === o25 ? this._showTooltip(t27) : this._hideTooltip();
      }), o24.events.on("grab-changed", () => {
        this._latestTooltipInfo && (this._latestTooltipInfo.distance = h10);
      })], q9);
    };
    this._moveManipulation.xyManipulation.forEachManipulator(e27(c17.XY)), this._moveManipulation.xyAxisManipulation.forEachManipulator(e27(c17.XY_AXIS)), this._moveManipulation.zManipulation.forEachManipulator(e27(c17.Z));
    const i23 = () => this._updateMoveManipulation(t26);
    for (const a39 of t26) this.addHandles([a39.object.on("committed", i23), d2(() => a39.object.visible, i23)], q9);
    const n29 = t26[t26.length - 1];
    this.addHandles(n29.object.on("committed", () => this._updateMoveManipulationAngle(n29)), q9);
    const { object: s13 } = n29, { operations: l26 } = s13;
    if (l26) {
      const e28 = s13.graphic;
      this.addHandles(o23.createDragPipeline((o24, e29, i24, n30, s14) => this._buildDragEventPipeline(t26, o24, e29, i24, n30, s14), s13.elevationInfo, l26.data.spatialReference, e28), q9);
    }
    this._updateMoveManipulationAngle(n29);
  }
  _createVisualElements(t26) {
    for (const o23 of t26) {
      const e27 = o23.object, i23 = l15({ view: this.view, object: e27, forEachManipulator: (t27) => {
        var _a, _b;
        (_a = o23.manipulationXY) == null ? void 0 : _a.forEachManipulator(t27), (_b = this._moveManipulation) == null ? void 0 : _b.forEachManipulator(t27);
      }, onManipulatorsChanged: () => e() });
      null != i23 && (o23.geometryRepresentation = i23.visualElement, o23.geometryRepresentation instanceof j9 && this.addHandles([o23.geometryRepresentation.events.on("attachment-origin-changed", () => {
        o23.object.isDraped || this._updateMoveManipulation(t26);
      }), d2(() => o23.object.isDraped, () => this._updateMoveManipulation(t26))], q9), this.addHandles(i23, q9));
    }
  }
  _updateMoveManipulationAngle(t26) {
    this._moveManipulation && (this._moveManipulation.angle = r19(t18(t26.object)));
  }
  _updateMoveManipulation(t26) {
    const o23 = e7(0, 0, 0, this.view.spatialReference);
    let e27 = 0, i23 = false;
    const n29 = this._moveManipulation;
    if (n29) {
      for (const n30 of t26) {
        if (!n30.object.visible) continue;
        this.enableZ && o19(n30.object.operations, n30.object.elevationInfo) && (i23 = true);
        const t27 = n30.geometryRepresentation instanceof j9 && !n30.object.isDraped ? n30.geometryRepresentation.attachmentOrigin : n30.object.origin;
        if (null != t27) {
          const { x: i24, y: n31, z: s13 } = t27;
          o23.x += i24, o23.y += n31, s13 && (o23.z ?? (o23.z = 0), o23.z += s13), e27++;
        }
      }
      e27 > 0 ? (o23.x /= e27, o23.y /= e27, o23.z ?? (o23.z = 0), o23.z /= e27, n29.location = o23, n29.xyManipulation.available = true, n29.xyAxisManipulation.available = true, n29.zManipulation.available = i23) : n29.available = false;
    }
  }
  _buildDragEventPipeline(t26, o23, e27, i23, n29, s13) {
    const a39 = [], l26 = [];
    let r25 = null, p19 = null;
    const c22 = () => {
      for (const t27 of a39) t27.dragging = false;
      a39.length = 0, l26.length = 0, r25 = null, p19 = null, this._moveManipulation && (this._moveManipulation.interactive = true);
    };
    if (1 === t26.length && o23 === c17.XY) {
      const o24 = t26[0].object;
      ({ steps: i23, cancel: n29 } = this._buildSnappingPipelineSteps(o24, o24.elevationInfo, i23, n29, s13));
    }
    return n29 = n29.next((t27) => p19 == null ? void 0 : p19(t27)).next(() => (l26.length && this.events.emit("move-stop", new N9(l26)), this.destroyed || c22(), null)), { steps: i23 = i23.next((o24) => {
      var _a, _b;
      if ("start" === o24.action) {
        a39.length = 0, l26.length = 0;
        for (const o25 of t26) o25.dragging || !((_a = o25.manipulationXY) == null ? void 0 : _a.hasManipulator(e27)) && ((_b = o25.manipulationXY) == null ? void 0 : _b.grabbing) || (a39.push(o25), l26.push(o25.object), o25.dragging = true);
        if (0 !== l26.length && (this._moveManipulation && (this._moveManipulation.interactive = false), r25 = S4(l26), p19 = z4(l26), this._emitRecordUndo(), this.events.emit("move-start", new L7(l26)), this.destroyed)) return null;
      }
      return 0 !== l26.length ? o24 : null;
    }).next((t27) => r25 == null ? void 0 : r25(t27)).next((t27) => (this._updateMoveTooltip(o23, t27), t27)).next((t27) => {
      switch (t27.action) {
        case "start":
        case "update":
          if (t27.translationX || t27.translationY || t27.translationZ) {
            const o24 = this.view.toScreen(t27.mapStart), e28 = this.view.toScreen(t27.mapEnd);
            if (!o24 || !e28) return null;
            const i24 = e28.x - o24.x, n30 = e28.y - o24.y;
            if (this.events.emit("move", new B2(i24, n30, l26)), this.destroyed) return null;
          }
          break;
        case "end":
          if (this.events.emit("move-stop", new N9(l26)), this.destroyed) return null;
          c22();
      }
      return null;
    }), cancel: n29 };
  }
  _connectTooltips() {
    let t26;
    if (this.removeHandles(J3), this._shouldShowMovePointTooltip) {
      const o23 = this.objects.at(0), { events: e27 } = this;
      this._movePointTooltipInfo ?? (this._movePointTooltipInfo = new i13({ viewType: this.view.type, sketchOptions: this.sketchOptions }));
      const i23 = { onBeforeUpdate: () => this.endDrag(), onMoveStart: () => {
        this._emitRecordUndo(), e27.emit("move-start", new L7([o23]));
      }, onMove: () => e27.emit("move", new B2(0, 0, [o23])), onMoveStop: () => e27.emit("move-stop", new N9([o23])), onRotateStart: () => {
      }, onRotate: () => {
      }, onRotateStop: () => {
      }, onScaleStart: () => {
      }, onScale: () => {
      }, onScaleStop: () => {
      } };
      t26 = m11(this.tooltip, o23, () => ({ sketchOptions: this.sketchOptions, activeTooltipInfo: this._movePointTooltipInfo, callbacks: i23 }));
    } else t26 = d2(() => this.sketchOptions.tooltips.effectiveEnabled ? this._latestTooltipInfo : null, (t27) => {
      this.tooltip.info = t27;
    }, A);
    this.addHandles(t26, J3);
  }
  _showTooltip(t26) {
    this._shouldShowMovePointTooltip || this._updateMoveTooltip(t26);
  }
  _hideTooltip() {
    var _a;
    this._shouldShowMovePointTooltip || ((_a = this.tooltip) == null ? void 0 : _a.clear(), this._latestTooltipInfo = null);
  }
  _updateMoveTooltip(t26, o23) {
    if (this._shouldShowMovePointTooltip) return;
    const { sketchOptions: e27 } = this;
    switch (t26) {
      case c17.XY:
        this._latestTooltipInfo = this._translateTooltipInfo ?? (this._translateTooltipInfo = new i14({ sketchOptions: e27 })), W5(this._latestTooltipInfo, o23, (t27, o24) => m5(t27, o24));
        break;
      case c17.XY_AXIS:
        this._latestTooltipInfo = this._translateXYTooltipInfo ?? (this._translateXYTooltipInfo = new i19({ sketchOptions: e27 })), W5(this._latestTooltipInfo, o23, (t27, e28) => y8(m5(t27, e28), a30(o23)));
        break;
      case c17.Z:
        this._latestTooltipInfo = this._translateZTooltipInfo ?? (this._translateZTooltipInfo = new i20({ sketchOptions: e27 })), W5(this._latestTooltipInfo, o23, y10);
    }
    this._latestTooltipInfo.sketchOptions = e27;
  }
  _emitRecordUndo() {
    const t26 = this.objects.toArray().map((t27) => {
      var _a;
      return (_a = t27.createUndoRecord) == null ? void 0 : _a.call(t27);
    }).filter(G);
    t26.length > 0 && this.events.emit("record-undo", { updates: t26 });
  }
  _buildSnappingPipelineSteps(t26, o23, e27, i23, n29) {
    const s13 = t18(t26);
    if (null == s13 || "point" !== s13.type && "mesh" !== s13.type) return { steps: e27, cancel: i23 };
    const a39 = ("point" === s13.type ? s13 : s13.origin).clone(), l26 = new e14({ elevationInfo: o23, pointer: n29, editGeometryOperations: E9.fromGeometry(a39, this.view.state.viewingMode), visualizer: new R8(), excludeFeature: t26.graphic }), r25 = this.snappingManager, { snappingStep: p19, cancelSnapping: c22 } = f13({ snappingContext: l26, snappingManager: r25, updatingHandles: this._updatingHandles });
    return i23 = i23.next(c22), { steps: e27 = e27.next((o24) => {
      a39.z = m3(this.view, a39, t26.elevationInfo, { mode: "absolute-height", offset: 0 });
      return { ...o24, snapOrigin: l26.coordinateHelper.pointToVector(a39) };
    }).next(...p19), cancel: i23 };
  }
};
r2([m({ constructOnly: true, nonNullable: true })], K4.prototype, "view", void 0), r2([m()], K4.prototype, "objects", void 0), r2([m({ constructOnly: true, nonNullable: true })], K4.prototype, "enableZ", void 0), r2([m({ constructOnly: true, type: l10 })], K4.prototype, "sketchOptions", void 0), r2([m({ constructOnly: true })], K4.prototype, "snappingManager", void 0), r2([m()], K4.prototype, "type", void 0), r2([m()], K4.prototype, "updating", null), r2([m()], K4.prototype, "_latestTooltipInfo", void 0), r2([m()], K4.prototype, "_shouldShowMovePointTooltip", null), r2([m()], K4.prototype, "activeTooltipInfo", null), K4 = r2([a2("esri.views.3d.interactive.editingTools.move.MoveTool3D")], K4);
var Q4 = class {
  constructor(t26) {
    this.object = t26, this.geometryRepresentation = null, this.manipulationXY = null, this.dragging = false;
  }
};
function W5(t26, o23, e27) {
  if (null == o23 || "end" === o23.action) return void (t26.distance = h10);
  const { mapStart: i23, mapEnd: n29 } = o23, s13 = e27(i23, n29);
  t26.distance = null != s13 ? s13 : h10;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/edgeOffsetUtils.js
function U5(e27, r25, o23) {
  const t26 = "on-the-ground" === o23.mode ? z3.XY : z3.XYZ;
  return new P5(e27, t26, r25, 0);
}
function w10(e27, r25, o23) {
  const t26 = n3();
  if (!e27.renderCoordsHelper.toRenderCoords(r25, t26)) return null;
  const n29 = T10(e27, r25, O3(o23.plane)), i23 = T10(e27, r25, o23.edgeDirection);
  if (null == n29 || null == i23) return null;
  const c22 = _4(n3(), n29, i23);
  return l5(t26, c22, M2());
}
function T10(e27, r25, o23) {
  const t26 = e7(r25.x + o23[0], r25.y + o23[1], r25.z + o23[2], r25.spatialReference), n29 = n3(), s13 = n3();
  return e27.renderCoordsHelper.toRenderCoords(r25, n29) && e27.renderCoordsHelper.toRenderCoords(t26, s13) ? K(s13, n29, s13) : null;
}
function b15(e27, r25, o23) {
  const t26 = O3(e27), c22 = K(n3(), r25, o23), l26 = _4(n3(), c22, t26), a39 = _4(n3(), c22, l26);
  return t7(c22[0], c22[1], c22[2], 0, l26[0], l26[1], l26[2], 0, a39[0], a39[1], a39[2], 0, 0, 0, 0, 1);
}
function q10(e27, o23, t26) {
  const n29 = t26.projectToRenderScreen(e27, y2()), s13 = t26.projectToRenderScreen(o23, y2());
  return null != n29 && null != s13 ? j3(c2(n29, n29, s13)) : 0;
}
function A14(e27, r25, t26, n29) {
  const { elevationInfo: s13, operations: i23 } = t26;
  if (!i23 || !e27) return null;
  const c22 = n29.manipulator.elevationAlignedLocation, l26 = p10(c22, r25, s13), a39 = r25.sceneIntersectionHelper.intersectElevationFromScreen(f2(e27.x, e27.y), s13, l26);
  return a39 && nn(a39, a39, i23.data.spatialReference) ? a39 : null;
}
function I8(r25, o23, n29, { data: { coordinateHelper: s13, spatialReference: i23 } }) {
  const c22 = f10(r25, "meters"), l26 = Q(i23), m15 = Math.sign(c22 * n29.selectedArrow), h25 = N(i23), R13 = O3(n29.plane), v16 = s13.pointToXYZ(o23), x15 = n3();
  q5(x15, v16, R13, m15 * (M14 / l26));
  const C11 = c22 * n29.selectedArrow / l26;
  if (!h25 || !n8(v16, i23, v16, h25) || !n8(x15, i23, x15, h25)) return C11;
  const H9 = new b();
  if (q2(H9, v16, x15, h25), j2(x15, v16, H9.azimuth, c22, h25), !n8(x15, h25, x15, i23)) return C11;
  const U9 = x15[0] - o23.x, w12 = x15[1] - o23.y, T12 = Math.sqrt(U9 * U9 + w12 * w12) * m15, [b20, q12] = R13, A16 = Math.sqrt(b20 * b20 + q12 * q12);
  return 0 === A16 ? 0 : T12 / A16;
}
var M14 = 10;

// node_modules/@arcgis/core/views/interactive/tooltip/infos/ReshapeEdgeOffsetTooltipInfo.js
var a31 = class extends r15 {
  constructor(t26) {
    super(t26), this.type = "reshape-edge-offset", this.distance = x6({ lockable: false }), this.area = Q2({ visible: false }), this.totalLength = w4({ visible: false });
  }
  get allFields() {
    return [this.distance, this.area, this.totalLength];
  }
};
r2([m()], a31.prototype, "type", void 0), r2([m()], a31.prototype, "distance", void 0), r2([m()], a31.prototype, "area", void 0), r2([m()], a31.prototype, "totalLength", void 0), r2([m()], a31.prototype, "allFields", null), a31 = r2([a2("esri.views.interactive.tooltip.infos.ReshapeEdgeOffsetTooltipInfo")], a31);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/reshapeTooltipUtils3D.js
function x13(t26, e27) {
  const o23 = e27 == null ? void 0 : e27.type;
  return { edgeOffset: new a31({ sketchOptions: t26, viewType: o23 }), movePoint: new i13({ sketchOptions: t26, viewType: o23 }), selectedVertex: new p15({ sketchOptions: t26, viewType: o23 }), translate: new i14({ sketchOptions: t26, viewType: o23 }), translateXY: new i19({ sketchOptions: t26, viewType: o23 }), translateZ: new i20({ sketchOptions: t26, viewType: o23 }) };
}
function M15(e27, o23, r25) {
  function l26() {
    const t26 = r25(), e28 = t26.sketchOptions.tooltips.effectiveEnabled ? t26.activeTooltipInfo : null;
    return { ...t26, activeTooltipInfo: e28 };
  }
  let p19 = false;
  function c22(t26) {
    p19 || (p19 = true, t26(), p19 = false);
  }
  function f21(t26) {
    c22(() => {
      E13(o23, t26), e27.info = t26.activeTooltipInfo;
    });
  }
  return t([d2(l26, f21, A), d2(() => {
    const t26 = l26(), { activeTooltipInfo: e28 } = t26;
    if (e28 && "key" in e28) return { context: t26, activeTooltipInfo: e28, key: e28.key, geometry: t18(o23) };
  }, (t26, e28) => {
    t26 && e28 && e28.key !== t26.key && c22(() => U6(o23, t26.context));
  }, C), o23.on("committed", () => f21(l26())), G3(e27, { onBeforePaste: () => {
    p19 = true;
  }, onAfterPaste: () => {
    U6(o23, l26()), p19 = false;
  } })]);
}
function U6(t26, { activeTooltipInfo: e27, selectedVertexManipulatorInfo: o23, callbacks: n29 }) {
  if (!e27) return;
  n29.onBeforeReshape();
  const i23 = t18(t26);
  switch (i23 == null ? void 0 : i23.type) {
    case "mesh":
      "move-point" === e27.type && d14(e27, i23.origin, t26, n29);
      break;
    case "point":
      "move-point" === e27.type && d14(e27, i23, t26, n29);
      break;
    case "polyline":
    case "polygon":
      "selected-vertex" === e27.type && L8(e27, o23, t26, n29);
  }
}
function L8(t26, e27, o23, n29) {
  var _a;
  if (!e27) return;
  const { dx: i23, dy: a39, dz: s13 } = F5(t26, e27.manipulator.location);
  0 === i23 && 0 === a39 && 0 === s13 || (n29.onReshapeStart(), (_a = o23.operations) == null ? void 0 : _a.moveVertices([e27.handle], i23, a39, s13, E8.NEW_STEP), n29.onReshape(), n29.onReshapeStop());
}
function E13(t26, { activeTooltipInfo: e27, selectedVertexManipulatorInfo: o23, sketchOptions: n29 }) {
  if (e27) switch (e27.sketchOptions = n29, e27 == null ? void 0 : e27.type) {
    case "move-point":
      y12(e27, t26);
      break;
    case "selected-vertex":
      S15(e27, o23, t26);
  }
}
function S15(t26, e27, o23) {
  var _a;
  if (!t26 || "selected-vertex" !== t26.type) return;
  const n29 = e27 == null ? void 0 : e27.manipulator.location;
  t26.setLocationFromPoint(n29), h17(t26, n29, o23);
  const i23 = (_a = o23.operations) == null ? void 0 : _a.data.geometry;
  switch (i23 == null ? void 0 : i23.type) {
    case "polygon":
      t26.geometryType = "polygon", t26.totalLength.visible = false, t26.area.actual = u12(i23);
      break;
    case "polyline":
      t26.geometryType = "polyline", t26.totalLength.actual = c9(i23), t26.area.visible = false;
  }
}
function P16(t26, e27, { sketchOptions: n29, tooltipInfos: i23 }) {
  let a39 = null;
  switch (t26) {
    case c17.XY:
      a39 = i23.translate, R10(a39, e27, (t27, e28) => m5(t27, e28));
      break;
    case c17.XY_AXIS:
      a39 = i23.translateXY, R10(a39, e27, (t27, n30) => y8(m5(t27, n30), a30(e27)));
      break;
    case c17.Z:
      a39 = i23.translateZ, R10(a39, e27, y10);
  }
  return a39.sketchOptions = n29, a39;
}
function R10(t26, o23, n29) {
  if (null != o23 && "end" !== o23.action) {
    const { mapStart: i23, mapEnd: a39 } = o23, s13 = n29(i23, a39);
    t26.distance = null != s13 ? s13 : h10;
  } else t26.distance = h10;
}
function X2({ operations: t26 }, n29, { sketchOptions: i23, tooltipInfos: a39 }) {
  const s13 = a39.edgeOffset;
  if (s13.distance.committed = null, null != n29 && null != n29.signedDistance && "end" !== n29.action && null != t26) {
    const e27 = t26.data.coordinateHelper, { start: i24, end: a40 } = n29.operation.clampedStartAndEnd(n29.mapEnd), r26 = u13(i24, a40, e27.spatialReference), l26 = Math.sign(n29.signedDistance * n29.operation.selectedArrow);
    s13.distance.actual = null != r26 ? y8(r26, l26) : null;
  } else s13.distance.actual = h10;
  const r25 = t26 == null ? void 0 : t26.data.geometry;
  switch (s13.area.actual = null, s13.area.visible = false, s13.totalLength.actual = null, s13.totalLength.visible = false, r25 == null ? void 0 : r25.type) {
    case "polygon":
      s13.area.actual = u12(r25), s13.area.visible = true;
      break;
    case "polyline":
      s13.totalLength.actual = c9(r25), s13.totalLength.visible = true;
  }
  return s13.sketchOptions = i23, s13;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeOperation.js
var Ie = Symbol();
var Se = class extends g {
  get _operations() {
    return this.object.operations;
  }
  constructor(e27) {
    super(e27), this._selectedIndex = 0, this._manipulatorHandles = new r3(), this._manipulatorInfos = [], this._numGrabbing = 0, this._numDragging = 0, this._reshapeEventState = Ce.NONE, this._pendingEdgeOffsetInfo = null, this._updatingHandles = new h5(), this._recreatingManipulators = false, this._settings = new j8({ getTheme: () => this.view.effectiveTheme }), this.events = new i3(), this.activeTooltipInfo = null, this._vertexLaserLineVisualElement = null, this._tooltipCallbacks = { onBeforeReshape: () => this.tool.endDrag(), onReshapeStart: () => this._updateEventState(Ce.RESHAPING), onReshape: () => this.events.emit("reshape", { type: "reshape", object: this.object }), onReshapeStop: () => this._updateEventState(Ce.NONE, { forceEnd: true }), onMoveStart: () => this._updateEventState(Ce.MOVING), onMove: () => this.events.emit("move", { type: "move", object: this.object, dx: 0, dy: 0 }), onMoveStop: () => this._updateEventState(Ce.NONE, { forceEnd: true }) };
  }
  initialize() {
    const { view: e27 } = this, t26 = this._settings.manipulators, i23 = t26.vertex;
    this.tooltipInfos = x13(this._sketchOptions, e27), this._vertexManipulatorMaterial = f19(F3(i23.color), i23.renderOccluded), this._vertexManipulatorOutlineMaterial = h20(F3(i23.outlineColor), i23.renderOccluded), this._vertexManipulatorHoverOutlineMaterial = h20(F3(i23.hoverOutlineColor), i23.renderOccluded);
    const a39 = t26.edge;
    this._edgeManipulatorMaterial = f19(F3(a39.color), a39.renderOccluded), this._edgeManipulatorOutlineMaterial = h20(F3(a39.outlineColor), a39.renderOccluded);
    const o23 = t26.edgeOffset;
    this._edgeOffsetManipulatorMaterial = f19(F3(o23.color), o23.renderOccluded, false), this._edgeOffsetManipulatorHoverMaterial = f19(F3(o23.hoverColor), o23.renderOccluded, false);
    const s13 = t26.selected;
    this._selectedManipulatorMaterial = f19(F3(s13.color), s13.renderOccluded), this._selectedManipulatorOutlineMaterial = h20(F3(s13.outlineColor), s13.renderOccluded), this._selectedManipulatorHoverOutlineMaterial = h20(F3(s13.hoverOutlineColor), s13.renderOccluded), this.tooltip = R4(() => ({ view: e27, options: this._sketchOptions.tooltips })), this.addHandles([d2(() => {
      const e28 = this._settings.manipulators;
      return { vertexSettings: e28.vertex, edgeSettings: e28.edge, edgeOffsetSettings: e28.edgeOffset, selectedSettings: e28.selected };
    }, ({ vertexSettings: e28, edgeSettings: t27, edgeOffsetSettings: i24, selectedSettings: n29 }) => {
      e28.applyColor(this._vertexManipulatorMaterial), e28.applyOutline(this._vertexManipulatorOutlineMaterial), e28.applyHoverOutline(this._vertexManipulatorHoverOutlineMaterial), t27.applyColor(this._edgeManipulatorMaterial), t27.applyOutline(this._edgeManipulatorOutlineMaterial), i24.applyColor(this._edgeOffsetManipulatorMaterial), i24.applyHover(this._edgeOffsetManipulatorHoverMaterial), n29.applyColor(this._selectedManipulatorMaterial), n29.applyOutline(this._selectedManipulatorOutlineMaterial), n29.applyHoverOutline(this._selectedManipulatorHoverOutlineMaterial);
    }), d2(() => this.object.visible, (e28) => {
      for (const t27 of this._manipulatorInfos) t27.manipulator.available = e28, Ae(t27) && (t27.edgeManipulator.available = e28);
    }), d2(() => this._numGrabbing + this._numDragging === 0, (e28) => this._toggleAutoHideManipulators(e28)), d2(() => ({ labels: this._segmentLabels, enabled: this._sketchOptions.labels.enabled, edgeOffsetEnabled: this.enableEdgeOffset }), ({ labels: e28, enabled: t27, edgeOffsetEnabled: i24 }) => {
      null != e28 && (e28.visible = t27, e28.edgeDistance = i24 ? "far" : "default");
    }, P), M15(this.tooltip, this.object, () => this._tooltipsContext), d2(() => this.tooltip.mode, (e28, t27) => {
      "input" === t27 && "input" !== e28 && this._resetTooltip();
    }), v(() => this._operations, "vertex-update", (e28) => this._updateManipulatorPositions(e28.vertices), { onListenerAdd: () => this._recreateManipulators() }), v(() => {
      var _a;
      return (_a = this._operations) == null ? void 0 : _a.data;
    }, "change", (e28) => {
      "undo" !== e28.operation && "redo" !== e28.operation || this._recreateManipulators();
    })]);
  }
  destroy() {
    this._removeManipulators(), this._updatingHandles.destroy(), this._segmentLabels = u(this._segmentLabels), this.tooltip = u(this.tooltip);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get manipulators() {
    return this.tool.manipulators;
  }
  get view() {
    return this.tool.view;
  }
  get object() {
    return this.tool.object;
  }
  get enableZShape() {
    return this.tool.enableZShape;
  }
  get enableDeleteVertices() {
    return this.tool.enableDeleteVertices;
  }
  get enableZVertex() {
    return this.tool.enableZVertex;
  }
  get autoHideManipulators() {
    return this.tool.autoHideManipulators;
  }
  get enableMoveObject() {
    return this.tool.enableMoveObject;
  }
  get enableMidpoints() {
    return this.tool.enableMidpoints;
  }
  get enableEdgeOffset() {
    return this.tool.enableEdgeOffset;
  }
  get _sketchOptions() {
    return this.tool.sketchOptions;
  }
  get _accentColor() {
    return this.view.effectiveTheme.accentColor;
  }
  enterInputModeIfAvailable(e27) {
    var _a;
    return "key-down" === e27.type && e27.key === f11.enterInputMode && ("reshape-edge-offset" === ((_a = this.activeTooltipInfo) == null ? void 0 : _a.type) ? this._enterInputModeDuringEdgeOffset(e27) : !!O4(e27, this.tooltip) && (this.tool.endDrag(), true));
  }
  removeSelectedVertices() {
    const e27 = this._manipulatorInfos.filter((e28) => e28.manipulator.selected && "vertex" === e28.type);
    return this._removeVertices(e27), e27.length;
  }
  onManipulatorSelectionChanged() {
    this.events.emit("manipulators-changed");
  }
  _removeManipulators() {
    this._manipulatorHandles.removeAll(), this._moveManipulation = u(this._moveManipulation), this._objectMoveManipulation = u(this._objectMoveManipulation), this.manipulators.removeAll(), this._manipulatorInfos = [], this._numGrabbing = 0, this._numDragging = 0;
  }
  _createManipulators(e27) {
    if (null == this._operations) return;
    const t26 = this.object.elevationInfo;
    for (const i23 of this._operations.data.components) {
      const n29 = e27 == null ? void 0 : e27.byComponentIndex.get(i23.index);
      for (const e28 of i23.vertices) {
        const i24 = n29 == null ? void 0 : n29.has(e28.index);
        this._createVertexOrEdgeManipulator(e28, t26, i24);
      }
      for (const e28 of i23.edges) this._createVertexOrEdgeManipulator(e28, t26);
    }
    this._createObjectMoveManipulation(), this._createMoveManipulation(t26), this._createVisualElements();
  }
  get canRedo() {
    return null != this._operations && this._operations.canRedo;
  }
  get canUndo() {
    return null != this._operations && this._operations.canUndo;
  }
  redo() {
    var _a;
    return (_a = this._operations) == null ? void 0 : _a.redo();
  }
  undo() {
    var _a;
    return this.events.emit("undo"), (_a = this._operations) == null ? void 0 : _a.undo();
  }
  _recreateManipulators() {
    var _a, _b;
    if (!this._recreatingManipulators) {
      if (this._recreatingManipulators = true, this._removeManipulators(), this._resetTooltip(), this._operations && ((_b = (_a = this._segmentLabels) == null ? void 0 : _a.context) == null ? void 0 : _b.editGeometryOperations) === this._operations || (this._segmentLabels = u(this._segmentLabels)), this._createManipulators(), !this._segmentLabels && this._operations) {
        const e27 = this._sketchOptions.labels;
        this._segmentLabels = new a21({ context: { view: this.view, editGeometryOperations: this._operations, elevationInfo: this.object.elevationInfo, labelOptions: e27 }, visible: e27.enabled });
      }
      this._recreatingManipulators = false;
    }
  }
  _perObjectManipulatorDragAction(e27, t26) {
    if ("end" === t26.action) return t26;
    let i23 = 0;
    const n29 = [], a39 = this._manipulatorInfos.some((e28) => "vertex" === e28.type && e28.manipulator.selected), o23 = e27 === Ne.SELECTED_OR_ALL && a39;
    for (const s13 of this._manipulatorInfos) "vertex" === s13.type && (s13.manipulator.grabbing || o23 && !s13.manipulator.selected || n29.push(s13), i23++);
    this._moveVertices(n29, t26);
    if (n29.length === i23) {
      if (this._updateEventState(Ce.MOVING), this.destroyed) return t26;
      this.events.emit("move", { type: "move", dx: t26.screenDeltaX, dy: t26.screenDeltaY, object: this.object });
    } else {
      if (this._updateEventState(Ce.RESHAPING), this.destroyed) return t26;
      this.events.emit("reshape", { type: "reshape", object: this.object });
    }
    return t26;
  }
  _toggleAutoHideManipulators(e27) {
    this.autoHideManipulators && (e27 ? this.removeHandles(Ie) : this.tool.manipulators.forEach(({ manipulator: e28 }) => {
      var _a;
      const t26 = (_a = e28.disableDisplay) == null ? void 0 : _a.call(e28);
      t26 && this.addHandles(t26, Ie);
    }));
  }
  _isMultiVertexSelection() {
    return this._manipulatorInfos.reduce((e27, t26) => "vertex" === t26.type && t26.manipulator.selected ? e27 + 1 : e27, 0) > 1;
  }
  _perVertexManipulatorDragAction(e27) {
    if (this._updateEventState(Ce.RESHAPING), this.destroyed) return;
    const { mapDeltaX: t26, mapDeltaY: i23, mapDeltaZ: n29 } = e27;
    if (!t26 && !i23 && !n29) return;
    const a39 = [];
    for (const o23 of this._manipulatorInfos) "vertex" === o23.type && (o23.manipulator.selected && !o23.manipulator.grabbing || o23 === e27.info) && a39.push(o23);
    this._moveVertices(a39, e27, E8.ACCUMULATE_STEPS), this.events.emit("reshape", { type: "reshape", object: this.object });
  }
  _updateEventState(e27, t26 = {}) {
    if (e27 === this._reshapeEventState) return false;
    switch (e27) {
      case Ce.NONE:
        if (!t26.forceEnd && (0 !== this._numGrabbing || 0 !== this._numDragging)) return false;
        switch (this._reshapeEventState) {
          case Ce.MOVING:
            this.events.emit("move", { type: "move-stop", dx: 0, dy: 0, object: this.object });
            break;
          case Ce.RESHAPING:
            this.events.emit("reshape", { type: "reshape-stop", object: this.object });
        }
        break;
      case Ce.MOVING:
        switch (this._reshapeEventState) {
          case Ce.NONE:
            this.events.emit("move", { type: "move-start", dx: 0, dy: 0, object: this.object });
            break;
          case Ce.RESHAPING:
            this.events.emit("reshape", { type: "reshape-stop", object: this.object }), this.destroyed || this.events.emit("move", { type: "move-start", dx: 0, dy: 0, object: this.object });
        }
        break;
      case Ce.RESHAPING:
        switch (this._reshapeEventState) {
          case Ce.NONE:
            this.events.emit("reshape", { type: "reshape-start", object: this.object });
            break;
          case Ce.MOVING:
            this.events.emit("move", { type: "move-stop", dx: 0, dy: 0, object: this.object }), this.destroyed || this.events.emit("reshape", { type: "reshape-start", object: this.object });
        }
    }
    if (this.destroyed) return false;
    const i23 = this._reshapeEventState !== e27;
    return this._reshapeEventState = e27, i23;
  }
  _createObjectMoveManipulation() {
    const { tool: e27, view: t26, object: i23, _operations: n29 } = this;
    if (n29) {
      if (this._objectMoveManipulation = new l17({ tool: e27, view: t26, object: i23 }), this.enableMoveObject) {
        let e28 = null;
        this._manipulatorHandles.add(this._objectMoveManipulation.createDragPipeline((t27, i24, a39) => {
          i24.next((e29) => this._trackNumDragging(e29)).next((t28) => ("start" === t28.action && (e28 = n29.createUndoGroup()), t28)).next((e29) => this._perObjectManipulatorDragAction(Ne.ALL, e29)).next((e29) => (this._updateTranslateObjectTooltip(c17.XY, e29), e29)).next((t28) => {
            "end" === t28.action && (this._resetTooltip(), e28 = l(e28));
          }), a39.next(() => this._onDragCancel(true, () => e28 = l(e28)));
        })), this._objectMoveManipulation.forEachManipulator((e29) => this._manipulatorHandles.add(this._watchAndUpdateGrabState(e29, false)));
      } else this._objectMoveManipulation.forEachManipulator((e28) => {
        e28.grabbable = false, e28.cursor = null;
      });
      this._objectMoveManipulation.forEachManipulator((e28) => this._manipulatorHandles.add(e28.events.on("immediate-click", (e29) => {
        this._manipulatorInfos.some((e30) => e30.manipulator.selected) ? this._clearSelection() : this.events.emit("immediate-click", { ...e29, object: this.object }), e29.stopPropagation();
      })));
    }
  }
  _createMoveManipulation(e27) {
    var _a;
    const { object: t26, tool: i23, view: n29, _operations: a39 } = this;
    if (!a39) return;
    this._moveManipulation = new u19({ tool: i23, view: n29, xyAvailable: true, xyAxisAvailable: true, zAvailable: this.enableZShape && o19(t26.operations, t26.elevationInfo), snapToScene: false, radius: u19.radiusForSymbol((_a = t26.graphic) == null ? void 0 : _a.symbol) }), this._moveManipulation.forEachManipulator((e28) => this.addHandles([e28.events.on("immediate-click", (t27) => {
      this._moveManipulation.zManipulation.hasManipulator(e28) || this._manipulatorInfos.some((e29) => e29.manipulator.selected) || this.events.emit("immediate-click", { ...t27, object: this.object }), t27.stopPropagation();
    }), this._watchAndUpdateGrabState(e28, false)]));
    const o23 = (e28) => (t27) => {
      this.addHandles([t27.events.on("focus-changed", ({ action: t28 }) => {
        "focus" === t28 ? this._updateTranslateTooltip(e28) : this._resetTooltip();
      })]);
    };
    this._moveManipulation.xyManipulation.forEachManipulator(o23(c17.XY)), this._moveManipulation.xyAxisManipulation.forEachManipulator(o23(c17.XY_AXIS)), this._moveManipulation.zManipulation.forEachManipulator(o23(c17.Z)), this._moveManipulation.elevationInfo = { mode: "absolute-height", offset: 0 };
    const s13 = a39.data.spatialReference;
    this.addHandles([this._moveManipulation.createDragPipeline((n30, o24, s14, r25, l26) => {
      const { snappingStep: p19, cancelSnapping: d18 } = f13({ predicate: (e28) => !!e28.info, snappingManager: i23.snappingManager, snappingContext: new e14({ editGeometryOperations: a39, elevationInfo: e27, pointer: l26, excludeFeature: t26.graphic, visualizer: new R8() }), updatingHandles: this._updatingHandles, useZ: false });
      return r25 = r25.next((e28) => (this._onDragCancel(), e28)).next(d18), { steps: s14 = s14.next((e28) => this._trackNumDragging(e28)).next((e28) => {
        const t27 = this._manipulatorInfos.filter((e29) => "vertex" === e29.type && e29.manipulator.selected);
        return e28.manipulatorType === A12.TRANSLATE_XY && 1 === t27.length ? { ...e28, info: t27[0], snapOrigin: t27[0].handle.pos } : e28;
      }).next(D2(this.view, e27, t26.graphic ?? void 0)).next(...p19).next(v7()).next((e28) => this._perObjectManipulatorDragAction(Ne.SELECTED_OR_ALL, e28)).next((e28) => (this._updateTranslateTooltip(n30, e28), e28)), cancel: r25 };
    }, e27, s13, t26.graphic), d2(() => t26.visible, () => this._updateMoveManipulationPosition(), P), t26.on("committed", () => {
      this._recreatingManipulators || this._updateMoveManipulationPosition();
    }), d2(() => t26.isDraped, (e28) => {
      this._updateMoveManipulationPosition();
      const t27 = "align-move-manipulation";
      e28 ? this.addHandles(this.view.elevationProvider.on("elevation-change", () => this._updateMoveManipulationPosition()), t27) : this.removeHandles(t27);
    }, P)]);
  }
  _createVisualElements() {
    const { object: e27, view: t26 } = this, i23 = l15({ view: t26, object: e27, forEachManipulator: (e28) => {
      if (!this.destroyed && !this._recreatingManipulators) {
        this._objectMoveManipulation.forEachManipulator(e28), this._moveManipulation.forEachManipulator(e28);
        for (const t27 of this._manipulatorInfos) e28(t27.manipulator, A12.TRANSLATE_XY);
      }
    }, onManipulatorsChanged: (e28) => this.events.on("manipulators-changed", e28) });
    null != i23 && (this._outlineVisualElement = i23.visualElement instanceof j9 ? i23.visualElement : null);
    const n29 = this._outlineVisualElement;
    if (null != n29) {
      const t27 = () => {
        e27.isDraped || this._updateMoveManipulationPosition();
      };
      this._manipulatorHandles.add(v(() => n29.events, "attachment-origin-changed", t27, { onListenerAdd: t27 }));
    }
    this._manipulatorHandles.add(i23);
  }
  _createEdgeOffsetManipulator(e27, t26 = this.object.elevationInfo) {
    var _a;
    const i23 = this.view, n29 = this._operations;
    if (e27.component.vertices.length <= 2 || !n29) return null;
    const a39 = n29.data.spatialReference, o23 = this._settings.manipulators.edgeOffset, r25 = o23.size / 2, l26 = r25 + o23.collisionPadding, p19 = r25 / l26, d18 = p19 / 2, h25 = p19 * Math.sqrt(3) / 2, { height: u24, offset: c22 } = o23, m15 = this._edgeOffsetManipulatorMaterial;
    if (!this._edgeOffsetManipulatorGeometryInside) {
      const e28 = gt(m15, h25, d18, d18, u24, c22);
      this._edgeOffsetManipulatorGeometryInside = e28;
    }
    if (!this._edgeOffsetManipulatorGeometryOutside) {
      const e28 = gt(m15, -h25, d18, d18, u24, -c22);
      this._edgeOffsetManipulatorGeometryOutside = e28;
    }
    const f21 = [new e21(this._edgeOffsetManipulatorGeometryInside.instantiate(), t14.Unfocused), new e21(this._edgeOffsetManipulatorGeometryInside.instantiate({ material: this._edgeOffsetManipulatorHoverMaterial }), t14.Focused), new e21(this._edgeOffsetManipulatorGeometryOutside.instantiate(), t14.Unfocused), new e21(this._edgeOffsetManipulatorGeometryOutside.instantiate({ material: this._edgeOffsetManipulatorHoverMaterial }), t14.Focused)], g17 = new ee({ view: i23, renderObjects: f21, elevationInfo: "on-the-ground" !== t26.mode || y7((_a = this.object.graphic) == null ? void 0 : _a.symbol) ? { mode: "absolute-height", offset: 0 } : t26, worldOriented: false, focusMultiplier: 1, radius: l26, available: this.object.visible, collisionType: { type: "disc", direction: r6(0, 0, 1) }, collisionPriority: 1, metadata: { deleting: false }, location: Te(a39) }), _10 = new ee({ view: i23, worldSized: true, worldOriented: false, available: this.object.visible, collisionPriority: -10, cursor: this.enableMoveObject ? "move" : "default", metadata: { deleting: false }, location: Te(a39) }), v16 = { manipulator: g17, handle: e27, locationUpdateHandle: null, type: "edge", selectedIndex: 0, edgeManipulator: _10, visibilityHandle: null };
    this._autoHideEdgeOffsetManipulator(v16, o23.minSquaredEdgeLength);
    const M18 = () => this._updateEdgeOffsetManipulator(v16);
    M18(), v16.locationUpdateHandle = t([e27.leftVertex, e27.rightVertex].map((e28) => {
      const t27 = this._getManipulatorInfoFromHandle(e28);
      return t27 == null ? void 0 : t27.manipulator.events.on("location-update", M18);
    }));
    const b20 = (e28) => {
      this._manipulatorInfos.some((e29) => e29.manipulator.selected) ? this._clearSelection() : this.events.emit("immediate-click", { ...e28, object: this.object }), e28.stopPropagation();
    };
    return this._manipulatorHandles.add([v16.locationUpdateHandle, this._watchAndUpdateGrabState(g17, true), this._watchAndUpdateGrabState(_10, true), p13(g17, this._createEdgeOffsetPipeline(v16, t26, n29)), p13(_10, this._createEdgePipeline(v16, t26, n29)), _10.events.on("immediate-click", b20), g17.events.on("immediate-click", b20), g17.events.on("focus-changed", () => this._resetTooltip()), g17.events.on("grab-changed", ({ screenPoint: e28, action: t27 }) => {
      v16.grabMapPoint = "start" === t27 ? A14(e28, this.view, this.object, v16) : null;
    })], g17), this._manipulatorInfos.push(v16), this.manipulators.addMany([g17, _10]), this.events.emit("manipulators-changed"), v16;
  }
  _autoHideEdgeOffsetManipulator(e27, t26) {
    const i23 = e27.manipulator, n29 = e27.edgeManipulator, a39 = () => {
      e27.visibilityHandle = l(e27.visibilityHandle);
      const a40 = this._getManipulatorInfoFromHandle(e27.handle.leftVertex), o23 = this._getManipulatorInfoFromHandle(e27.handle.rightVertex), l26 = null != a40 && null != o23 && q10(a40.manipulator.renderLocation, o23.manipulator.renderLocation, this.view.state.camera) < t26;
      (!i23.focused && !n29.focused || l26) && (i23.grabbable = !l26, n29.grabbable = !l26, e27.visibilityHandle = t([i23.disableDisplay(), e(() => {
        i23.grabbable = true, n29.grabbable = this.enableMoveObject;
      })]));
    };
    this._manipulatorHandles.add([i23.events.on("focus-changed", a39), n29.events.on("focus-changed", a39), e(() => {
      l(e27.visibilityHandle), n29.metadata.deleting = true, this.manipulators.remove(n29);
    })], i23), a39();
  }
  _updateEdgeOffsetManipulator(e27) {
    if (!this._operations) return;
    this._updateManipulatorPosition(e27);
    const { coordinateHelper: t26 } = this._operations.data, i23 = w10(this.view, e27.manipulator.elevationAlignedLocation, U5(t26, e27.handle, e27.manipulator.elevationInfo)), n29 = this._getManipulatorInfoFromHandle(e27.handle.leftVertex), a39 = this._getManipulatorInfoFromHandle(e27.handle.rightVertex);
    if (null == n29 || null == a39) return;
    const o23 = n29.manipulator.renderLocation, s13 = a39.manipulator.renderLocation, r25 = null != i23 ? b15(i23, o23, s13) : o7;
    e27.manipulator.modelTransform = r25, e27.edgeManipulator.elevationAlignedLocation = e27.manipulator.elevationAlignedLocation, e27.edgeManipulator.modelTransform = r25;
    const l26 = r10(c2(De, o23, s13)) / 2;
    e27.edgeManipulator.collisionType = { type: "line", paths: [[[-l26, 0, 0], [l26, 0, 0]]] };
  }
  _createEdgePipeline(e27, t26, i23) {
    return (n29, a39, o23, s13) => {
      if ("touch" === s13) {
        this._createEdgeOffsetPipeline(e27, t26, i23)(n29, a39, o23);
      } else if (this.enableMoveObject) {
        const e28 = this.object.graphic, s14 = i23.data.spatialReference, { elevationAlignedLocation: r25 } = n29;
        a39.next((e29) => this._trackNumDragging(e29)).next(M5(this.view, r25)).next(M13(this.view, r25, t26, s14, e28)).next(j6()).next(v7()).next((e29) => this._perObjectManipulatorDragAction(Ne.ALL, e29)).next((e29) => (this._updateTranslateObjectTooltip(c17.XY, e29), e29)).next((e29) => {
          "end" === e29.action && this._resetTooltip();
        }), o23.next(() => this._onDragCancel(!n29.metadata.deleting));
      }
    };
  }
  _createEdgeOffsetPipeline(e27, t26, i23) {
    return (n29, a39, o23) => {
      const s13 = this._pendingEdgeOffsetInfo;
      if ((s13 == null ? void 0 : s13.manipulatorInfo) === e27 && "drag" !== s13.mode) return void o23.execute({ action: "cancel" });
      this._clearSelection();
      const { initializeStep: r25, cleanup: l26 } = this._initializeEdgeOffset(e27, t26, i23, o23), p19 = this._applyEdgeOffsetStep(e27);
      a39.next((e28) => this._trackNumDragging(e28)).next(M5(this.view, n29.elevationAlignedLocation)).next(r25).next(P15(this.view)).next(F9(this.view, i23.data.spatialReference)).next(v7()).next(He()).next((e28) => this._pendingEdgeOffsetInfo ? e28 : p19(e28)).next((e28) => {
        "end" !== e28.action || this._pendingEdgeOffsetInfo || l26();
      }), o23.next(() => {
        this._exitEdgeOffsetInputMode(), n29.metadata.deleting || (l26(), this._onDragCancel());
      });
    };
  }
  _initializeEdgeOffset(e27, t26, i23, n29) {
    const { view: a39, object: o23 } = this, r25 = U5(i23.data.coordinateHelper, e27.handle, t26), l26 = i23.createUndoGroup(), p19 = w10(a39, e27.manipulator.elevationAlignedLocation, r25);
    let h25;
    this._splitEdgesBeforeEdgeOffset(e27, r25), this._selectEdgeOffsetArrow(e27, r25);
    const u24 = () => {
      this._cleanEdgeOffsetCollapsedEdges(e27, i23), h25 = l(h25);
    }, c22 = this.events.on("undo", u24);
    return h25 = t([this._initializeEdgeOffsetVisualElement(e27, o23, t26, i23), l26, c22, this._connectEdgeOffsetTooltip(e27, r25, i23, () => {
      n29.execute({ action: "cancel" });
    })]), { initializeStep: (e28) => null == r25 || null == p19 ? (u24(), null) : { ...e28, operation: r25, plane: p19 }, cleanup: u24 };
  }
  _initializeEdgeOffsetVisualElement(e27, t26, i23, a39) {
    const o23 = () => new P2({ paths: [[e27.handle.leftVertex.pos, e27.handle.rightVertex.pos]], spatialReference: a39.data.spatialReference }), r25 = new j9({ view: this.view, isDraped: t26.isDraped, geometry: o23(), elevationInfo: i23, width: this._settings.visualElements.lineObjects.outline.width, attached: false, isDecoration: true }), p19 = t([d2(() => ({ color: this._accentColor, draped: t26.isDraped }), ({ color: e28, draped: t27 }) => {
      r25.color = F3(e28), r25.isDraped = t27;
    }, A), t26.on("committed", () => {
      r25.geometry = o23();
    }), i(r25)]);
    return r25.attached = true, p19;
  }
  _applyEdgeOffsetStep(e27) {
    return (t26) => (this.destroyed || null == t26.operation || !this._operations || (this._updateEventState(Ce.RESHAPING), null == t26.signedDistance ? this._resetTooltip() : ((t26.mapDeltaX || t26.mapDeltaY || t26.mapDeltaZ) && (this._offsetEdge(e27, t26.operation, t26.signedDistance), this.events.emit("reshape", { type: "reshape", object: this.object })), this._updateEdgeOffsetTooltip(t26))), t26);
  }
  _cleanEdgeOffsetCollapsedEdges(e27, t26) {
    var _a, _b;
    const i23 = (_a = e27.handle.leftVertex.leftEdge) == null ? void 0 : _a.leftVertex, n29 = e27.handle.leftVertex, a39 = (_b = e27.handle.rightVertex.rightEdge) == null ? void 0 : _b.rightVertex, o23 = e27.handle.rightVertex, s13 = t26.data.coordinateHelper, r25 = this.view.pixelSizeAt(s13.vectorToDehydratedPoint(n29.pos), s13.spatialReference), l26 = [];
    if (i23 && s13.distance(i23.pos, n29.pos) < Pe) {
      const e28 = this._getManipulatorInfoFromHandle(n29);
      null != e28 && l26.push(e28);
    }
    if (s13.distance(n29.pos, o23.pos) < r25 || a39 && s13.distance(a39.pos, o23.pos) < Pe) {
      const e28 = this._getManipulatorInfoFromHandle(o23);
      null != e28 && l26.push(e28);
    }
    l26.length && this._removeVertices(l26);
  }
  _enterInputModeDuringEdgeOffset(e27) {
    const t26 = this._findActiveEdgeOffsetManipulatorInfo();
    return !!t26 && (!!O4(e27, this.tooltip) && (t26.manipulator.dragging ? (this._pendingEdgeOffsetInfo = { manipulatorInfo: t26, mode: "drag" }, true) : (this._clearSelection(), this._pendingEdgeOffsetInfo = { manipulatorInfo: t26, mode: "hover" }, this._connectEdgeOffsetTooltipOnHover(t26), true)));
  }
  _exitEdgeOffsetInputMode() {
    this.tooltip && (this._pendingEdgeOffsetInfo = null, this._resetTooltip(), this.tooltip.exitInputMode());
  }
  _findActiveEdgeOffsetManipulatorInfo() {
    return this._manipulatorInfos.filter(Ae).find(({ manipulator: e27 }) => e27.hovering || e27.grabbing || e27.dragging);
  }
  _connectEdgeOffsetTooltipOnHover(e27) {
    const { _operations: t26, object: i23 } = this;
    if (!t26) return;
    const { elevationInfo: n29 } = i23, a39 = U5(t26.data.coordinateHelper, e27.handle, n29);
    this._selectEdgeOffsetArrow(e27, a39), this.addHandles([this._initializeEdgeOffsetVisualElement(e27, i23, n29, t26), this._connectEdgeOffsetTooltip(e27, a39, t26, () => {
      this.removeHandles(a39), this._exitEdgeOffsetInputMode();
    })], a39);
  }
  _splitEdgesBeforeEdgeOffset(e27, t26) {
    if (t26.requiresSplitEdgeLeft) {
      const t27 = this._getManipulatorInfoFromHandle(e27.handle.leftVertex.leftEdge);
      null != t27 && this._splitEdgeManipulator(t27, 1);
    }
    if (t26.requiresSplitEdgeRight) {
      const t27 = this._getManipulatorInfoFromHandle(e27.handle.rightVertex.rightEdge);
      null != t27 && this._splitEdgeManipulator(t27, 0);
    }
  }
  _selectEdgeOffsetArrow(e27, t26) {
    var _a;
    const i23 = e27.grabMapPoint ?? A14((_a = this.view.inputManager) == null ? void 0 : _a.latestPointerLocation, this.view, this.object, e27);
    i23 && t26.selectArrowFromStartPoint(i23);
  }
  _connectEdgeOffsetTooltip(e27, t26, i23, n29) {
    const a39 = () => this.tooltipInfos.edgeOffset.distance.actual, o23 = (a40) => {
      n29(), queueMicrotask(() => {
        var _a, _b, _c, _d, _e2, _f;
        this.view.focus();
        const n30 = i23.createUndoGroup();
        (_b = (_a = this._tooltipCallbacks).onReshapeStart) == null ? void 0 : _b.call(_a), this._splitEdgesBeforeEdgeOffset(e27, t26), this._offsetEdge(e27, t26, I8(a40, e27.manipulator.location, t26, i23)), (_d = (_c = this._tooltipCallbacks).onReshape) == null ? void 0 : _d.call(_c), (_f = (_e2 = this._tooltipCallbacks).onReshapeStop) == null ? void 0 : _f.call(_e2), this._cleanEdgeOffsetCollapsedEdges(e27, i23), n30.remove();
      });
    }, r25 = () => {
      const e28 = a39();
      null != e28 ? o23(e28) : n29();
    };
    return t([p(() => this.tooltip && !this.tooltip.focused, () => r25(), C), this.tooltip.on("discard", n29), this.tooltip.on("commit", (e28) => {
      "commit-and-exit" === e28.type && r25();
    })]);
  }
  _createVertexOrEdgeManipulator(e27, t26 = this.object.elevationInfo, i23 = false) {
    const n29 = this.view, a39 = this._operations, o23 = this._settings;
    if (!a39) return null;
    const r25 = a39.data.type, l26 = a39.data.spatialReference;
    if ("edge" === e27.type) {
      if (this.enableEdgeOffset) return this._createEdgeOffsetManipulator(e27, t26);
      if (!this.enableMidpoints) return null;
    }
    if (null == this._vertexManipulatorGeometry || null == this._vertexManipulatorOutlineGeometry) {
      const { size: e28, outlineSize: t27 } = we(o23.manipulators.vertex);
      this._vertexManipulatorGeometry = ot(this._vertexManipulatorMaterial, e28, 16, 16), this._vertexManipulatorOutlineGeometry = ot(this._vertexManipulatorOutlineMaterial, t27, 16, 16);
    }
    if (null == this._edgeManipulatorGeometry || null == this._edgeManipulatorOutlineGeometry) {
      const { size: e28, outlineSize: t27 } = we(o23.manipulators.edge);
      this._edgeManipulatorGeometry = ot(this._edgeManipulatorMaterial, e28, 16, 16), this._edgeManipulatorOutlineGeometry = ot(this._edgeManipulatorOutlineMaterial, t27, 16, 16);
    }
    const p19 = "point" === r25 || "mesh" === r25 ? [] : [new e21(this._vertexManipulatorGeometry.instantiate(), Le.Vertex | t14.Unselected), new e21(this._vertexManipulatorOutlineGeometry.instantiate(), Le.Vertex | t14.Unfocused | t14.Unselected), new e21(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._vertexManipulatorHoverOutlineMaterial }), Le.Vertex | t14.Focused | t14.Unselected), new e21(this._vertexManipulatorGeometry.instantiate({ material: this._selectedManipulatorMaterial }), t14.Selected), new e21(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._selectedManipulatorOutlineMaterial }), t14.Selected | t14.Unfocused), new e21(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._selectedManipulatorHoverOutlineMaterial }), t14.Selected | t14.Focused)];
    this.enableMidpoints && p19.push(new e21(this._edgeManipulatorGeometry.instantiate({ material: this._vertexManipulatorMaterial }), Le.Edge | t14.Focused | t14.Unselected), new e21(this._edgeManipulatorOutlineGeometry.instantiate({ material: this._vertexManipulatorHoverOutlineMaterial }), Le.Edge | t14.Focused | t14.Unselected), new e21(this._edgeManipulatorGeometry.instantiate(), Le.Edge | t14.Unfocused | t14.Unselected), new e21(this._edgeManipulatorOutlineGeometry.instantiate(), Le.Edge | t14.Unfocused | t14.Unselected));
    const h25 = new ee({ view: n29, renderObjects: p19, elevationInfo: t26, focusMultiplier: 1, touchMultiplier: 1, available: this.object.visible, metadata: { deleting: false }, location: Te(l26) });
    h25.selected = i23, this._setTypeSpecificManipulatorSettings(h25, e27, t26);
    const u24 = "edge" === e27.type ? { manipulator: h25, handle: e27, locationUpdateHandle: null, type: "edge", selectedIndex: 0 } : { manipulator: h25, handle: e27, type: "vertex", selectedIndex: 0 };
    if (this._manipulatorInfos.push(u24), this.manipulators.add(h25), this._updateManipulatorPosition(u24), "edge" === u24.type) {
      const e28 = [];
      for (const t27 of [u24.handle.leftVertex, u24.handle.rightVertex]) {
        const i24 = this._getManipulatorInfoFromHandle(t27);
        null != i24 && e28.push(i24.manipulator.events.on("location-update", () => this._updateManipulatorPosition(u24)));
      }
      u24.locationUpdateHandle = t(e28), this._manipulatorHandles.add(u24.locationUpdateHandle, h25);
    }
    this._manipulatorHandles.add(this._watchAndUpdateGrabState(h25, true), h25);
    const c22 = p13(h25, (e28, i24, o24, s13) => {
      let r26 = null;
      const { snappingStep: p20, cancelSnapping: h26 } = f13({ predicate: () => !this._isMultiVertexSelection(), snappingManager: this.tool.snappingManager, snappingContext: new e14({ editGeometryOperations: a39, elevationInfo: t26, pointer: s13, excludeFeature: this.object.graphic, visualizer: new R8() }), updatingHandles: this._updatingHandles, useZ: false });
      o24 = o24.next((t27) => (this._onDragCancel(!e28.metadata.deleting, () => r26 = l(r26)), t27)).next(h26);
      const { elevationAlignedLocation: c23 } = e28, m15 = this.object.graphic ?? void 0;
      i24.next((e29) => this._trackNumDragging(e29)).next((e29) => {
        if ("start" === e29.action && a39 && (r26 = a39.createUndoGroup()), "edge" === u24.type) {
          const t27 = this._splitEdgeManipulator(u24);
          return { ...e29, info: t27, snapOrigin: t27.handle.pos };
        }
        return { ...e29, info: u24, snapOrigin: u24.handle.pos };
      }).next(M5(n29, c23)).next(M13(n29, c23, t26, l26, m15)).next(D2(n29, t26, m15)).next(...p20).next(v7()).next((e29) => {
        this._perVertexManipulatorDragAction(e29), "end" === e29.action && (r26 = l(r26)), this._resetTooltip();
      });
    });
    return this._manipulatorHandles.add([c22, h25.events.on("immediate-click", (e28) => this._manipulatorClickCallback(e28, u24)), h25.events.on("select-changed", () => {
      u24.selectedIndex = ++this._selectedIndex, this._updateMoveManipulationPosition(), this._resetTooltip();
    }), h25.events.on("focus-changed", () => {
      this._resetTooltip();
    })], h25), this.events.emit("manipulators-changed"), u24;
  }
  _trackNumDragging(e27) {
    switch (e27.action) {
      case "start":
        this._numDragging++;
        break;
      case "end":
        this._numDragging--;
    }
    return e27;
  }
  _onDragCancel(e27 = true, t26) {
    var _a;
    switch (this._numDragging--, e27 && this.undo(), (_a = this.tool.snappingManager) == null ? void 0 : _a.doneSnapping(), this._resetTooltip(), this._reshapeEventState) {
      case Ce.NONE:
        break;
      case Ce.MOVING:
        this.events.emit("move", { type: "move", dx: 0, dy: 0, object: this.object });
        break;
      case Ce.RESHAPING:
        this.events.emit("reshape", { type: "reshape", object: this.object });
    }
    t26 == null ? void 0 : t26(), this.destroyed || this._updateEventState(Ce.NONE);
  }
  _setTypeSpecificManipulatorSettings(e27, t26, i23) {
    var _a, _b;
    const n29 = this._settings;
    switch (t26.type) {
      case "vertex": {
        e27.state = Le.Vertex, e27.selectable = true, e27.cursor = "move", e27.collisionPriority = 2;
        const { size: t27, collisionPadding: a39 } = n29.manipulators.vertex;
        e27.radius = t27 / 2 + a39, e27.elevationInfo = i23;
        const o23 = (_a = this._operations) == null ? void 0 : _a.data.type;
        e27.interactive = null != o23 && "point" !== o23 && "mesh" !== o23;
        break;
      }
      case "edge": {
        e27.state = Le.Edge, e27.selectable = false, e27.cursor = "copy", e27.collisionPriority = -1;
        const { size: t27, collisionPadding: a39 } = n29.manipulators.edge;
        e27.radius = t27 / 2 + a39, e27.elevationInfo = "on-the-ground" !== i23.mode || y7((_b = this.object.graphic) == null ? void 0 : _b.symbol) ? { mode: "absolute-height", offset: 0 } : i23;
        break;
      }
    }
  }
  _watchAndUpdateGrabState(e27, t26) {
    return e27.events.on("grab-changed", (i23) => {
      this._onGrabStateChanged(e27, t26, i23.action, i23.pointerType);
    });
  }
  _onGrabStateChanged(e27, t26, i23, n29 = "mouse") {
    if (!this._recreatingManipulators) {
      if ("start" === i23) t26 && this._updateSelection(e27), this._numGrabbing++;
      else if (this._numGrabbing--, this._updateEventState(Ce.NONE), this.destroyed) return;
      this._moveManipulation.interactive = !this._numGrabbing, ("touch" !== n29 || this.enableEdgeOffset) && (this._manipulatorInfos.forEach((e28) => {
        var _a;
        const { manipulator: t27 } = e28, i24 = (_a = this._operations) == null ? void 0 : _a.data.type;
        t27.interactive = t27.grabbing || !this._numGrabbing && null != i24 && "point" !== i24 && "mesh" !== i24, Ae(e28) && (e28.edgeManipulator.interactive = e28.edgeManipulator.grabbing || !this._numGrabbing);
      }), this._objectMoveManipulation.forEachManipulator((e28) => {
        e28.interactive = e28.grabbing || !this._numGrabbing;
      }));
    }
  }
  _clearSelection() {
    for (const e27 of this._manipulatorInfos) e27.manipulator.grabbing || (e27.manipulator.selected = false);
    this._pendingEdgeOffsetInfo = null;
  }
  _updateSelection(e27) {
    e27.grabbing && !e27.selected && e27.selectable && (this._clearSelection(), e27.selected = true, this.events.emit("manipulators-changed"));
  }
  _removeManipulator(e27) {
    null != e27 && (e27.manipulator.metadata.deleting = true, this.manipulators.remove(e27.manipulator), this._manipulatorHandles.remove(e27.manipulator), y(this._manipulatorInfos, e27), this.events.emit("manipulators-changed"), this._resetTooltip());
  }
  _getManipulatorInfoFromHandle(e27) {
    if (e27) {
      for (const t26 of this._manipulatorInfos) if (e27 === t26.handle) return t26;
    }
    return null;
  }
  _updateManipulatorPositions(e27) {
    for (const t26 of e27) this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(t26));
  }
  _updateManipulatorPosition(e27) {
    var _a;
    const t26 = this._operations;
    if (null != e27 && t26) {
      if ("vertex" === e27.type) e27.manipulator.location = t26.data.coordinateHelper.vectorToDehydratedPoint(e27.handle.pos, Ge), e27.manipulator.grabbing && null != this._vertexLaserLineVisualElement && (this._vertexLaserLineVisualElement.visualElement.intersectsWorldUpAtLocation = e27.manipulator.renderLocation);
      else if ("edge" === e27.type) {
        const i23 = this._getManipulatorInfoFromHandle(e27.handle.leftVertex), n29 = this._getManipulatorInfoFromHandle(e27.handle.rightVertex);
        if (null == i23 || null == n29) return;
        const a39 = i23.manipulator, o23 = n29.manipulator;
        if ("on-the-ground" === ((_a = e27.manipulator.elevationInfo) == null ? void 0 : _a.mode)) {
          const i24 = a39.location, n30 = o23.location, s13 = 0.5, r25 = i24.x + s13 * (n30.x - i24.x), l26 = i24.y + s13 * (n30.y - i24.y), p19 = i24.hasZ && n30.hasZ ? 0 : void 0;
          e27.manipulator.location = e7(r25, l26, p19, t26.data.spatialReference);
        } else I(De, a39.renderLocation, o23.renderLocation, 0.5), e27.manipulator.renderLocation = De;
      }
    }
  }
  _splitEdgeManipulator(e27, t26 = 0.5) {
    const i23 = this._operations, n29 = i23.splitEdge(e27.handle, t26).createdVertex;
    e27.locationUpdateHandle = l(e27.locationUpdateHandle);
    const a39 = this.object.elevationInfo;
    let o23;
    this.enableEdgeOffset ? (this._removeManipulator(e27), o23 = this._createVertexOrEdgeManipulator(n29)) : (o23 = e27, o23.handle = n29, o23.type = "vertex", this._setTypeSpecificManipulatorSettings(e27.manipulator, e27.handle, a39)), n29.leftEdge && this._createVertexOrEdgeManipulator(n29.leftEdge), n29.rightEdge && this._createVertexOrEdgeManipulator(n29.rightEdge), this._updateManipulatorPosition(o23), this.enableEdgeOffset || this._resetTooltip(), this._updateSelection(e27.manipulator);
    const s13 = this._updateEventState(Ce.RESHAPING), r25 = i23.data.coordinateHelper.vectorToArray(o23.handle.pos), l26 = i23.data.components.indexOf(n29.component);
    return this.events.emit("vertex-add", { type: "vertex-add", object: this.object, vertices: [{ coordinates: r25, componentIndex: l26, vertexIndex: n29.index }], added: r25 }), s13 && this._updateEventState(Ce.NONE), o23;
  }
  _updateMoveManipulationPosition() {
    var _a, _b, _c, _d;
    const e27 = o6(De, 0, 0, 0);
    let t26 = 0, i23 = false, n29 = null, a39 = null;
    for (const r25 of this._manipulatorInfos) "vertex" === r25.type && (r25.manipulator.selected ? (t26++, u6(e27, e27, r25.manipulator.renderLocation), null == n29 || r25.selectedIndex > n29.selectedIndex ? (a39 = n29, n29 = r25) : (null == a39 || r25.selectedIndex > a39.selectedIndex) && (a39 = r25)) : i23 = true);
    const o23 = this.object, s13 = (_a = this._operations) == null ? void 0 : _a.data.geometry;
    if (0 === t26) {
      const e28 = o23.visible && this.enableMoveObject;
      this._moveManipulation.xyManipulation.available = e28, this._moveManipulation.xyAxisManipulation.available = e28, this._moveManipulation.xyAxisManipulation.orthogonalAvailable = e28, this._moveManipulation.zManipulation.available = e28 && this.enableZShape && o19(this._operations, o23.elevationInfo), this._moveManipulation.angle = r19(s13), this._moveManipulation.radius = u19.radiusForSymbol((_b = o23.graphic) == null ? void 0 : _b.symbol);
    } else {
      const e28 = o23.visible;
      this._moveManipulation.xyManipulation.available = e28, this._moveManipulation.xyAxisManipulation.available = e28, this._moveManipulation.zManipulation.available = e28 && this.enableZVertex && o19(this._operations, this.object.elevationInfo), this._moveManipulation.xyAxisManipulation.orthogonalAvailable = e28 && 1 !== t26;
      let i24 = 0;
      if (null != n29) {
        const e29 = n29.handle.pos, t27 = null != a39 ? a39.handle.pos : ((_c = n29.handle.leftEdge) == null ? void 0 : _c.leftVertex) ? n29.handle.leftEdge.leftVertex.pos : null, o24 = null == a39 && ((_d = n29.handle.rightEdge) == null ? void 0 : _d.rightVertex) ? n29.handle.rightEdge.rightVertex.pos : null;
        t27 && o24 ? this._moveManipulation.xyAxisManipulation.available = false : t27 ? i24 = Ve(t27, e29) : o24 && (i24 = Ve(e29, o24));
      }
      this._moveManipulation.angle = i24, this._moveManipulation.radius = o20;
    }
    0 !== t26 && i23 ? (g4(e27, e27, 1 / t26), Ge.spatialReference = this._operations.data.spatialReference, Ge.hasZ = true, this.view.renderCoordsHelper.fromRenderCoords(e27, Ge), this._moveManipulation.elevationAlignedLocation = Ge) : null == this._outlineVisualElement || this.object.isDraped || null == this._outlineVisualElement.attachmentOrigin ? F10(this._moveManipulation, this.object) : this._moveManipulation.elevationAlignedLocation = this._outlineVisualElement.attachmentOrigin;
  }
  _removeVertices(e27) {
    var _a;
    const t26 = new Array(), i23 = this._operations;
    if (i23) {
      for (const n29 of e27) {
        const e28 = n29.handle.component;
        if ("vertex" === n29.type && i23.canRemoveVertex(e28)) {
          t26.push(n29.handle), this._removeManipulator(n29), this._removeManipulator(this._getManipulatorInfoFromHandle(n29.handle.leftEdge)), this._removeManipulator(this._getManipulatorInfoFromHandle(n29.handle.rightEdge));
          const a39 = i23.removeVertices([n29.handle]), o23 = (_a = a39.removedVertices) == null ? void 0 : _a[0].createdEdge;
          o23 ? this._createVertexOrEdgeManipulator(o23) : this.enableEdgeOffset && e28.vertices.length <= 2 && this._removeManipulator(this._getManipulatorInfoFromHandle(e28.edges[0]));
        }
      }
      if (t26.length > 0) {
        const e28 = t26.map((e29) => {
          const t27 = i23.data.components.indexOf(e29.component);
          return { coordinates: i23.data.coordinateHelper.vectorToArray(e29.pos), componentIndex: t27, vertexIndex: e29.index };
        }), n29 = this._updateEventState(Ce.RESHAPING);
        if (this.destroyed) return;
        if (this.events.emit("vertex-remove", { type: "vertex-remove", object: this.object, removed: e28.map((e29) => e29.coordinates), vertices: e28 }), this.destroyed) return;
        if (n29 && (this._updateEventState(Ce.NONE), this.destroyed)) return;
        this._updateMoveManipulationPosition();
      }
    }
  }
  _moveVertices(e27, t26, i23 = "start" === t26.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS) {
    const n29 = this._operations;
    if (n29) {
      e27.length > 0 && n29.moveVertices(e27.map((e28) => e28.handle), t26.mapDeltaX, t26.mapDeltaY, t26.mapDeltaZ, i23);
      for (const t27 of e27) this._updateManipulatorPosition(t27);
    }
  }
  _offsetEdge(e27, t26, i23) {
    if (!this._operations) return;
    const n29 = t26.clone();
    n29.distance = i23, this._operations.updateVertices([e27.handle.leftVertex, e27.handle.rightVertex], n29), this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e27.handle.leftVertex)), this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e27.handle.rightVertex));
  }
  _manipulatorClickCallback(e27, t26) {
    e27.shiftKey || this._clearSelection(), "vertex" === t26.type && (t26.manipulator.selected = !t26.manipulator.selected, this.enableDeleteVertices && e27.button === t13.Right && this._removeVertices([t26])), "edge" === t26.type && e27.button === t13.Left && this._splitEdgeManipulator(t26), e27.stopPropagation();
  }
  _updateTranslateTooltip(e27, t26) {
    null != this._defaultTooltipInfo ? this._resetTooltip() : this._updateTranslateObjectTooltip(e27, t26);
  }
  _updateTranslateObjectTooltip(e27, t26) {
    this._pendingEdgeOffsetInfo || (this.activeTooltipInfo = P16(e27, t26, this._tooltipsContext));
  }
  _updateEdgeOffsetTooltip(e27) {
    this._pendingEdgeOffsetInfo || (this.activeTooltipInfo = X2(this.object, e27, this._tooltipsContext));
  }
  _resetTooltip() {
    const e27 = this.activeTooltipInfo;
    if (this._pendingEdgeOffsetInfo && "reshape-edge-offset" === (e27 == null ? void 0 : e27.type)) return;
    let t26 = null;
    t26 = this._pendingEdgeOffsetInfo || null != this._findActiveEdgeOffsetManipulatorInfo() ? X2(this.object, null, this._tooltipsContext) : this._defaultTooltipInfo, t26 !== e27 && (null != e27 && null != t26 && "input" === this.tooltip.mode || (this.activeTooltipInfo = t26));
  }
  get _defaultTooltipInfo() {
    var _a;
    const e27 = (_a = this._operations) == null ? void 0 : _a.data.type;
    switch (e27) {
      case "polyline":
      case "polygon":
        return this._selectedVertexManipulatorInfo ? this.tooltipInfos.selectedVertex : null;
      case "point":
      case "mesh":
        return this.tooltipInfos.movePoint;
      default:
        return null;
    }
  }
  get _selectedVertexManipulatorInfo() {
    const e27 = this._manipulatorInfos.filter((e28) => "vertex" === e28.type && e28.manipulator.selected);
    return 1 === e27.length ? e27[0] : null;
  }
  get _tooltipsContext() {
    return { sketchOptions: this._sketchOptions, tooltipInfos: this.tooltipInfos, activeTooltipInfo: this.activeTooltipInfo, selectedVertexManipulatorInfo: this._selectedVertexManipulatorInfo, callbacks: this._tooltipCallbacks };
  }
  get test() {
  }
};
function He() {
  return (e27) => {
    const { operation: t26, mapEnd: i23 } = e27;
    return null == t26 || null == i23 ? e27 : { ...e27, signedDistance: t26.signedDistanceToPoint(i23) };
  };
}
function we(e27) {
  const t26 = e27.size / 2, i23 = t26 + e27.collisionPadding;
  return { size: t26 / i23, outlineSize: (t26 + e27.outlineSize) / i23 };
}
function Ve(e27, t26) {
  return Math.atan2(t26[1] - e27[1], t26[0] - e27[0]) + Math.PI / 2;
}
function Te(e27) {
  return new j({ x: 0, y: 0, z: 0, spatialReference: e27 });
}
function Ae(e27) {
  return "edge" === e27.type && "edgeManipulator" in e27;
}
r2([m()], Se.prototype, "_numGrabbing", void 0), r2([m()], Se.prototype, "_numDragging", void 0), r2([m()], Se.prototype, "_pendingEdgeOffsetInfo", void 0), r2([m()], Se.prototype, "_operations", null), r2([m()], Se.prototype, "_segmentLabels", void 0), r2([m({ constructOnly: true })], Se.prototype, "tool", void 0), r2([m()], Se.prototype, "tooltip", void 0), r2([m()], Se.prototype, "activeTooltipInfo", void 0), r2([m({ readOnly: true })], Se.prototype, "updating", null), r2([m()], Se.prototype, "manipulators", null), r2([m()], Se.prototype, "view", null), r2([m()], Se.prototype, "object", null), r2([m()], Se.prototype, "enableZShape", null), r2([m()], Se.prototype, "enableDeleteVertices", null), r2([m()], Se.prototype, "enableZVertex", null), r2([m()], Se.prototype, "autoHideManipulators", null), r2([m()], Se.prototype, "enableMoveObject", null), r2([m()], Se.prototype, "enableMidpoints", null), r2([m()], Se.prototype, "enableEdgeOffset", null), r2([m()], Se.prototype, "_sketchOptions", null), r2([m()], Se.prototype, "_accentColor", null), r2([m()], Se.prototype, "_tooltipsContext", null), Se = r2([a2("esri.views.3d.interactive.editingTools.reshape.ReshapeOperation")], Se);
var Ge = e7(0, 0, void 0, g2.WGS84);
var De = n3();
var Pe = 1e-6;
var Le;
var Ce;
var Ne;
!function(e27) {
  e27.Vertex = u11.Custom1, e27.Edge = u11.Custom2;
}(Le || (Le = {})), function(e27) {
  e27[e27.NONE = 0] = "NONE", e27[e27.MOVING = 1] = "MOVING", e27[e27.RESHAPING = 2] = "RESHAPING";
}(Ce || (Ce = {})), function(e27) {
  e27[e27.ALL = 0] = "ALL", e27[e27.SELECTED_OR_ALL = 1] = "SELECTED_OR_ALL";
}(Ne || (Ne = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeTool3D.js
var h22 = class extends n13 {
  constructor(e27) {
    super(e27), this._reshapeOperation = null, this.events = new i3(), this.enableZShape = true, this.enableZVertex = true, this.enableMoveObject = true, this.enableDeleteVertices = true, this.autoHideManipulators = false, this.enableMidpoints = true, this.enableEdgeOffset = false, this.type = "reshape-3d", this.sketchOptions = new l10(), this.snappingManager = null, this.automaticManipulatorSelection = false;
  }
  initialize() {
    const e27 = this._reshapeOperation = new Se({ tool: this });
    this.addHandles([e27.events.on("reshape", (e28) => this.events.emit("reshape", e28)), e27.events.on("move", (e28) => this.events.emit("move", e28)), e27.events.on("vertex-add", (e28) => this.events.emit("vertex-add", e28)), e27.events.on("vertex-remove", (e28) => this.events.emit("vertex-remove", e28)), e27.events.on("immediate-click", (e28) => this.events.emit("immediate-click", { ...e28, object: this.object })), this.view.on("pointer-down", ["Shift"], (e28) => e28.stopPropagation())]), this.finishToolCreation();
  }
  destroy() {
    this._reshapeOperation = u(this._reshapeOperation);
  }
  get updating() {
    var _a;
    return ((this.object.updating ?? false) || ((_a = this._reshapeOperation) == null ? void 0 : _a.updating)) ?? false;
  }
  get activeTooltipInfo() {
    var _a;
    return ((_a = this._reshapeOperation) == null ? void 0 : _a.activeTooltipInfo) ?? null;
  }
  get tooltip() {
    var _a;
    return ((_a = this._reshapeOperation) == null ? void 0 : _a.tooltip) ?? null;
  }
  onManipulatorSelectionChanged() {
    var _a;
    (_a = this._reshapeOperation) == null ? void 0 : _a.onManipulatorSelectionChanged();
  }
  get canUndo() {
    var _a;
    return ((_a = this._reshapeOperation) == null ? void 0 : _a.canUndo) ?? false;
  }
  undo() {
    var _a, _b;
    (_a = this.snappingManager) == null ? void 0 : _a.doneSnapping(), (_b = this._reshapeOperation) == null ? void 0 : _b.undo();
  }
  get canRedo() {
    var _a;
    return ((_a = this._reshapeOperation) == null ? void 0 : _a.canRedo) ?? false;
  }
  redo() {
    var _a, _b;
    (_a = this.snappingManager) == null ? void 0 : _a.doneSnapping(), (_b = this._reshapeOperation) == null ? void 0 : _b.redo();
  }
  onInputEvent(e27) {
    const t26 = this._reshapeOperation;
    if (t26 && !t26.enterInputModeIfAvailable(e27) && this.enableDeleteVertices && "key-down" === e27.type && p12.delete.includes(e27.key)) {
      t26.removeSelectedVertices() > 0 && e27.stopPropagation();
    }
  }
  reset() {
  }
};
r2([m()], h22.prototype, "_reshapeOperation", void 0), r2([m()], h22.prototype, "view", void 0), r2([m({ constructOnly: true })], h22.prototype, "object", void 0), r2([m()], h22.prototype, "enableZShape", void 0), r2([m()], h22.prototype, "enableZVertex", void 0), r2([m()], h22.prototype, "enableMoveObject", void 0), r2([m()], h22.prototype, "enableDeleteVertices", void 0), r2([m()], h22.prototype, "autoHideManipulators", void 0), r2([m()], h22.prototype, "enableMidpoints", void 0), r2([m()], h22.prototype, "enableEdgeOffset", void 0), r2([m()], h22.prototype, "type", void 0), r2([m({ type: l10 })], h22.prototype, "sketchOptions", void 0), r2([m()], h22.prototype, "snappingManager", void 0), r2([m()], h22.prototype, "updating", null), r2([m()], h22.prototype, "activeTooltipInfo", null), r2([m()], h22.prototype, "tooltip", null), r2([m()], h22.prototype, "automaticManipulatorSelection", void 0), h22 = r2([a2("esri.views.3d.interactive.editingTools.reshape.ReshapeTool3D")], h22);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateMeshAdapter.js
var g14 = class extends g {
  constructor(t26) {
    super(t26), this._interactionState = null;
  }
  initialize() {
    this.addHandles([p(() => {
      const t26 = this._interactionState;
      return t26 && t26.angle !== t26.previousAngle ? { interactionState: t26, angle: t26.state.angle } : null;
    }, ({ interactionState: t26 }) => {
      this._updateMeshRotation(t26);
    }, C), p(() => {
      const t26 = this._interactionState;
      return t26 && t26.scale !== t26.previousScale ? { interactionState: t26, scale: t26.state.scale } : null;
    }, ({ interactionState: t26 }) => {
      this._updateMeshSize(t26);
    }, C)]);
  }
  get geometry() {
    const t26 = t18(this.object);
    return "mesh" === (t26 == null ? void 0 : t26.type) ? t26 : null;
  }
  get initialAngle() {
    var _a;
    return ((_a = this._interactionState) == null ? void 0 : _a.initialAngle) ?? 0;
  }
  get angle() {
    var _a, _b;
    const t26 = (_a = this.geometry) == null ? void 0 : _a.transform;
    if (null == t26) return ((_b = this._interactionState) == null ? void 0 : _b.angle) ?? 0;
    const e27 = w3(t26.rotation)[2];
    return Math.abs(e27) > 0.999999 ? s(y6(t26.rotation)) * Math.sign(e27) : 0;
  }
  get angleClockwise() {
    return -this.angle;
  }
  get relativeAngle() {
    return this.angle - this.initialAngle;
  }
  get relativeAngleClockwise() {
    return -this.relativeAngle;
  }
  get scale() {
    var _a;
    return ((_a = this._interactionState) == null ? void 0 : _a.scale) ?? 1;
  }
  startInteraction() {
    const t26 = new u20({ angle: this.angle });
    this._interactionState = t26;
    const e27 = () => {
      this._interactionState = null;
    };
    return { state: t26, done: e27, cancel: () => {
      t26.cancel(), e27();
    } };
  }
  createUndoRecord() {
    return this.object.createUndoRecord();
  }
  _updateMeshRotation(t26) {
    const { geometry: e27 } = this;
    if (null == e27) return;
    const { angle: o23, previousAngle: n29 } = t26;
    t26.previousAngle = o23;
    const r25 = M(o23 - n29);
    e27.rotate(0, 0, r25);
  }
  _updateMeshSize(t26) {
    const { geometry: e27 } = this;
    if (null == e27) return;
    const { scale: o23, previousScale: i23 } = t26;
    t26.previousScale = o23;
    const n29 = o23 / i23;
    e27.scale(n29);
  }
};
r2([m({ constructOnly: true })], g14.prototype, "object", void 0), r2([m()], g14.prototype, "geometry", null), r2([m({ constructOnly: true })], g14.prototype, "viewingMode", void 0), r2([m()], g14.prototype, "initialAngle", null), r2([m()], g14.prototype, "angle", null), r2([m()], g14.prototype, "angleClockwise", null), r2([m()], g14.prototype, "relativeAngle", null), r2([m()], g14.prototype, "relativeAngleClockwise", null), r2([m()], g14.prototype, "scale", null), r2([m()], g14.prototype, "_interactionState", void 0), g14 = r2([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter")], g14);
var u20 = class extends g {
  get state() {
    const { angle: t26, scale: e27 } = this;
    return { angle: t26, scale: e27 };
  }
  constructor(t26) {
    super(t26), this.angle = 0, this.initialAngle = 0, this.previousAngle = 0, this.previousScale = 1, this.scale = 1, this.initialAngle = t26.angle, this.previousAngle = t26.angle;
  }
  cancel() {
    this.angle = this.initialAngle, this.scale = 1;
  }
};
r2([m()], u20.prototype, "angle", void 0), r2([m()], u20.prototype, "initialAngle", void 0), r2([m()], u20.prototype, "previousAngle", void 0), r2([m()], u20.prototype, "previousScale", void 0), r2([m()], u20.prototype, "scale", void 0), r2([m()], u20.prototype, "state", null), u20 = r2([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState")], u20);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateObjectSymbol3DAdapter.js
var a32 = class extends g {
  constructor(t26) {
    super(t26), this.sizeAxis = null, this._interactionState = null;
  }
  initialize() {
    this.addHandles(p(() => null != this._interactionState ? this._interactionState.state : null, (t26) => {
      this._updateSymbol(t26);
    }, C));
  }
  get initialAngle() {
    var _a;
    return ((_a = this._interactionState) == null ? void 0 : _a.initialAngle) ?? 0;
  }
  get angle() {
    return null != this._interactionState ? this._interactionState.angle : null != this._orientationReferenceSymbolLayer ? c18(this._orientationReferenceSymbolLayer.heading ?? 0) : 0;
  }
  get angleClockwise() {
    return -this.angle;
  }
  get orientation() {
    return this.angle;
  }
  get orientationClockwise() {
    return this.angleClockwise;
  }
  get relativeAngle() {
    return this.angle - this.initialAngle;
  }
  get relativeAngleClockwise() {
    return -this.relativeAngle;
  }
  get scale() {
    var _a;
    return ((_a = this._interactionState) == null ? void 0 : _a.scale) ?? 1;
  }
  get size() {
    const t26 = this._sizeReferenceSymbolLayer;
    if (null == t26) return null;
    const e27 = this.findLayerView(), i23 = this._graphicSymbol;
    if (null == e27 || null == i23 || "point-3d" !== i23.type) return null;
    const l26 = e27.getSymbolLayerSize(i23, t26);
    if ("size" in l26 && null != l26.size) return l26.size;
    const n29 = this.sizeAxis;
    return !("width" in l26) || null == l26.width || null != n29 && "width" !== n29 && "all" !== n29 && "width-and-depth" !== n29 ? !("depth" in l26) || null == t26.depth || null != n29 && "depth" !== n29 && "all" !== n29 && "width-and-depth" !== n29 ? !("height" in l26) || null == t26.height || null != n29 && "height" !== n29 && "all" !== n29 ? null : l26.height : l26.depth : l26.width;
  }
  get _sizeReferenceSymbolLayer() {
    const t26 = this._graphicSymbol;
    return null == t26 || 0 === t26.symbolLayers.length ? null : t26.symbolLayers.find((t27) => "object" === t27.type);
  }
  get _orientationReferenceSymbolLayer() {
    const t26 = this._graphicSymbol;
    return null == t26 || 0 === t26.symbolLayers.length ? null : t26.symbolLayers.find((t27) => "object" === t27.type && null != t27.heading);
  }
  get _graphicSymbol() {
    var _a;
    return null != ((_a = this.graphic) == null ? void 0 : _a.symbol) && "point-3d" === this.graphic.symbol.type ? this.graphic.symbol : null;
  }
  set _graphicSymbol(t26) {
    this.graphic.symbol = t26;
  }
  startInteraction() {
    const t26 = this._graphicSymbol, e27 = this.findLayerView();
    if (null != this._interactionState || null == t26 || null == e27) return h23;
    const i23 = t26.symbolLayers.map((i24) => "object" === i24.type ? e27.getSymbolLayerSize(t26, i24) : null).toArray(), l26 = t26.clone(), n29 = this.angle, o23 = new p18({ originalSymbol: l26, angle: n29, initialSizes: i23 });
    this._interactionState = o23;
    const r25 = () => {
      this._interactionState = null;
    };
    return { state: o23, done: r25, cancel: () => {
      this._graphicSymbol = l26, r25();
    } };
  }
  createUndoRecord() {
    let t26 = this.graphic.symbol, e27 = null;
    return { undo: (i23) => {
      e27 = i23.symbol, i23.symbol = t26;
    }, redo: (i23) => {
      t26 = i23.symbol, i23.symbol = e27;
    } };
  }
  _updateSymbol({ scale: t26, angle: e27, originalSymbol: l26, initialSizes: n29 }) {
    const o23 = this._graphicSymbol;
    if (null == o23 || "point-3d" !== o23.type) return;
    const r25 = o23.clone(), s13 = -M(e27 - this.initialAngle);
    let a39 = false;
    this._forEachObjectSymbolLayerPair(l26, r25, (e28, i23, l27) => {
      const o24 = (e28.heading ?? 0) + s13;
      i23.heading !== o24 && (i23.heading = o24, a39 = true);
      const r26 = n29[l27];
      if (null != r26 && "width" in r26) {
        r26.width = this.sizeFilter(r26.width), r26.height = this.sizeFilter(r26.height), r26.depth = this.sizeFilter(r26.depth);
        const e29 = r26.width * t26;
        i23.width !== e29 && (i23.width = e29, a39 = true);
        const l28 = r26.depth * t26;
        i23.depth !== l28 && (i23.depth = l28, a39 = true);
        const n30 = r26.height * t26;
        i23.height !== n30 && (i23.height = n30, a39 = true);
      }
    }), a39 && (this._graphicSymbol = r25);
  }
  _forEachObjectSymbolLayerPair(t26, e27, i23) {
    t26.symbolLayers.forEach((t27, l26) => {
      const n29 = e27.symbolLayers.at(l26);
      "object" === t27.type && "object" === n29.type && i23(t27, n29, l26);
    });
  }
};
function c18(t26) {
  return -s(t26);
}
r2([m()], a32.prototype, "initialAngle", null), r2([m()], a32.prototype, "angle", null), r2([m()], a32.prototype, "angleClockwise", null), r2([m()], a32.prototype, "orientation", null), r2([m()], a32.prototype, "orientationClockwise", null), r2([m()], a32.prototype, "relativeAngle", null), r2([m()], a32.prototype, "relativeAngleClockwise", null), r2([m()], a32.prototype, "scale", null), r2([m()], a32.prototype, "size", null), r2([m()], a32.prototype, "sizeAxis", void 0), r2([m({ constructOnly: true })], a32.prototype, "graphic", void 0), r2([m()], a32.prototype, "_interactionState", void 0), r2([m({ constructOnly: true })], a32.prototype, "findLayerView", void 0), r2([m({ constructOnly: true })], a32.prototype, "sizeFilter", void 0), r2([m()], a32.prototype, "_sizeReferenceSymbolLayer", null), r2([m()], a32.prototype, "_orientationReferenceSymbolLayer", null), r2([m()], a32.prototype, "_graphicSymbol", null), a32 = r2([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter")], a32);
var h23 = { state: { angle: 0, scale: 0 }, done: () => {
}, cancel: () => {
} };
var p18 = class extends g {
  get state() {
    const { originalSymbol: t26, angle: e27, initialAngle: i23, scale: l26, initialSizes: n29 } = this;
    return { originalSymbol: t26, angle: e27, initialAngle: i23, scale: l26, initialSizes: n29 };
  }
  constructor(t26) {
    super(t26), this.angle = 0, this.initialAngle = 0, this.scale = 1, this.initialAngle = t26.angle;
  }
};
r2([m()], p18.prototype, "originalSymbol", void 0), r2([m()], p18.prototype, "angle", void 0), r2([m()], p18.prototype, "initialAngle", void 0), r2([m()], p18.prototype, "initialSizes", void 0), r2([m()], p18.prototype, "scale", void 0), r2([m()], p18.prototype, "state", null), p18 = r2([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter.InteractionState")], p18);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateTransform.js
var mt;
!function(t26) {
  t26.ScaleIn = u11.Custom2, t26.ScaleOut = u11.Custom3, t26.RotateLeft = u11.Custom4, t26.RotateRight = u11.Custom5, t26.Unlocked = u11.Custom7, t26.DelayedFocused = u11.Custom8, t26.TouchInput = u11.Custom12;
}(mt || (mt = {}));
var gt2 = class extends g {
  get angle() {
    return this.adapter.angle;
  }
  get scale() {
    return this.adapter.scale;
  }
  set location(t26) {
    this._ringManipulator.location = t26;
  }
  set elevationAlignedLocation(t26) {
    this._ringManipulator.elevationAlignedLocation = t26;
  }
  get grabbing() {
    return this._ringManipulator.grabbing;
  }
  set interactive(t26) {
    this._ringManipulator.interactive = t26;
  }
  get updating() {
    return !!this._activeAnimation;
  }
  constructor(t26) {
    super(t26), this.mode = null, this._scaleRotateDragData = null, this._activeAnimation = null, this._ringIndicatorDelayMs = q7, this.events = new i3(), this.getFocused = () => this._ringManipulator.focused, this.getScale = () => {
      var _a;
      return "scale" === ((_a = this._scaleRotateDragData) == null ? void 0 : _a.mode) ? this.adapter.scale : 1;
    };
  }
  initialize() {
    this._createManipulator(), this._updateDragState(), this._updateManipulatorTransform(), this.addHandles([d2(() => {
      const { adapter: t26 } = this;
      return [t26.angle, t26.scale];
    }, () => this._updateManipulatorTransform())]);
  }
  destroy() {
    var _a;
    (_a = this._activeAnimation) == null ? void 0 : _a.frameTask.remove(), this._activeAnimation = null, this.tool.manipulators.remove(this._ringManipulator), this._ringManipulator = null;
  }
  startAnimation(t26) {
    this.cancelActiveAnimation(), t26.start();
    const e27 = F({ update: ({ deltaTime: e28 }) => {
      t26.update(e28) && this.cancelActiveAnimation();
    } });
    this._activeAnimation = { ...t26, frameTask: e27 };
  }
  cancelActiveAnimation() {
    var _a;
    (_a = this._activeAnimation) == null ? void 0 : _a.frameTask.remove(), this._activeAnimation = u(this._activeAnimation);
  }
  forEachManipulator(t26) {
    t26(this._ringManipulator, A12.SCALE_ROTATE);
  }
  _createManipulator() {
    const t26 = this._createRingManipulator();
    this._ringManipulator = t26, this.tool.manipulators.add(t26);
    const e27 = this.tool.object, a39 = p13(t26, (t27, a40, i23) => {
      this._scaleRotateDragData = null;
      const n29 = this.adapter.startInteraction(), l26 = { mode: "none", origin: t3(t27.renderLocation), initialAngle: this.adapter.angle, angle: 0, angleDir: 0, scaleDir: 0 };
      this._scaleRotateDragData = l26, this._updateDragState();
      const c22 = c4.get();
      this.tool.view.renderCoordsHelper.worldUpAtPosition(t27.renderLocation, c22), a40.next(C6(this.tool.view, l5(t27.renderLocation, c22, M2()))).next((t28) => {
        const a41 = O3(t28.plane), i24 = w9(t28.renderStart, t28.renderEnd, l26.origin, a41), c23 = s8.shortestSignedDiff(l26.angle, i24);
        l26.angleDir = r(l26.angleDir + c23, -0.3, m13), l26.angle = i24;
        const d18 = ft2(l26, t28), h25 = d18 - this.adapter.scale;
        if (l26.scaleDir = r(l26.scaleDir + h25, -0.2, k5), this._onScaleChanged(), "none" === l26.mode) {
          const a42 = this.mode || _t(t28, t28.plane, l26.origin, this.tool.view.state.camera);
          if (null != a42) {
            switch (a42) {
              case "rotate":
                this.tool.events.emit("rotate-start", { object: e27, angle: 0 }), this.tool.events.emit("record-undo", { updates: [this.adapter.createUndoRecord()] });
                break;
              case "scale":
                this.tool.events.emit("scale-start", { object: e27, xScale: 1, yScale: 1 }), this.tool.events.emit("record-undo", { updates: [this.adapter.createUndoRecord()] });
            }
            l26.mode = a42;
          }
        }
        switch (l26.mode) {
          case "rotate":
            n29.state.angle = l26.initialAngle + i24;
            break;
          case "scale":
            n29.state.scale = d18, this._onScaleChanged();
        }
        switch (this._updateDragState(), this._updateManipulatorTransform(), t28.action) {
          case "start":
          case "update":
            switch (l26.mode) {
              case "rotate":
                this.tool.events.emit("rotate", { object: e27, angle: M(l26.angle) });
                break;
              case "scale":
                this.tool.events.emit("scale", { object: e27, xScale: d18, yScale: d18 });
            }
            break;
          case "end":
            switch (l26.mode) {
              case "rotate":
                this.tool.events.emit("rotate-stop", { object: e27, angle: M(l26.angle) });
                break;
              case "scale":
                this.tool.events.emit("scale-stop", { object: e27, xScale: d18, yScale: d18 });
            }
        }
        return "end" === t28.action && (this.startAnimation(vt(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState(), n29.done()), t28;
      }), i23.next(() => {
        if (n29.cancel(), null != this._scaleRotateDragData) {
          switch (this._scaleRotateDragData.mode) {
            case "none":
              break;
            case "rotate":
              this.tool.events.emit("rotate-stop", { object: e27, angle: 0 });
              break;
            case "scale":
              this.tool.events.emit("scale-stop", { object: e27, xScale: 1, yScale: 1 });
          }
          this.startAnimation(vt(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState();
        }
      });
    });
    this.addHandles([a39, t26.events.on("focus-changed", (t27) => {
      "focus" === t27.action ? this.startAnimation(Mt(this, () => this._updateDelayedFocusedState(), { delayMs: this._ringIndicatorDelayMs })) : this._updateDelayedFocusedState();
    }), t26.events.on("immediate-click", (t27) => {
      t27.stopPropagation();
    }), d2(() => this.tool.object.visible, (t27) => this._ringManipulator.available = t27, P)]);
  }
  _onScaleChanged() {
    this.events.emit("scale-changed"), this._updateManipulatorTransform();
  }
  _updateDelayedFocusedState() {
    this._ringManipulator.updateStateEnabled(mt.DelayedFocused, this.getFocused());
  }
  _updateDragState() {
    var _a;
    if (this._ringManipulator.updateStateEnabled(mt.Unlocked, !(null != this._scaleRotateDragData && "none" !== ((_a = this._scaleRotateDragData) == null ? void 0 : _a.mode))), null != this._scaleRotateDragData) switch (this._scaleRotateDragData.mode) {
      case "rotate":
        this._ringManipulator.updateStateEnabled(mt.ScaleIn | mt.ScaleOut, false), this._ringManipulator.updateStateEnabled(mt.RotateLeft, this._scaleRotateDragData.angleDir < 0), this._ringManipulator.updateStateEnabled(mt.RotateRight, this._scaleRotateDragData.angleDir >= 0);
        break;
      case "scale":
        this._ringManipulator.updateStateEnabled(mt.RotateLeft | mt.RotateRight, false), this._ringManipulator.updateStateEnabled(mt.ScaleIn, this._scaleRotateDragData.scaleDir < 0), this._ringManipulator.updateStateEnabled(mt.ScaleOut, this._scaleRotateDragData.scaleDir >= 0);
    }
    else this._ringManipulator.updateStateEnabled(mt.ScaleIn | mt.ScaleOut | mt.RotateLeft | mt.RotateRight, false);
  }
  _updateManipulatorTransform() {
    const t26 = p4(f4.get(), this.adapter.angle, r6(0, 0, 1));
    if (null == t26) return;
    const e27 = this.getScale(), a39 = d3(f4.get(), o6(c4.get(), e27, e27, e27));
    this._ringManipulator.modelTransform = c(f4.get(), a39, t26);
  }
  _createRingManipulator() {
    const t26 = (t27, e28, a40) => {
      const o24 = [], i24 = Math.ceil(t20 * (e28 - t27) / (2 * Math.PI));
      for (let r26 = 0; r26 < i24 + 1; r26++) {
        const s14 = t27 + r26 * (e28 - t27) / i24;
        o24.push(r6(a40 * Math.cos(s14), a40 * Math.sin(s14), 0));
      }
      return o24;
    }, e27 = (e28) => t26(0, 2 * Math.PI, e28), a39 = (t27) => [[-t27 / 2, 0], [t27 / 2, 0], [t27 / 2, P14 / 2], [-t27 / 2, P14 / 2]], o23 = this._createMaterial(1), i23 = (t27, e28, i24 = o23) => it2(i24, a39(e28), t27, [], [], false), r25 = e27(I7), s13 = i23(r25, i16), n29 = { left: new Array(), right: new Array() }, l26 = [];
    for (let w12 = 0; w12 < 2; w12++) {
      const e28 = w12 * Math.PI - Math.PI / 4, a40 = Math.PI / 2 - x12, r26 = e28 + a40, s14 = e28 + Math.PI / 2 - a40, c23 = t26(r26, s14, n19), d19 = i23(c23, l16);
      l26.push(c23), l26.push(t26(r26, s14, p17 - i16 / 2)), n29.left.push(d19), n29.right.push(d19.instantiate());
      for (let t27 = 0; t27 < 2; t27++) {
        const e29 = 0 === t27, a41 = e6();
        if (e29) {
          f3(a41, a41, [1, -1, 1]), b2(a41, a41, -r26, [0, 0, 1]);
          const t28 = Math.round(f18 * (c23.length - 1));
          a41[12] = c23[t28][0], a41[13] = c23[t28][1], a41[14] = c23[t28][2];
        } else {
          b2(a41, a41, s14, [0, 0, 1]);
          const t28 = Math.round((1 - f18) * (c23.length - 1));
          a41[12] = c23[t28][0], a41[13] = c23[t28][1], a41[14] = c23[t28][2];
        }
        const i24 = gt(o23, r20, 0, s10, P14);
        Ot(i24, a41), (e29 ? n29.left : n29.right).push(i24);
      }
    }
    const c22 = [];
    for (let _10 = 0; _10 < 2; _10++) {
      const e28 = _10 * Math.PI - Math.PI / 4, a40 = Math.PI / 2 - b13, o24 = e28 + a40, r26 = e28 + Math.PI / 2 - a40, s14 = t26(o24, r26, p17);
      c22.push(i23(s14, l16));
    }
    const d18 = this._createMaterial(0.66), h25 = this._createMaterial(0.5), u24 = this._createMaterial(0.33), p19 = e27(I7 + g13), m15 = e27(I7 + j10), g17 = i23(p19, l16, d18), f21 = i23(m15, l16, u24), v16 = e27(I7 - g13), M18 = e27(I7 - j10), b20 = i23(v16, l16, d18), j15 = i23(M18, l16, u24);
    let y15 = [new e21(s13, mt.DelayedFocused), new e21(s13.instantiate({ material: h25 }), t14.None)];
    this.mode && "scale" !== this.mode || (y15 = y15.concat([...c22.map((t27) => new e21(t27, mt.DelayedFocused | mt.Unlocked)), new e21(g17, mt.DelayedFocused | mt.ScaleIn), new e21(f21, mt.DelayedFocused | mt.ScaleIn), new e21(b20, mt.DelayedFocused | mt.ScaleOut), new e21(j15, mt.DelayedFocused | mt.ScaleOut)])), this.mode && "rotate" !== this.mode || (y15 = y15.concat([...n29.right.map((t27) => new e21(t27.instantiate(), mt.DelayedFocused | mt.Unlocked)), ...n29.left.map((t27) => new e21(t27, mt.DelayedFocused | mt.RotateLeft)), ...n29.right.map((t27) => new e21(t27, mt.DelayedFocused | mt.RotateRight))]));
    const R13 = [r25, ...l26];
    return new ee({ view: this.tool.view, renderObjects: y15, autoScaleRenderObjects: false, worldOriented: true, radius: i16, focusMultiplier: 1, touchMultiplier: 1.5, elevationInfo: this.tool.object.elevationInfo, collisionType: { type: "ribbon", paths: R13, direction: r6(0, 0, 1) } });
  }
  _createMaterial(t26) {
    const e27 = new A6({ cullFace: e8.Back, renderOccluded: p8.Transparent, isDecoration: true });
    return this.addHandles(d2(() => S2(this.tool.view.effectiveTheme.accentColor, t26), (t27) => e27.setParameters({ color: t27 }), P)), e27;
  }
  get test() {
  }
};
function ft2(t26, e27) {
  const a39 = c2(c4.get(), e27.renderStart, t26.origin), o23 = c2(c4.get(), e27.renderEnd, t26.origin), i23 = r10(a39), r25 = r10(o23);
  return 0 === i23 ? 0 : r25 / i23;
}
function _t(t26, e27, a39, o23) {
  const { renderStart: i23, renderEnd: r25 } = t26, s13 = Dt(i23, o23, c4.get()), n29 = Dt(r25, o23, c4.get());
  if (v4(s13, n29) < d15 * d15) return null;
  const l26 = c2(c4.get(), i23, a39), c22 = _4(c4.get(), l26, O3(e27)), d18 = i23, h25 = u6(c4.get(), d18, c22), u24 = Dt(a39, o23, c4.get()), p19 = s13, m15 = Dt(h25, o23, c4.get()), g17 = c2(c4.get(), m15, p19), f21 = c2(c4.get(), s13, u24), _10 = k(p19, g17), D11 = k(u24, f21);
  return w2(_10, n29) < w2(D11, n29) ? "rotate" : "scale";
}
function Dt(t26, e27, a39) {
  return e27.projectToScreen(t26, bt), o6(a39, bt[0], bt[1], 0);
}
var St;
function vt(t26, e27) {
  let a39 = null, o23 = 1;
  const i23 = () => o23;
  return { start: () => {
    o23 = t26.getScale(), a39 = t26.getScale, t26.getScale = i23, e27();
  }, update: (t27) => (o23 += ((o23 + 1) / 2 - o23) * Math.min(t27 * u18, 1), e27(), Math.abs(o23 - 1) < 0.01 ? St.STOP : St.CONTINUE), destroy: () => {
    a39 && (t26.getScale = a39), e27();
  } };
}
function Mt(t26, e27, a39) {
  let o23 = 0, i23 = null;
  const r25 = () => false;
  return { start: () => {
    i23 = t26.getFocused, t26.getFocused = r25, o23 = 0, e27();
  }, update: (t27) => (o23 += t27, !(i23 == null ? void 0 : i23()) || o23 >= a39.delayMs ? St.STOP : St.CONTINUE), destroy: () => {
    i23 && (t26.getFocused = i23), e27();
  } };
}
r2([m({ constructOnly: true })], gt2.prototype, "tool", void 0), r2([m({ constructOnly: true })], gt2.prototype, "adapter", void 0), r2([m({ constructOnly: true })], gt2.prototype, "sketchOptions", void 0), r2([m()], gt2.prototype, "mode", void 0), r2([m()], gt2.prototype, "_activeAnimation", void 0), r2([m()], gt2.prototype, "updating", null), gt2 = r2([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateTransform")], gt2), function(t26) {
  t26[t26.CONTINUE = 0] = "CONTINUE", t26[t26.STOP = 1] = "STOP";
}(St || (St = {}));
var bt = f2();

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformMeshTooltipInfo.js
var l18 = class extends h11(r15) {
  constructor(t26) {
    super(t26), this.type = "transform-mesh", this.orientation = k3(), this.scale = R5(), this.allFields.forEach((t27) => {
      t27.lockable = false, t27.setActual(null);
    });
  }
  get key() {
    return { longitude: this.longitude.actual, latitude: this.latitude.actual, x: this.x.actual, y: this.y.actual, elevation: this.elevation.actual, geographic: this.geographic, orientation: this.orientation.actual, scale: this.scale.actual };
  }
  get allFields() {
    return [this.longitude, this.latitude, this.x, this.y, this.elevation, this.orientation, this.scale];
  }
};
r2([m()], l18.prototype, "key", null), r2([m()], l18.prototype, "allFields", null), l18 = r2([a2("esri.views.interactive.tooltip.infos.TransformMeshTooltipInfo")], l18);

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformPointTooltipInfo.js
var a33 = class extends h11(r15) {
  constructor(o23) {
    super(o23), this.type = "transform-point", this.orientation = k3({ readOnly: true }), this.size = j5({ readOnly: true }), this.allFields.forEach((o24) => {
      o24.lockable = false, o24.setActual(null);
    });
  }
  get allFields() {
    return [this.longitude, this.latitude, this.x, this.y, this.elevation, this.orientation, this.size];
  }
};
r2([m()], a33.prototype, "allFields", null), a33 = r2([a2("esri.views.interactive.tooltip.infos.TransformPointTooltipInfo")], a33);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/TransformTool3D.js
var z9 = class extends n13 {
  constructor(t26) {
    super(t26), this.events = new i3(), this.enableZ = true, this.enableRotation = true, this.enableScaling = true, this.sketchOptions = new l10(), this.type = "transform-3d", this._updatingHandles = new h5(), this._scaleRotate = null;
  }
  initialize() {
    var _a;
    const { events: t26, object: o23, view: a39 } = this;
    this.tooltip = R4(() => ({ view: a39, options: this.sketchOptions.tooltips })), this._moveManipulation = new u19({ tool: this, view: a39, snapToScene: this.snapToScene, xyAvailable: true, xyAxisAvailable: true, zAvailable: this.enableZ && o19(o23.operations, o23.elevationInfo), radius: u19.radiusForSymbol((_a = o23.graphic) == null ? void 0 : _a.symbol) }), this._moveManipulation.forEachManipulator((e27) => this.addHandles(e27.events.on("immediate-click", (e28) => {
      t26.emit("immediate-click", { ...e28, object: this.object }), e28.stopPropagation();
    })));
    const s13 = o23.elevationInfo;
    if (this._moveManipulation.elevationInfo = s13, this.addHandles(a27(o23)), this._moveManipulation.createManipulatedObjectDragPipeline((t27, e27, i23, n29, r26) => {
      var _a2;
      if (t27 === c17.XY) {
        const { snappingStep: t28, cancelSnapping: e28 } = f13({ snappingContext: new e14({ elevationInfo: s13, pointer: r26, editGeometryOperations: E9.fromGeometry(new j({ spatialReference: (_a2 = o23.operations) == null ? void 0 : _a2.data.spatialReference }), a39.state.viewingMode), visualizer: new R8(), excludeFeature: o23.graphic }), snappingManager: this.snappingManager, updatingHandles: this._updatingHandles, useZ: false });
        n29 = n29.next(e28), i23 = i23.next(U(this.view, s13)).next(...t28);
      }
      return { steps: i23, cancel: n29 };
    }, o23, (e27) => {
      const { action: o24, object: i23, dxScreen: a40, dyScreen: n29 } = e27, s14 = { object: i23, dxScreen: a40, dyScreen: n29 };
      switch (o24) {
        case "start":
          this._emitRecordUndo(), t26.emit("translate-start", s14);
          break;
        case "update":
          t26.emit("translate", s14);
          break;
        case "end":
          t26.emit("translate-stop", s14);
      }
    }), this._moveManipulation.angle = null != this._scaleRotate ? this._scaleRotate.angle : 0, this._scaleRotateAdapter = this._createScaleRotateAdapter(), this.addHandles(d2(() => this._scaleRotateAdapter.angle, () => this._updateMoveAngle())), this.enableScaling || this.enableRotation) {
      const t27 = this.enableScaling && this.enableRotation ? null : this.enableScaling ? "scale" : "rotate";
      this._scaleRotate = new gt2({ tool: this, mode: t27, adapter: this._scaleRotateAdapter, sketchOptions: this.sketchOptions }), this.addHandles(this._scaleRotate.events.on("scale-changed", () => this._onScaleChanged()));
    }
    this.addHandles([l15({ view: this.view, object: o23, forEachManipulator: (t27) => this._forEachManipulator(t27), onManipulatorsChanged: () => e() }), o23.on("committed", () => this._onGeometryChanged()), this._hideManipulatorsForObjectState(), d2(() => a39.scale, () => this._updateMoveAngle())].filter(G)), this._onGeometryChanged(), this._updateMoveAngle(), this._forEachManipulator((t27) => {
      t27 instanceof ee && this.addHandles(t27.events.on("grab-changed", () => this._updateManipulatorsInteractive()));
    });
    const r25 = a39 == null ? void 0 : a39.type, { sketchOptions: l26 } = this;
    this._meshTooltipInfo = new l18({ viewType: r25, sketchOptions: l26 }), this._pointTooltipInfo = new a33({ viewType: r25, sketchOptions: l26 });
    const c22 = { object: o23, dxScreen: 0, dyScreen: 0 }, m15 = { onBeforeUpdate: () => this.endDrag(), onMoveStart: () => {
      this._emitRecordUndo(), t26.emit("translate-start", { ...c22 });
    }, onMove: () => t26.emit("translate", { ...c22 }), onMoveStop: () => t26.emit("translate-stop", { ...c22 }), onRotateStart: (e27) => {
      this._emitRecordUndo(), t26.emit("rotate-start", { object: o23, angle: e27 });
    }, onRotate: (e27) => t26.emit("rotate", { object: o23, angle: e27 }), onRotateStop: (e27) => t26.emit("rotate-stop", { object: o23, angle: e27 }), onScaleStart: (e27, i23) => {
      this._emitRecordUndo(), t26.emit("scale-start", { object: o23, xScale: e27, yScale: i23 });
    }, onScale: (e27, i23) => t26.emit("scale", { object: o23, xScale: e27, yScale: i23 }), onScaleStop: (e27, i23) => t26.emit("scale-stop", { object: o23, xScale: e27, yScale: i23 }) };
    this.addHandles(m11(this.tooltip, this.object, () => ({ sketchOptions: this.sketchOptions, activeTooltipInfo: this.activeTooltipInfo, callbacks: m15, scaleRotateTransform: this._scaleRotate }))), this.finishToolCreation();
  }
  destroy() {
    this.tooltip.destroy(), this._moveManipulation.destroy(), this._scaleRotate = u(this._scaleRotate), this._scaleRotateAdapter = u(this._scaleRotateAdapter), this._updatingHandles.destroy(), this._set("view", null), this._set("object", null);
  }
  onInputEvent(t26) {
    if (!this.destroyed && !O4(t26, this.tooltip)) return super.onInputEvent(t26);
  }
  _updateManipulatorsInteractive() {
    null != this._scaleRotate && (this._scaleRotate.interactive = !this._moveManipulation.grabbing, this._moveManipulation.interactive = !this._scaleRotate.grabbing);
  }
  _createScaleRotateAdapter() {
    var _a, _b, _c, _d;
    const t26 = t18(this.object);
    return "mesh" === (t26 == null ? void 0 : t26.type) ? new g14({ object: this.object, viewingMode: this.view.state.viewingMode }) : new a32({ graphic: this.object.graphic, sizeFilter: (t27) => this._enforceNonZeroSize(t27), findLayerView: () => this.view.allLayerViews.find((t27) => {
      var _a2;
      return t27.layer === ((_a2 = this.object.graphic) == null ? void 0 : _a2.layer);
    }), sizeAxis: ((_d = (_c = (_b = (_a = this.sketchOptions) == null ? void 0 : _a.tooltips) == null ? void 0 : _b.visualVariables) == null ? void 0 : _c.size) == null ? void 0 : _d.axis) ?? null });
  }
  _forEachManipulator(t26) {
    var _a, _b;
    (_a = this._moveManipulation) == null ? void 0 : _a.forEachManipulator(t26), (_b = this._scaleRotate) == null ? void 0 : _b.forEachManipulator(t26);
  }
  _hideManipulatorsForObjectState() {
    return d2(() => this.object.visible, (t26) => {
      this._forEachManipulator((e27) => e27.available = t26), this._moveManipulation.zManipulation.available = t26 && this.enableZ && o19(this.object.operations, this.object.elevationInfo);
    });
  }
  _emitRecordUndo() {
    this.events.emit("record-undo", { updates: [this.object.createUndoRecord()] });
  }
  set snapToScene(t26) {
    this._moveManipulation && (this._moveManipulation.snapToScene = t26), this._set("snapToScene", t26);
  }
  get updating() {
    var _a;
    return this._updatingHandles.updating || !!((_a = this._scaleRotate) == null ? void 0 : _a.updating);
  }
  get activeTooltipInfo() {
    var _a;
    return "mesh" === ((_a = t18(this.object)) == null ? void 0 : _a.type) ? this._meshTooltipInfo : this._pointTooltipInfo;
  }
  set location(t26) {
    this._moveManipulation.location = t26, this._scaleRotate && (this._scaleRotate.location = t26);
  }
  set elevationAlignedLocation(t26) {
    this._moveManipulation.elevationAlignedLocation = t26, this._scaleRotate && (this._scaleRotate.elevationAlignedLocation = t26);
  }
  reset() {
  }
  onHide() {
    var _a;
    (_a = this._scaleRotate) == null ? void 0 : _a.cancelActiveAnimation();
  }
  _onScaleChanged() {
    null != this._scaleRotate && (this._moveManipulation.displayScale = this._scaleRotate.getScale());
  }
  _updateMoveAngle() {
    const { view: t26 } = this, e27 = t26.state.viewingMode === l6.Local || t26.scale < v12;
    this._moveManipulation.angle = e27 ? this._scaleRotateAdapter.angle : 0;
  }
  _onGeometryChanged() {
    F10(this, this.object);
  }
  _enforceNonZeroSize(t26) {
    return t26 || this.view.state.camera.computeRenderPixelSizeAt(this._moveManipulation.renderLocation);
  }
  get test() {
  }
};
r2([m({ constructOnly: true, nonNullable: true })], z9.prototype, "view", void 0), r2([m({ constructOnly: true, nonNullable: true })], z9.prototype, "object", void 0), r2([m({ constructOnly: true, nonNullable: true })], z9.prototype, "enableZ", void 0), r2([m()], z9.prototype, "enableRotation", void 0), r2([m()], z9.prototype, "enableScaling", void 0), r2([m({ constructOnly: true, type: l10 })], z9.prototype, "sketchOptions", void 0), r2([m({ value: false })], z9.prototype, "snapToScene", null), r2([m({ constructOnly: true })], z9.prototype, "snappingManager", void 0), r2([m({ readOnly: true })], z9.prototype, "type", void 0), r2([m({ readOnly: true })], z9.prototype, "updating", null), r2([m()], z9.prototype, "activeTooltipInfo", null), z9 = r2([a2("esri.views.3d.interactive.editingTools.transform.TransformTool3D")], z9);

// node_modules/@arcgis/core/analysis/SlicePlane.js
var c19 = class extends a4.ClonableMixin(S) {
  constructor(o23) {
    super(o23), this.type = "plane", this.position = null, this.heading = 0, this.tilt = 0, this.width = 10, this.height = 10;
  }
  equals(o23) {
    return this.heading === o23.heading && this.tilt === o23.tilt && o(this.position, o23.position) && this.width === o23.width && this.height === o23.height;
  }
};
r2([m({ readOnly: true, json: { read: false, write: true } })], c19.prototype, "type", void 0), r2([m({ type: j }), v6()], c19.prototype, "position", void 0), r2([m({ type: Number, nonNullable: true, range: { min: 0, max: 360 } }), v6(), s2((o23) => a14.normalize(a(o23), 0, true))], c19.prototype, "heading", void 0), r2([m({ type: Number, nonNullable: true, range: { min: 0, max: 360 } }), v6(), s2((o23) => a14.normalize(a(o23), 0, true))], c19.prototype, "tilt", void 0), r2([m({ type: Number, nonNullable: true }), v6()], c19.prototype, "width", void 0), r2([m({ type: Number, nonNullable: true }), v6()], c19.prototype, "height", void 0), c19 = r2([a2("esri.analysis.SlicePlane")], c19);

// node_modules/@arcgis/core/views/3d/analysis/Slice/settings.js
var t22 = r8(0, 0, 0, 0.04);

// node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolConfig.js
var t23 = has("mac") ? "Meta" : "Control";
var s11 = 2;
var a34 = 1.15;
var c20 = 1.15;
var e24 = Math.cos(s(45));
var i21 = Math.cos(s(5));
var l19 = 3;
var n21 = 11;
var x14 = 22.5;
var C9 = 40;
var S16 = 48;
var U7 = 2.25;
var b16 = 4;
var d16 = 1;
var g15 = 0.3;
var k7 = 6;
var q11 = 4;

// node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js
var f20 = e6();

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js
var r21 = new a11();

// node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolUtils.js
function ci(i23, t26) {
  return O9(i23.basis1, i23.basis2, i23.origin, t26);
}
function li(i23, t26, e27, n29) {
  const o23 = t26.worldUpAtPosition(i23.origin, c4.get()), r25 = c4.get();
  switch (e27) {
    case _i.HEADING:
      s5(r25, o23);
      break;
    case _i.TILT:
      s5(r25, i23.basis1);
  }
  return l5(i23.origin, r25, n29);
}
function gi(i23, t26, e27, n29) {
  const o23 = r10(n29.basis1), r25 = r10(n29.basis2), l26 = hi(n29), d18 = Ii(n29), g17 = o6(c4.get(), 0, 0, 0);
  u6(g17, g4(c4.get(), n29.basis1, t26.direction[0]), g4(c4.get(), n29.basis2, t26.direction[1])), u6(g17, n29.origin, g17);
  let m15 = 0, p19 = 1;
  if (Ei(t26)) 1 === t26.direction[0] && -1 === t26.direction[1] ? m15 = Ni : 1 === t26.direction[0] && 1 === t26.direction[1] ? m15 = Math.PI : -1 === t26.direction[0] && 1 === t26.direction[1] && (m15 = 3 * Math.PI / 2), p19 = d18;
  else {
    const i24 = 0 !== t26.direction[0] ? 1 : 2;
    m15 = 1 === i24 ? Ni : 0, p19 = (1 === i24 ? r25 : o23) - l26;
  }
  const T12 = R(f4.get(), m15);
  f3(T12, T12, o6(c4.get(), p19, p19, p19)), c(T12, e27, T12), T12[12] = 0, T12[13] = 0, T12[14] = 0, i23.modelTransform = T12, i23.renderLocation = g17;
}
var fi;
function hi(i23) {
  const t26 = r10(i23.basis1), e27 = r10(i23.basis2);
  return g15 * Math.min(t26, e27);
}
function Ii(i23) {
  return hi(i23);
}
function Ei(i23) {
  return 0 !== i23.direction[0] && 0 !== i23.direction[1];
}
!function(i23) {
  i23[i23.POSITIVE_X = 0] = "POSITIVE_X", i23[i23.POSITIVE_Y = 1] = "POSITIVE_Y", i23[i23.NEGATIVE_X = 2] = "NEGATIVE_X", i23[i23.NEGATIVE_Y = 3] = "NEGATIVE_Y";
}(fi || (fi = {}));
var Ci = u11.Custom1;
var _i;
var Mi;
!function(i23) {
  i23[i23.HEADING = 1] = "HEADING", i23[i23.TILT = 2] = "TILT";
}(_i || (_i = {})), function(i23) {
  i23[i23.HORIZONTAL_OR_VERTICAL = 0] = "HORIZONTAL_OR_VERTICAL", i23[i23.HORIZONTAL = 1] = "HORIZONTAL", i23[i23.VERTICAL = 2] = "VERTICAL", i23[i23.TILTED = 3] = "TILTED";
}(Mi || (Mi = {}));
var Si = u11.Custom2;
var yi = b5();
var Ni = Math.PI / 2;
var Hi = u11.Custom1;
var Ui = u11.Custom2;

// node_modules/@arcgis/core/views/3d/analysis/Slice/ShiftManipulator.js
var H7;
!function(e27) {
  e27[e27.CENTER_ON_CALLOUT = 0] = "CENTER_ON_CALLOUT", e27[e27.CENTER_ON_ARROW = 1] = "CENTER_ON_ARROW";
}(H7 || (H7 = {}));
var I10 = class extends ee {
  constructor(a39, n29) {
    const i23 = new W3({ width: 1, renderOccluded: p8.OccludeAndTransparent, isDecoration: true }), s13 = new A6({ cullFace: e8.Back, renderOccluded: p8.Opaque, isDecoration: true }), c22 = new A6({ cullFace: e8.Back, renderOccluded: p8.Opaque, isDecoration: true }), l26 = new A6({ cullFace: e8.Back, renderOccluded: p8.Opaque, isDecoration: true }), m15 = new A6({ writeDepth: false, cullFace: e8.Front, renderOccluded: p8.Transparent, isDecoration: true });
    super({ view: a39, ...S17({ offsetMode: n29, tubeMaterial: s13, tipMaterial: c22, capMaterial: l26, outlineMaterial: m15, calloutMaterial: i23 }) }), this._themeHandle = d2(() => a39.effectiveTheme.accentColor, (r25) => {
      const o23 = E4(r25), a40 = h.toUnitRGBA(r25), n30 = h.toUnitRGBA(o23), p19 = h.toUnitRGBA(h.blendColors(o23, r25, 0.4)), u24 = h.toUnitRGBA(h.blendColors(o23, r25, 0.14));
      i23.setParameters({ color: a40 }), s13.setParameters({ color: u24 }), c22.setParameters({ color: n30 }), l26.setParameters({ color: p19 }), m15.setParameters({ color: a40 });
    }, P);
  }
  destroy() {
    this._themeHandle.remove(), super.destroy();
  }
};
function S17({ offsetMode: e27, tubeMaterial: t26, tipMaterial: r25, capMaterial: o23, outlineMaterial: a39, calloutMaterial: n29 }) {
  const i23 = e27 === H7.CENTER_ON_CALLOUT ? C9 : 0, s13 = [r6(i23, 0, -24), r6(i23, 0, S16 / 2)], c22 = J5(s13), l26 = W6({ vertices: s13, padding: 0, materials: { tube: t26, tip: r25, cap: o23 } }), m15 = W6({ vertices: s13, padding: U7, materials: { tube: a39, tip: a39, cap: a39 } }), p19 = wt(n29, [[i23, 0, 0], [i23 - C9, 0, 0]]), u24 = wt(n29, [[i23, 0, 0], [i23 - C9, 0, 0]]);
  return { renderObjects: [...l26.normal.map((e28) => new e21(e28, t14.Unfocused | Ci)), ...m15.normal.map((e28) => new e21(e28, t14.Unfocused | Ci)), new e21(p19, t14.Unfocused | Ci | Si), ...l26.focused.map((e28) => new e21(e28, t14.Focused | Ci)), ...m15.focused.map((e28) => new e21(e28, t14.Focused | Ci)), new e21(u24, t14.Focused | Ci | Si)], autoScaleRenderObjects: false, collisionType: { type: "line", paths: [c22] }, collisionPriority: 1, radius: n21, state: Ci };
}
function W6({ vertices: e27, padding: t26, materials: r25 }) {
  const o23 = (o24) => {
    const M18 = e27.slice(), C11 = c2(c4.get(), M18[0], M18[1]);
    A2(C11, C11);
    const T12 = c2(c4.get(), M18[M18.length - 1], M18[M18.length - 2]);
    if (A2(T12, T12), t26 > 0) {
      const e28 = g4(n3(), T12, -t26);
      M18[M18.length - 1] = u6(e28, e28, M18[M18.length - 1]);
      const r26 = g4(n3(), C11, -t26);
      M18[0] = u6(r26, r26, M18[0]);
    }
    const E15 = o24 ? c20 : 1, N10 = x14 * E15, F11 = n21 * E15, y15 = o4(f4.get());
    if (t26 > 0) {
      const e28 = N10 / 4, r26 = o6(c4.get(), 0, e28, 0), o25 = 1 + t26 / e28;
      i4(y15, y15, r26), f3(y15, y15, o6(c4.get(), o25, o25, o25)), i4(y15, y15, g4(r26, r26, -1 / o25));
    }
    const B5 = o4(e6()), D11 = r6(0, 1, 0), P18 = _2(e6(), R2(o8.get(), D11, T12));
    P18[12] = M18[M18.length - 1][0], P18[13] = M18[M18.length - 1][1], P18[14] = M18[M18.length - 1][2], c(P18, P18, y15);
    const x15 = r25.tube, k9 = z10(l19 * (o24 ? a34 : 1) + t26, M18, x15);
    k9.transformation = B5;
    const G7 = [k9], q12 = r25.tip, H9 = at(q12, N10, F11, 24, false, false, true);
    H9.transformation = P18, G7.push(H9);
    const I15 = r25.cap, S20 = at(I15, N10, F11, 24, false, true, false);
    S20.transformation = P18, G7.push(S20);
    const W7 = _2(e6(), R2(o8.get(), D11, C11));
    return W7[12] = M18[0][0], W7[13] = M18[0][1], W7[14] = M18[0][2], c(W7, W7, y15), G7.push(H9.instantiate({ transformation: W7 })), G7.push(S20.instantiate({ transformation: W7 })), G7;
  };
  return { normal: o23(false), focused: o23(true) };
}
function z10(e27, t26, r25) {
  const o23 = [], a39 = 12;
  for (let n29 = 0; n29 < a39; n29++) {
    const t27 = n29 / a39 * 2 * Math.PI;
    o23.push([Math.cos(t27) * e27, Math.sin(t27) * e27]);
  }
  return it2(r25, o23, t26, [], [], false);
}
function J5(e27, t26) {
  const r25 = c2(n3(), e27[e27.length - 1], e27[e27.length - 2]);
  A2(r25, r25), g4(r25, r25, x14), u6(r25, r25, e27[e27.length - 1]);
  {
    const t27 = c2(n3(), e27[0], e27[1]);
    return A2(t27, t27), g4(t27, t27, x14), u6(t27, t27, e27[0]), [t27, ...e27, r25];
  }
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentMove.js
var b17 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  constructor(t26, e27) {
    this._tool = t26, this._bounds = e27, this._moveXYTooltipInfo = null, this._moveZTooltipInfo = null;
    const o23 = this._tool, i23 = o23.view;
    this.moveXYObjectManipulation = new l17({ view: i23, tool: o23, object: this._object }), o23.addHandles(this._createMoveXYObjectDragPipeline()), this.moveZManipulator = new I10(i23, H7.CENTER_ON_CALLOUT), this.moveZManipulator.state |= Si, o23.manipulators.add(this.moveZManipulator), o23.addHandles(this._createMoveZDragPipeline()), o23.addHandles(o23.events.on("translate-stop", () => {
      this._moveXYTooltipInfo = null, this._moveZTooltipInfo = null;
    }));
  }
  destroy() {
    this.moveXYObjectManipulation.destroy(), this._tool.manipulators.remove(this.moveZManipulator), this.moveZManipulator.destroy();
  }
  forEachManipulator(t26) {
    this.moveXYObjectManipulation.forEachManipulator(t26), t26(this.moveZManipulator, A12.TRANSLATE_Z);
  }
  updateManipulators(t26, e27) {
    const n29 = this.moveZManipulator, s13 = x(f4.get(), t26, Math.PI);
    s13[12] = 0, s13[13] = 0, s13[14] = 0, n29.modelTransform = s13, n29.renderLocation = c2(c4.get(), e27.origin, e27.basis1);
  }
  getUpdatedTooltipInfo() {
    return this.moveXYObjectManipulation.grabbing || this.moveXYObjectManipulation.dragging ? this._computeMoveXYTooltipInfo() : this.moveZManipulator.focused ? this._computeMoveZTooltipInfo() : null;
  }
  _computeMoveXYTooltipInfo() {
    const t26 = this._tool, o23 = this._moveXYTooltipInfo ?? (this._moveXYTooltipInfo = new i14({ sketchOptions: t26.sketchOptions }));
    if (this.moveXYObjectManipulation.dragging) {
      const e27 = this._bounds, i23 = e27.mapBoundsStart.origin, n29 = e27.mapBounds.origin, { renderSpatialReference: a39 } = t26.view;
      if (!a39) return null;
      const r25 = u13(i23, n29, a39);
      if (null == r25) return null;
      o23.distance = r25;
    } else o23.distance = h10;
    return o23;
  }
  _computeMoveZTooltipInfo() {
    const t26 = this._tool, o23 = this._moveZTooltipInfo ?? (this._moveZTooltipInfo = new i20({ sketchOptions: t26.sketchOptions }));
    if (this.moveZManipulator.dragging) {
      const e27 = this._bounds, i23 = e27.mapBoundsStart.origin, n29 = e27.mapBounds.origin, { renderSpatialReference: a39 } = t26.view;
      if (!a39) return null;
      const r25 = g7(i23, n29, a39);
      if (null == r25) return null;
      o23.distance = r25;
    } else o23.distance = h10;
    return o23;
  }
  _createMoveXYObjectDragPipeline() {
    return this.moveXYObjectManipulation.createDragPipeline((t26, e27, o23) => this._buildMoveDragPipeline(e27, o23));
  }
  _createMoveZDragPipeline() {
    if (!this._operations) return e();
    const e27 = this._operations.data.spatialReference;
    return p13(this.moveZManipulator, (t26, o23, i23) => {
      const a39 = t3(t26.renderLocation), r25 = o23.next(G6(this._tool.view, a39, e27)).next(j6());
      this._buildMoveDragPipeline(r25, i23);
    });
  }
  _buildMoveDragPipeline(t26, e27) {
    const { _tool: o23, _object: i23 } = this;
    t26.next((t27) => ("start" === t27.action && (o23.inputState = { type: "move" }, this._bounds.backupMapBounds(), o23.events.emit("translate-start", { object: i23, dxScreen: t27.screenDeltaX, dyScreen: t27.screenDeltaY })), t27)).next(v7()).next(this._updateGeometry()).next((t27) => {
      const e28 = { object: i23, dxScreen: t27.screenDeltaX, dyScreen: t27.screenDeltaY };
      switch (t27.action) {
        case "start":
        case "update":
          (t27.mapEnd.x - t27.mapStart.x || t27.mapEnd.y - t27.mapStart.y || (t27.mapEnd.z ?? 0) - (t27.mapStart.z ?? 0)) && o23.events.emit("translate", e28);
          break;
        case "end":
          o23.inputState = null, o23.events.emit("translate-stop", e28);
      }
      return t27;
    }), e27.next(() => {
      null != o23.inputState && o23.events.emit("translate-stop", { object: i23, dxScreen: 0, dyScreen: 0 }), o23.cancel();
    });
  }
  _updateGeometry() {
    const t26 = this._tool;
    return (e27) => {
      if (null == t26.inputState || "move" !== t26.inputState.type) return e27;
      const o23 = "start" === e27.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS;
      if (this._operations) {
        const t27 = this._operations.move(e27.mapDeltaX, e27.mapDeltaY, e27.mapDeltaZ, o23);
        this._bounds.updateMapBoundsFromOperation(t27);
      }
      return e27;
    };
  }
};

// node_modules/@arcgis/core/views/3d/analysis/images/generateTextures.js
var t25 = "theme-style";
function e26(t26, e27) {
  return a35(r23(n25(o21(t26), e27)), e27.size);
}
function n25(e27, { accentColor: n29, contrastColor: o23 }) {
  const r25 = n29.toHex(), a39 = n29.a, s13 = o23.toHex(), i23 = o23.a, c22 = e27.getElementsByTagNameNS("http://www.w3.org/2000/svg", "style").namedItem(t25);
  return c22 && (c22.innerHTML = `
      .contrast-fill { fill: ${s13}; fill-opacity: ${i23}; }
      .contrast-stroke { stroke: ${s13}; stroke-opacity: ${i23};  }
      .accent-fill { fill: ${r25}; fill-opacity: ${a39}; }
      .accent-stroke { stroke: ${r25}; stroke-opacity:  ${a39}; }`), e27;
}
function o21(t26) {
  const e27 = t26.split(",")[1], n29 = atob(e27);
  return new DOMParser().parseFromString(n29, "image/svg+xml");
}
function r23(t26) {
  const e27 = new XMLSerializer().serializeToString(t26);
  return `data:image/svg+xml;base64,${btoa(e27)}`;
}
function a35(t26, e27) {
  const n29 = new Image(e27, e27);
  return n29.src = t26, n29;
}

// node_modules/@arcgis/core/views/3d/analysis/images/heading-rotate-svg.js
var I11 = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==";

// node_modules/@arcgis/core/views/3d/analysis/images/Factory.js
var a36 = 64;
function l23(r25, l26) {
  const { accentColor: n29, contrastColor: c22, preMultiplyAlpha: i23 } = l26;
  return r25.fromData(`heading-rotate:[accent:${n29},contrast:${c22},size:${a36}]`, () => new N5(e26(I11, { accentColor: n29, contrastColor: c22, size: a36 }), { mipmap: true, reloadable: true, preMultiplyAlpha: i23 }));
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js
var b18 = class extends l8 {
  constructor(e27, r25) {
    super(e27, r25, new t11(b9, () => import("./ImageMaterial.glsl-YESOUKJV.js")), j13);
  }
  _getPipelineState(t26, r25) {
    const { oitPass: m15, output: d18, hasOccludees: b20, enableOffset: j15, cullFace: I15 } = t26, S20 = m15 === o11.NONE, O11 = m15 === o11.FrontFace;
    return B({ blending: u7(d18) ? S20 ? o9 : T(m15) : null, culling: f5(I15), depthTest: { func: f6(m15) }, depthWrite: l9(t26), drawBuffers: i8(m15, d18), colorWrite: g6, stencilWrite: b20 ? e10 : null, stencilTest: b20 ? r25 ? o12 : f7 : null, polygonOffset: S20 || O11 ? null : N4(j15) });
  }
  initializePipeline(e27) {
    return this._occludeePipeline = this._getPipelineState(e27, true), this._getPipelineState(e27, false);
  }
  getPipeline(e27) {
    return e27 ? this._occludeePipeline : super.getPipeline();
  }
};
var j13 = /* @__PURE__ */ new Map([[e4.POSITION, 0], [e4.UV0, 2], [e4.PERSPECTIVEDIVIDE, 3]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechniqueConfiguration.js
var a37 = class extends a12 {
  constructor() {
    super(...arguments), this.cullFace = e8.None, this.enableOffset = true, this.writeDepth = true, this.hasOccludees = false, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.perspectiveInterpolation = true, this.textureCoordinateType = d6.None, this.emissionSource = d7.None, this.discardInvisibleFragments = true, this.occlusionPass = false, this.objectAndLayerIdColorInstanced = false;
  }
};
r2([i9({ count: e8.COUNT })], a37.prototype, "cullFace", void 0), r2([i9()], a37.prototype, "enableOffset", void 0), r2([i9()], a37.prototype, "writeDepth", void 0), r2([i9()], a37.prototype, "hasOccludees", void 0), r2([i9()], a37.prototype, "terrainDepthTest", void 0), r2([i9()], a37.prototype, "cullAboveTerrain", void 0), r2([i9()], a37.prototype, "perspectiveInterpolation", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js
var I13 = class extends e16 {
  constructor(e27) {
    super(e27, b19), this._configuration = new a37(), this.vertexAttributeLocations = j13, this.supportsEdges = true, this.produces = /* @__PURE__ */ new Map([[A3.OPAQUE_MATERIAL, (e28) => i7(e28)], [A3.TRANSPARENT_MATERIAL, (e28) => h7(e28) && this.parameters.writeDepth], [A3.TRANSPARENT_MATERIAL_WITHOUT_DEPTH, (e28) => h7(e28) && !this.parameters.writeDepth], [A3.DRAPED_MATERIAL, (e28) => h7(e28) || i7(e28)]]);
  }
  getConfiguration(e27, t26) {
    return this._configuration.output = e27, this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.hasOccludees = t26.hasOccludees, this._configuration.oitPass = t26.oitPass, this._configuration.enableOffset = t26.camera.relativeElevation < A4, this._configuration.terrainDepthTest = t26.terrainDepthTest, this._configuration.cullAboveTerrain = t26.cullAboveTerrain, this._configuration.perspectiveInterpolation = this.parameters.perspectiveInterpolation, this._configuration;
  }
  get visible() {
    return true;
  }
  createGLMaterial(e27) {
    return new _9(e27);
  }
  createBufferWriter() {
    const e27 = f15.clone();
    return this.parameters.perspectiveInterpolation && e27.f32(e4.PERSPECTIVEDIVIDE), new E14(e27);
  }
};
var _9 = class extends r12 {
  constructor(e27) {
    super({ ...e27, ...e27.material.parameters });
  }
  beginSlot(e27) {
    return this.updateTexture(this._material.parameters.textureId), this._material.setParameters(this.textureBindParameters), this.getTechnique(b18, e27);
  }
};
var E14 = class extends f8 {
  write(t26, r25, i23, s13, a39, o23) {
    for (const n29 of this.vertexBufferLayout.fields.keys()) {
      const s14 = i23.get(n29);
      if (s14) if (n29 === e4.PERSPECTIVEDIVIDE) {
        s6(1 === s14.size);
        const t27 = a39.getField(n29, y4);
        t27 && d8(s14, t27, o23);
      } else F4(n29, s14, t26, r25, a39, o23);
    }
  }
};
var b19 = class extends o10 {
  constructor(e27) {
    super(), this.textureId = e27, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = e8.None, this.opacity = 1, this.perspectiveInterpolation = false;
  }
};

// node_modules/@arcgis/core/views/3d/analysis/Slice/RotateManipulator.js
var g16 = class extends ee {
  constructor(n29, s13) {
    const a39 = new I13({ writeDepth: false, renderOccluded: p8.Opaque, isDecoration: true }), c22 = j11.calloutWidth, m15 = new W3({ width: c22, renderOccluded: p8.OccludeAndTransparent, isDecoration: true });
    super({ view: n29, ...j14({ imageMaterial: a39, calloutMaterial: m15 }) }), this._currentTexture = null, this._themeHandle = d2(() => n29.effectiveTheme.accentColor, (i23) => {
      const o23 = P4(i23, 0.5), n30 = E4(i23), l26 = this._currentTexture, c23 = s13(o23, n30);
      a39.setParameters({ textureId: c23.texture.id }), m15.setParameters({ color: h.toUnitRGBA(i23) }), this._currentTexture = c23, l26 == null ? void 0 : l26.release();
    }, P);
  }
  destroy() {
    var _a;
    this._themeHandle.remove(), (_a = this._currentTexture) == null ? void 0 : _a.release(), super.destroy();
  }
};
function j14({ imageMaterial: e27, calloutMaterial: t26 }) {
  const { focusMultiplier: r25, calloutLength: i23, discRadius: o23 } = j11, s13 = o23 * r25, d18 = (e28, t27) => {
    const r26 = [0, 1, 2, 2, 3, 0];
    return new f9(t27, [[e4.POSITION, new t10([i23 - e28, -e28, 0, i23 + e28, -e28, 0, i23 + e28, e28, 0, i23 - e28, e28, 0], r26, 3, true)], [e4.UV0, new t10([0, 0, 1, 0, 1, 1, 0, 1], r26, 2, true)]]);
  }, f21 = wt(t26, [[0, 0, 0], [i23 - o23, 0, 0]]), b20 = wt(t26, [[0, 0, 0], [i23 - s13, 0, 0]]), g17 = Ci;
  return { autoScaleRenderObjects: false, collisionPriority: 1, collisionType: { type: "disc", direction: [0, 0, 1], offset: [i23, 0, 0] }, focusMultiplier: r25, radius: o23, renderObjects: [new e21(d18(o23, e27), t14.Unfocused | g17), new e21(f21, t14.Unfocused | g17), new e21(d18(s13, e27), t14.Focused | g17), new e21(b20, t14.Focused | g17)], state: g17 };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentRotate.js
var M16 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  constructor(t26, e27, o23) {
    var _a;
    this._tool = t26, this._bounds = e27, this._snapRotation = o23, this._rotateTooltipInfo = null, this._startAngle = 0, this._endAngle = 0;
    const r25 = this._tool, a39 = r25.view, n29 = !((_a = a39._stage) == null ? void 0 : _a.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result);
    this.rotateManipulator = new g16(a39, (t27, e28) => l23(a39.textures, { accentColor: t27, contrastColor: e28, preMultiplyAlpha: n29 })), r25.addHandles([this.rotateManipulator.events.on("grab-changed", (t27) => this._onGrabChanged(t27)), this._createRotateDragPipeline(this.rotateManipulator)]), r25.manipulators.add(this.rotateManipulator), r25.addHandles([r25.events.on("rotate-start", (t27) => this._startAngle = t27.angle), r25.events.on("rotate", (t27) => this._endAngle = t27.angle), r25.events.on("rotate-stop", () => {
      this._startAngle = 0, this._endAngle = 0;
    })]);
  }
  destroy() {
    this._tool.manipulators.remove(this.rotateManipulator), this.rotateManipulator.destroy();
  }
  forEachManipulator(t26) {
    t26(this.rotateManipulator, A12.ROTATE);
  }
  updateManipulators(t26, r25) {
    const a39 = this._bounds.mapBounds.plane[2] < 0 ? Math.PI : 0, n29 = l3(f4.get(), t26, a39);
    n29[12] = 0, n29[13] = 0, n29[14] = 0, this.rotateManipulator.modelTransform = n29, this.rotateManipulator.renderLocation = u6(c4.get(), r25.origin, r25.basis1);
  }
  getUpdatedTooltipInfo() {
    return this.rotateManipulator.focused ? this._computeRotateTooltipInfo() : null;
  }
  _computeRotateTooltipInfo() {
    const t26 = this._rotateTooltipInfo ?? (this._rotateTooltipInfo = new s9({ sketchOptions: this._tool.sketchOptions }));
    return t26.angle = this._startAngle - this._endAngle, t26;
  }
  _onGrabChanged({ action: t26, screenPoint: e27 }) {
    const o23 = this._tool, r25 = this._bounds;
    if ("start" !== t26 || !e27) return;
    const a39 = li(r25.displayBounds, o23.view.renderCoordsHelper, _i.HEADING, M2()), n29 = m12(o23.view.state.camera, e27);
    x2(a39, n29, c4.get()) && (r25.backupMapBounds(), o23.inputState = { type: "rotate", rotatePlane: a39 });
  }
  _createRotateDragPipeline(e27) {
    const { _tool: o23, _object: r25 } = this;
    return p13(e27, (e28, a39, n29) => {
      const s13 = o23.inputState;
      null != s13 && (a39.next((t26) => ("start" === t26.action && o23.events.emit("rotate-start", { object: r25, angle: 0 }), t26)).next(C6(o23.view, s13.rotatePlane)).next(this._renderPlaneToAngle()).next(...this._snapRotation()).next(this._updateGeometry()).next((e29) => {
        const a40 = { object: r25, angle: M(e29.rotateAngle) };
        switch (e29.action) {
          case "start":
          case "update":
            o23.events.emit("rotate", a40);
            break;
          case "end":
            o23.inputState = null, o23.events.emit("rotate-stop", a40);
        }
        return e29;
      }), n29.next(() => {
        null != o23.inputState && o23.events.emit("rotate-stop", { object: r25, angle: 0 }), o23.cancel();
      }));
    });
  }
  _renderPlaneToAngle() {
    return (t26) => {
      const e27 = w9(t26.renderStart, t26.renderEnd, this._bounds.displayBounds.origin, O3(t26.plane));
      return { ...t26, rotateAngle: e27 };
    };
  }
  _updateGeometry() {
    const t26 = this._bounds;
    return (e27) => {
      const o23 = s5(n3(), t26.mapBoundsStart.origin), s13 = "start" === e27.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS;
      if (this._operations) {
        const r25 = this._operations.rotate(o23, e27.rotateAngle, s13, e13.REPLACE);
        Z(t26.mapBoundsStart, t26.mapBounds), t26.updateMapBoundsFromOperation(r25);
      }
      return e27;
    };
  }
};

// node_modules/@arcgis/core/views/3d/analysis/Slice/ResizeManipulator.js
var v14 = class extends ee {
  constructor(o23, i23) {
    const s13 = Ei(i23), m15 = s13 ? b16 : d16, f21 = m15 * s11, d18 = d16, u24 = { renderOccluded: p8.OccludeAndTransparent, isDecoration: true }, j15 = new W3({ ...u24, width: m15 }), h25 = new W3({ ...u24, width: f21 }), v16 = new W3({ ...u24, width: d18 });
    super({ view: o23, ...b14, ...M17({ isCorner: s13, unfocusedMaterial: j15, focusedMaterial: h25, outlineMaterial: v16 }) }), this._themeHandle = d2(() => o23.effectiveTheme.accentColor, (r25) => {
      const t26 = h.toUnitRGBA(r25);
      j15.setParameters({ color: t26 }), h25.setParameters({ color: t26 }), v16.setParameters({ color: t26 });
    }, P);
  }
  destroy() {
    this._themeHandle.remove(), super.destroy();
  }
};
function M17({ isCorner: e27, unfocusedMaterial: r25, focusedMaterial: t26, outlineMaterial: n29 }) {
  const a39 = e27 ? [r6(1, 0, 0), r6(0, 0, 0), r6(0, 1, 0)] : [r6(1, 0, 0), r6(-1, 0, 0)];
  return { renderObjects: [new e21(wt(r25, a39), t14.Unfocused | Hi), new e21(wt(t26, a39), t14.Focused | Hi), new e21(wt(n29, a39), Ui)], collisionType: { type: "line", paths: [a39] }, radius: e27 ? k7 : q11, state: Hi };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/extentUtils.js
var C10 = class {
  constructor(t26, i23) {
    this._tool = t26, this.mapBounds = W2(), this.mapBoundsStart = W2(), this.displayBounds = W2(), t26.addHandles(v(() => t26.object, "modified-externally", () => this._resetMapBounds(), { onListenerAdd: () => this._resetMapBounds() })), this._onDisplayBoundsChanged = i23;
  }
  get displayBoundsMargin() {
    var _a, _b;
    const { view: s13, object: t26 } = this._tool, i23 = t18(t26), o23 = ((_a = s13.pointsOfInterest) == null ? void 0 : _a.centerOnSurfaceFrequent.location) ?? ((_b = i23 == null ? void 0 : i23.extent) == null ? void 0 : _b.center);
    return o23 ? D10 * s13.pixelSizeAt(o23) : 0;
  }
  backupMapBounds() {
    Z(this.mapBounds, this.mapBoundsStart);
  }
  updateDisplayBounds() {
    var _a;
    this._calculateDisplayBounds(), (_a = this._onDisplayBoundsChanged) == null ? void 0 : _a.call(this);
  }
  updateMapBoundsFromOperation(s13) {
    V4(s13, this.mapBounds), this.updateDisplayBounds();
  }
  updateMapBoundsFromOperationInverse(s13) {
    T3(s13, this.mapBounds), this.updateDisplayBounds();
  }
  _resetMapBounds() {
    this._calculateMapBounds(), this.updateDisplayBounds();
  }
  _calculateMapBounds() {
    var _a;
    const { view: s13, attachmentOrigin: i23, object: o23 } = this._tool, a39 = (_a = o23.operations) == null ? void 0 : _a.data;
    if (!a39) return;
    const e27 = a39.geometry;
    this.spatialReference = e27.spatialReference;
    const n29 = n18(e27);
    l4(n29, n29, -1);
    const r25 = i23 ? s13.pixelSizeAt(i23, e27.spatialReference) : 0, p19 = O10 * r25, d18 = a39.coordinateHelper.hasZ() && "on-the-ground" !== o23.elevationInfo.mode;
    S6(n29, a39, p19, this.mapBounds, d18);
  }
  _calculateDisplayBounds() {
    const { view: s13, attachmentOrigin: t26 } = this._tool, i23 = (t26 == null ? void 0 : t26.z) ?? f14(this.mapBounds.origin, s13.elevationProvider, o15.fromElevationInfo(this._tool.object.elevationInfo), s13.renderCoordsHelper);
    S18(this.mapBounds, i23 ?? 0, s13.renderCoordsHelper, this.spatialReference, this.displayBoundsMargin, this.displayBounds);
  }
};
var D10 = 10;
var O10 = 80;
function S18(s13, t26, c22, l26, m15 = 0, B5) {
  B5 || (B5 = W2());
  const y15 = c4.get();
  u6(y15, s13.origin, s13.basis1), u6(y15, y15, s13.basis2), c22.toRenderCoords(y15, l26, y15);
  const M18 = c4.get();
  u6(M18, s13.origin, s13.basis1), c2(M18, M18, s13.basis2), c22.toRenderCoords(M18, l26, M18);
  const j15 = c4.get();
  c2(j15, s13.origin, s13.basis1), c2(j15, j15, s13.basis2), c22.toRenderCoords(j15, l26, j15);
  const v16 = c4.get();
  c2(v16, s13.origin, s13.basis1), u6(v16, v16, s13.basis2), c22.toRenderCoords(v16, l26, v16), u6(B5.origin, y15, M18), u6(B5.origin, B5.origin, j15), u6(B5.origin, B5.origin, v16), g4(B5.origin, B5.origin, 0.25), c2(y15, y15, B5.origin), c2(M18, M18, B5.origin), c2(j15, j15, B5.origin), c2(v16, v16, B5.origin);
  const _10 = I(c4.get(), y15, M18, 0.5), R13 = I(c4.get(), j15, v16, 0.5);
  g4(R13, R13, -1), I(B5.basis1, _10, R13, 0.5);
  const x15 = I(c4.get(), y15, v16, 0.5), C11 = I(c4.get(), M18, j15, 0.5);
  g4(C11, C11, -1), I(B5.basis2, x15, C11, 0.5);
  const D11 = _4(c4.get(), B5.basis1, B5.basis2);
  _4(B5.basis2, D11, B5.basis1), A2(B5.basis1, B5.basis1);
  const O11 = Math.max(Math.abs(P3(B5.basis1, y15)), Math.abs(P3(B5.basis1, M18)), Math.abs(P3(B5.basis1, j15)), Math.abs(P3(B5.basis1, v16)));
  A2(B5.basis2, B5.basis2);
  const S20 = Math.max(Math.abs(P3(B5.basis2, y15)), Math.abs(P3(B5.basis2, M18)), Math.abs(P3(B5.basis2, j15)), Math.abs(P3(B5.basis2, v16)));
  g4(B5.basis1, B5.basis1, O11 + m15), g4(B5.basis2, B5.basis2, S20 + m15);
  const U9 = s5(c4.get(), s13.origin);
  return U9[2] = t26, c22.toRenderCoords(U9, l26, U9), l5(U9, D11, B5.plane), H3(B5.plane, B5.origin, B5.origin), K2(B5), B5;
}
function U8(s13, t26, i23) {
  return c2(H8, c2(H8, s13.origin, s13.basis1), s13.basis2), q5(A15, H8, s13.basis1, 2), q5(k8, A15, s13.basis2, 2), q5(I14, H8, s13.basis2, 2), H8[2] = A15[2] = k8[2] = I14[2] = t26, o16({ topLeft: I14, topRight: k8, bottomRight: A15, bottomLeft: H8, spatialReference: i23 });
}
var I14 = n3();
var k8 = n3();
var A15 = n3();
var H8 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentScale.js
var v15 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  get zMax() {
    if (!this._zMaxDirty || !this._operations) return this._zMax;
    const t26 = this._operations.data;
    if (t26.geometry.hasZ) {
      const e27 = t26.coordinateHelper;
      this._zMax = Number.NEGATIVE_INFINITY;
      for (const s13 of t26.components) for (const t27 of s13.vertices) {
        const s14 = e27.getZ(t27.pos) ?? 0;
        this._zMax = Math.max(s14, this._zMax);
      }
    } else this._zMax = 0;
    return this._zMaxDirty = false, this._zMax;
  }
  constructor(t26, e27, s13) {
    this._tool = t26, this._bounds = e27, this._preserveAspectRatioStep = s13, this._resizeHandles = [{ direction: [1, 0] }, { direction: [1, 1] }, { direction: [0, 1] }, { direction: [-1, 1] }, { direction: [-1, 0] }, { direction: [-1, -1] }, { direction: [0, -1] }, { direction: [1, -1] }], this._displayBoundsStart = W2(), this._displayBoundsMarginStart = 0, this._zMax = 0, this._zMaxDirty = true;
    const i23 = this._tool, a39 = i23.view;
    this.resizeManipulators = this._resizeHandles.map((t27) => {
      const e28 = new v14(a39, t27);
      return i23.addHandles([e28.events.on("grab-changed", (t28) => this._onGrabChanged(t28)), this._createResizeDragPipeline(e28, t27)]), e28;
    }), i23.manipulators.addMany(this.resizeManipulators), this._operations && i23.addHandles(this._operations.data.on("change", () => {
      var _a;
      "resize" !== ((_a = i23.inputState) == null ? void 0 : _a.type) && (this._zMaxDirty = true);
    }));
  }
  destroy() {
    this.forEachManipulator((t26) => {
      this._tool.manipulators.remove(t26), t26.destroy();
    });
  }
  forEachManipulator(t26) {
    this.resizeManipulators.forEach((e27) => t26(e27, A12.SCALE));
  }
  updateManipulators(t26, e27) {
    this.resizeManipulators.forEach((s13, i23) => {
      gi(s13, this._resizeHandles[i23], t26, e27);
    });
  }
  getUpdatedTooltipInfo() {
    if (!this.resizeManipulators.some((t27) => t27.focused)) return null;
    const t26 = this._tooltipInfo ?? (this._tooltipInfo = new i15({ sketchOptions: this._tool.sketchOptions })), e27 = U8(this._bounds.mapBounds, this.zMax, this._bounds.spatialReference);
    return e27 && (t26.xSize = e27.xSize, t26.ySize = e27.ySize), this.resizeManipulators.some((t27) => t27.dragging) || (t26.xScale = 1, t26.yScale = 1), t26;
  }
  _onGrabChanged({ action: t26, screenPoint: e27 }) {
    const s13 = this._tool, i23 = this._bounds;
    if ("start" !== t26 || !e27) return;
    const a39 = m12(s13.view.state.camera, e27);
    x2(i23.displayBounds.plane, a39, c4.get()) && (i23.backupMapBounds(), Z(i23.displayBounds, this._displayBoundsStart), this._displayBoundsMarginStart = i23.displayBoundsMargin, s13.inputState = { type: "resize" });
  }
  _createResizeDragPipeline(t26, e27) {
    const { _tool: s13, _object: i23 } = this;
    return p13(t26, (t27, a39, o23) => {
      null != s13.inputState && (a39.next((t28) => ("start" === t28.action && s13.events.emit("scale-start", { object: i23, xScale: 1, yScale: 1 }), { ...t28, handle: e27 })).next(C6(s13.view, this._displayBoundsStart.plane)).next(this._renderPlaneToFactors()).next(...this._preserveAspectRatioStep()).next(this._updateGeometry()).next((t28) => {
        const e28 = this._tooltipInfo;
        e28 && (e28.xScale = t28.factor1, e28.yScale = t28.factor2);
        const a40 = { object: i23, xScale: t28.factor1, yScale: t28.factor2 };
        switch (t28.action) {
          case "start":
          case "update":
            s13.events.emit("scale", a40);
            break;
          case "end":
            s13.inputState = null, s13.events.emit("scale-stop", a40);
        }
        return t28;
      }), o23.next(() => {
        null != s13.inputState && s13.events.emit("scale-stop", { object: i23, xScale: 1, yScale: 1 }), s13.cancel();
      }));
    });
  }
  _renderPlaneToFactors() {
    const t26 = this._bounds;
    return (e27) => {
      const s13 = this._displayBoundsStart, c22 = e27.handle.direction, p19 = t26.displayBoundsMargin, l26 = this._displayBoundsMarginStart, d18 = s5(c4.get(), s13.origin);
      q5(d18, d18, s13.basis1, -c22[0]), q5(d18, d18, s13.basis2, -c22[1]);
      const h25 = c2(c4.get(), e27.renderEnd, d18), m15 = c2(c4.get(), e27.renderStart, d18), S20 = Ei(e27.handle), y15 = Ii(s13), x15 = Ii(t26.displayBounds) / y15, M18 = (t27, e28) => {
        if (0 === t27) return 1;
        let s14 = r10(e28), i23 = 0.5 * t27 * P3(e28, h25) / s14;
        const a39 = i23 < 0 ? -1 : 1;
        if (S20) {
          i23 += (s14 - 0.5 * t27 * P3(e28, m15) / s14) * a39 * x15;
        }
        const o23 = s14 < 1.5 * l26 ? 1 : B4;
        return s14 = Math.max(s14 - l26, B4), a39 > 0 && (i23 -= p19), a39 * Math.max(a39 * (i23 / s14), o23);
      };
      return { ...e27, factor1: M18(c22[0], s13.basis1), factor2: M18(c22[1], s13.basis2) };
    };
  }
  _updateGeometry() {
    const o23 = this._bounds;
    return (r25) => {
      const n29 = s5(n3(), o23.mapBoundsStart.origin);
      q5(n29, n29, o23.mapBoundsStart.basis1, -r25.handle.direction[0]), q5(n29, n29, o23.mapBoundsStart.basis2, -r25.handle.direction[1]);
      const p19 = o5(n5(), o23.mapBoundsStart.basis1[0], o23.mapBoundsStart.basis1[1]);
      v3(p19, p19);
      const d18 = "start" === r25.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS;
      if (this._operations) {
        const t26 = this._operations.scale(n29, p19, r25.factor1, r25.factor2, d18, e13.REPLACE);
        Z(o23.mapBoundsStart, o23.mapBounds), o23.updateMapBoundsFromOperation(t26);
      }
      return r25;
    };
  }
};
var B4 = 1e-6;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/PreserveAspectRatio.js
var a38 = class {
  constructor() {
    this._lastDragEvent = null, this._next = null, this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t26) {
    if (this._enabled !== t26 && null != this._lastDragEvent && null != this._next) {
      const e27 = { ...this._lastDragEvent, action: "update" };
      t26 && n26(e27), this._next.execute(e27);
    }
    this._enabled = t26;
  }
  createDragEventPipelineStep() {
    this._lastDragEvent = null;
    const t26 = new w5();
    return this._next = t26, [(t27) => (this._lastDragEvent = "end" !== t27.action ? { ...t27 } : null, this._enabled && n26(t27), t27), t26];
  }
  get test() {
  }
};
function n26(e27) {
  const a39 = Ei(e27.handle) ? Math.max(Math.abs(e27.factor1), Math.abs(e27.factor2)) : 0 === e27.handle.direction[0] ? Math.abs(e27.factor2) : Math.abs(e27.factor1);
  e27.factor1 = e27.factor1 < 0 ? -a39 : a39, e27.factor2 = e27.factor2 < 0 ? -a39 : a39;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/SnapRotation.js
var n27 = class {
  constructor() {
    this._lastDragEvent = null, this._next = null, this.incrementRadians = s(5), this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t26) {
    if (this._enabled !== t26 && null != this._lastDragEvent && null != this._next) {
      const e27 = { ...this._lastDragEvent, action: "update" };
      t26 && this._adjustRotation(e27), this._next.execute(e27);
    }
    this._enabled = t26;
  }
  createDragEventPipelineStep() {
    this._lastDragEvent = null;
    const t26 = new w5();
    return this._next = t26, [(t27) => (this._lastDragEvent = "end" !== t27.action ? { ...t27 } : null, this._enabled && this._adjustRotation(t27), t27), t26];
  }
  _adjustRotation(t26) {
    t26.rotateAngle = Math.round(t26.rotateAngle / this.incrementRadians) * this.incrementRadians;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ExtentTransformTool.js
var S19 = class extends n13 {
  get updating() {
    return !!this.object.updating;
  }
  constructor(t26) {
    super(t26), this.events = new i3(), this.enableZ = true, this.enableScaling = true, this.enableRotation = true, this.sketchOptions = new l10(), this._preserveAspectRatio = new a38(), this._snapRotation = new n27(), this.grabbing = false, this.inputState = null, this._attachmentOrigin = null, this.type = "transform-3d", this._outlineVisualElement = null;
  }
  initialize() {
    const { view: t26, object: e27 } = this, s13 = this._bounds = new C10(this, () => this._updateManipulators());
    this._extentMove = new b17(this, s13), this._extentScale = new v15(this, s13, () => this._preserveAspectRatio.createDragEventPipelineStep()), this._extentRotate = new M16(this, s13, () => this._snapRotation.createDragEventPipelineStep()), this.addHandles([d2(() => this.enableZ, () => this._updateManipulatorAvailability(this._extentMove.moveZManipulator, A12.TRANSLATE_Z)), d2(() => this.enableScaling, () => this._extentScale.forEachManipulator((t27) => this._updateManipulatorAvailability(t27, A12.SCALE))), d2(() => this.enableRotation, () => this._updateManipulatorAvailability(this._extentRotate.rotateManipulator, A12.ROTATE))]), this._updateManipulators(), this._updateAllManipulatorAvailability();
    const n29 = l15({ view: t26, object: e27, forEachManipulator: (t27) => this._forEachManipulator(t27), onManipulatorsChanged: () => e() });
    if (null != n29) {
      const { visualElement: t27 } = n29;
      t27 instanceof j9 && (this._outlineVisualElement = t27, this.addHandles(t27.events.on("attachment-origin-changed", () => this._bounds.updateDisplayBounds()))), this.addHandles(n29);
    }
    this.addHandles([e27.on("committed", () => this._onGeometryChanged()), d2(() => this.object.visible, () => this._updateAllManipulatorAvailability()), d2(() => this.object.isDraped, () => this._graphicDrapedChanged(), P), d2(() => {
      var _a;
      return (_a = t26.pointsOfInterest) == null ? void 0 : _a.centerOnSurfaceFrequent.location;
    }, () => s13.updateDisplayBounds())]);
    const r25 = (t27) => {
      this.addHandles(t27.events.on("grab-changed", () => {
        this.grabbing = t27.grabbing, this._updateAllManipulatorAvailability();
      }));
    };
    this._forEachManipulator(r25);
    const l26 = (t27, i23) => {
      this.addHandles(t27.events.on("immediate-click", (t28) => {
        i23 === A12.TRANSLATE_XY && this.events.emit("immediate-click", { ...t28, object: e27 }), t28.stopPropagation();
      }));
    };
    this._forEachManipulator(l26), this._initializeTooltip(), this.finishToolCreation();
  }
  destroy() {
    this._extentMove.destroy(), this._extentScale.destroy(), this._extentRotate.destroy(), this.tooltip.destroy(), this._set("view", null), this._set("object", null);
  }
  _initializeTooltip() {
    const { view: t26 } = this;
    this.tooltip = R4(() => ({ view: t26, options: this.sketchOptions.tooltips }));
    const e27 = () => {
      this.tooltip.info = this._getUpdatedTooltipInfo();
    };
    this.addHandles([d2(() => this.sketchOptions.tooltips.effectiveEnabled, e27), d2(() => this.preserveAspectRatio, e27)]), this._forEachManipulator((t27) => {
      this.addHandles([t27.events.on(["focus-changed", "grab-changed"], e27), t27.events.on("drag", (t28) => {
        "cancel" === t28.action ? this.tooltip.clear() : e27();
      })]);
    });
  }
  _getUpdatedTooltipInfo() {
    return this.sketchOptions.tooltips.effectiveEnabled ? this._extentMove.getUpdatedTooltipInfo() ?? this._extentScale.getUpdatedTooltipInfo() ?? this._extentRotate.getUpdatedTooltipInfo() : null;
  }
  _onGeometryChanged() {
    this._bounds.updateDisplayBounds();
  }
  _graphicDrapedChanged() {
    this.removeHandles(T11), this._bounds.updateDisplayBounds(), this.object.isDraped && this.addHandles(this.view.elevationProvider.on("elevation-change", (t26) => {
      null != this._attachmentOrigin && w(t26.extent, this._attachmentOrigin.x, this._attachmentOrigin.y) && this._bounds.updateDisplayBounds();
    }), T11);
  }
  _updateManipulators() {
    if (!this.visible) return;
    const t26 = this._bounds.displayBounds, e27 = ci(t26, f4.get());
    this._extentMove.updateManipulators(e27, t26), this._extentScale.updateManipulators(e27, t26), this._extentRotate.updateManipulators(e27, t26);
  }
  _updateAllManipulatorAvailability() {
    this._forEachManipulator((t26, e27) => this._updateManipulatorAvailability(t26, e27));
  }
  _updateManipulatorAvailability(t26, e27) {
    const i23 = this.grabbing && !t26.grabbing;
    if (t26.interactive = !i23, t26 instanceof ee) {
      const o23 = this.object.visible, a39 = this.enableZ && o19(this.object.operations, this.object.elevationInfo);
      switch (e27) {
        case A12.ROTATE:
          t26.available = o23 && this.enableRotation;
          break;
        case A12.SCALE:
          t26.available = o23 && (this.enableScaling || this.enableRotation || a39), t26.interactive = !i23 && this.enableScaling, t26.state = this.enableScaling ? Hi : Ui;
          break;
        case A12.TRANSLATE_Z:
          t26.available = o23 && a39;
          break;
        default:
          t26.available = o23;
      }
    }
  }
  _forEachManipulator(t26) {
    this._extentMove.forEachManipulator(t26), this._extentScale.forEachManipulator(t26), this._extentRotate.forEachManipulator(t26);
  }
  get preserveAspectRatio() {
    return this._preserveAspectRatio.enabled;
  }
  set preserveAspectRatio(t26) {
    this._preserveAspectRatio.enabled = t26, this._set("preserveAspectRatio", t26);
  }
  get snapRotation() {
    return this._snapRotation.enabled;
  }
  set snapRotation(t26) {
    this._snapRotation.enabled = t26, this._set("snapRotation", t26);
  }
  get attachmentOrigin() {
    var _a, _b, _c;
    const t26 = this.object.isDraped ? null : (_a = this._outlineVisualElement) == null ? void 0 : _a.attachmentOrigin;
    return this._attachmentOrigin = t26 ?? this.object.origin ?? ((_c = (_b = t18(this.object)) == null ? void 0 : _b.extent) == null ? void 0 : _c.center), this._attachmentOrigin;
  }
  reset() {
  }
  cancel() {
    var _a;
    if (this.canUndo) {
      const t26 = (_a = this.object.operations) == null ? void 0 : _a.undo();
      t26 && this._bounds.updateMapBoundsFromOperationInverse(t26);
    }
    this.inputState = null;
  }
  get canUndo() {
    var _a;
    return !!((_a = this.object.operations) == null ? void 0 : _a.canUndo);
  }
  undo() {
    var _a;
    if (null != this.inputState) this.view.activeTool = null;
    else if (this.canUndo) {
      const t26 = (_a = this.object.operations) == null ? void 0 : _a.undo();
      t26 && this._bounds.updateMapBoundsFromOperationInverse(t26);
    }
  }
  get canRedo() {
    var _a;
    return !!((_a = this.object.operations) == null ? void 0 : _a.canRedo);
  }
  redo() {
    var _a;
    if (this.canRedo) {
      const t26 = (_a = this.object.operations) == null ? void 0 : _a.redo();
      t26 && this._bounds.updateMapBoundsFromOperation(t26);
    }
  }
  get test() {
  }
};
r2([m()], S19.prototype, "updating", null), r2([m({ constructOnly: true, nonNullable: true })], S19.prototype, "view", void 0), r2([m({ constructOnly: true, nonNullable: true })], S19.prototype, "object", void 0), r2([m()], S19.prototype, "enableZ", void 0), r2([m()], S19.prototype, "enableScaling", void 0), r2([m()], S19.prototype, "enableRotation", void 0), r2([m({ constructOnly: true, type: l10 })], S19.prototype, "sketchOptions", void 0), r2([m()], S19.prototype, "preserveAspectRatio", null), r2([m()], S19.prototype, "snapRotation", null), r2([m()], S19.prototype, "grabbing", void 0), r2([m()], S19.prototype, "inputState", void 0), r2([m({ readOnly: true })], S19.prototype, "type", void 0), r2([m()], S19.prototype, "tooltip", void 0), S19 = r2([a2("esri.views.3d.interactive.editingTools.transform.ExtentTransformTool")], S19);
var T11 = "draped-elevation-changes";

// node_modules/@arcgis/core/views/3d/interactive/editingTools/undoRecords.js
function r24(e27) {
  return null != e27 && "mesh" === e27.type ? o22(e27) : n28(e27);
}
function o22(e27) {
  return t8(e27.vertexSpace) ? i22(e27, e27.transform, e27.vertexSpace) : l24(e27);
}
function n28(e27) {
  let t26 = e27, r25 = null;
  return { undo(e28) {
    r25 = e28.geometry, e28.geometry = t26;
  }, redo(e28) {
    t26 = e28.geometry, e28.geometry = r25;
  } };
}
function i22(t26, r25, o23) {
  let n29 = r25 == null ? void 0 : r25.clone(), i23 = t3(o23.origin), l26 = null, u24 = null;
  return { undo: () => {
    var _a;
    l26 = (_a = t26.transform) == null ? void 0 : _a.clone(), u24 = t3(o23.origin), t26.transform = n29, t26.vertexSpace.origin = i23;
  }, redo: () => {
    var _a;
    n29 = (_a = t26.transform) == null ? void 0 : _a.clone(), i23 = t3(o23.origin), t26.transform = l26, t26.vertexSpace.origin = u24;
  } };
}
function l24(e27) {
  let t26, r25 = e27.vertexAttributes.clonePositional();
  return { undo: () => {
    t26 = e27.vertexAttributes.clonePositional(), e27.vertexAttributes = r25;
  }, redo: () => {
    r25 = e27.vertexAttributes.clonePositional(), e27.vertexAttributes = t26;
  } };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatedObject3DGraphic.js
var l25 = Symbol();
var u23 = class extends i3.EventedAccessor {
  get operations() {
    return this._operations;
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get elevationInfo() {
    return a13(this.graphic);
  }
  get visible() {
    return this._graphicState.displaying;
  }
  get isDraped() {
    return this._graphicState.isDraped;
  }
  get origin() {
    return D8(this.view, this.graphic);
  }
  constructor(t26) {
    super(t26), this._updatingHandles = new h5();
  }
  destroy() {
    this._operations = u(this._operations), this._updatingHandles.destroy();
  }
  initialize() {
    this._graphicState = new e19({ graphic: this.graphic }), this._graphicState.on("changed", () => this.emit("committed")), this.addHandles(this.view.trackGraphicState(this._graphicState)), this.addHandles(this._updatingHandles.add(() => this.graphic.geometry, (t26) => {
      var _a, _b;
      const e27 = (_a = this._operations) == null ? void 0 : _a.data.geometry;
      if (t26 !== e27) {
        if (!t26 || "multipoint" === (t26 == null ? void 0 : t26.type) || "extent" === (t26 == null ? void 0 : t26.type)) return u(this._operations), this.removeHandles(l25), void (this._operations = null);
        if ((_b = this._operations) == null ? void 0 : _b.trySetGeometry(t26)) this.emit("modified-externally");
        else {
          u(this._operations), this.removeHandles(l25);
          const e28 = E9.fromGeometry(t26, this.view.state.viewingMode);
          this._operations = e28, this.addHandles(e28.data.on("change", () => this.graphic.geometry = e28.data.geometry), l25);
        }
      }
    }, A));
  }
  createManipulator(t26) {
    return new S5({ view: this.view, graphic: this.graphic, ...t26 });
  }
  maskOccludee() {
    return this.view.maskOccludee(this.graphic);
  }
  endInteraction() {
    const t26 = this.graphic.geometry;
    "mesh" === (t26 == null ? void 0 : t26.type) && this.graphic.notifyMeshTransformChanged({ action: a19.UpdateFastLocalOrigin });
  }
  toMap(t26) {
    return this.view.toMap(t26, { include: [this.graphic] });
  }
  createUndoRecord() {
    const { graphic: { geometry: t26 } } = this;
    return r24(t26);
  }
};
r2([m({ constructOnly: true })], u23.prototype, "view", void 0), r2([m({ constructOnly: true })], u23.prototype, "graphic", void 0), r2([m()], u23.prototype, "_operations", void 0), r2([m()], u23.prototype, "operations", null), r2([m()], u23.prototype, "updating", null), u23 = r2([a2("esri.views.3d.interactive.editingTools.ManipulatedObject3DGraphic")], u23);
export {
  z8 as DrawGraphicTool3D,
  S19 as ExtentTransformTool,
  u23 as ManipulatedObject3DGraphic,
  K4 as MoveTool3D,
  h22 as ReshapeTool3D,
  z9 as TransformTool3D
};
//# sourceMappingURL=editingTools-LV3DVN2W.js.map
