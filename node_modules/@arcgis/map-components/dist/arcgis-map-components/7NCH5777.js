/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.14 */
import{A as n,B as p,C as L,G as E,g as V,s as t}from"./NZT7K2ZT.js";var v=class extends p{constructor(){super(...arguments),this._arcgisGetVersions=e=>{this.arcgisGetVersions.emit(e.detail)},this._arcgisManageVersion=e=>{this.arcgisManageVersion.emit(e.detail)},this._arcgisNewVersion=e=>{this.arcgisNewVersion.emit(e.detail)},this._versionListEventListeners=new Map,this._showInvalidVersionNotice=!0,this.arcgisFlowItemBack=n(),this.arcgisFlowItemClose=n(),this.arcgisGetVersions=n(),this.arcgisManageVersion=n(),this.arcgisNewVersion=n(),this.arcgisCreateVersionList=n()}static{this.properties={_showInvalidVersionNotice:16,serviceItemElementProps:0}}static{this.shadowRootOptions=V}disconnectedCallback(){super.disconnectedCallback(),this._versionList&&this._removeVersionListEventListeners(this._versionList)}_addVersionListEventListeners(e){e.addEventListener("arcgisGetVersions",this._arcgisGetVersions),this._versionListEventListeners.set("arcgisGetVersions",this._arcgisGetVersions),e.addEventListener("arcgisManageVersion",this._arcgisManageVersion),this._versionListEventListeners.set("arcgisManageVersion",this._arcgisManageVersion),e.addEventListener("arcgisNewVersion",this._arcgisNewVersion),this._versionListEventListeners.set("arcgisNewVersion",this._arcgisNewVersion)}_removeVersionListEventListeners(e){for(let[c,l]of this._versionListEventListeners)e.removeEventListener(c,l)}render(){let{serviceItemElementProps:{allowEditing:e,closable:c,currentUser:l,executionError:I,currentVersionIdentifier:d,flowElement:_,hasAdvEditingUte:b,heading:w,isInitialVersionInvalid:f,isVersionAdministrator:u,isVersioningApiAvailable:$,mode:x,pageSize:M,serviceName:r,serviceUrl:g,state:N,strings:o,versionInfos:a}}=this,{_versionList:i}=this,k=f.get(g)&&this._showInvalidVersionNotice?t`<calcite-notice class="initial-version-invalid-block" closable kind=warning open scale=s width=full icon @calciteNoticeClose=${()=>this._showInvalidVersionNotice=!1}><div slot=title>${o.headers.invalidInitialVersion}</div><div slot=message>${o.loadErrors.invalidInitialVersion}</div></calcite-notice>`:void 0,C=t`<calcite-combobox clear-disabled .label=${r} max-items=5 overlay-positioning=fixed selection-mode=single-persist @calciteComboboxChange=${s=>{let A=s.target,G=a.find(F=>F.versionIdentifier.guid===A.value);this.arcgisManageVersion.emit({actionType:"changeVersion",serviceUrl:g,versionInfo:G})}}>${a?a.map(s=>t`<calcite-combobox-item class=${L(x==="dialog"?"":"calcite-combobox-item")} .selected=${d.guid===s.versionIdentifier.guid&&d.name===s.versionIdentifier.name} .textLabel=${s.versionIdentifier.name} .value=${s.versionIdentifier.guid}></calcite-combobox-item>`):void 0}</calcite-combobox>`,m,h;return e&&(m=t`<calcite-action .id=${`actionManageVersions_${r}`} icon=list scale=s slot=control text @click=${async()=>{i=document.createElement("arcgis-version-management-version-list"),i.versionListElementProps={closable:c,currentUser:l,currentVersionIdentifier:d,executionError:I,hasAdvEditingUte:b,heading:w,isVersionAdministrator:u,isVersioningApiAvailable:$,pageSize:M,serviceName:r,serviceUrl:g,state:N,strings:o,versionInfos:a},i.selected=!0,i.showBackButton=!0,i.addEventListener("calciteFlowItemBack",s=>{s.preventDefault(),this.arcgisFlowItemBack.emit()}),i.addEventListener("calciteFlowItemClose",()=>{this.arcgisFlowItemClose.emit()}),this._addVersionListEventListeners(i),_?.append(i),this.arcgisCreateVersionList.emit(i)}}></calcite-action>`,h=t`<calcite-tooltip overlay-positioning=fixed .referenceElement=${`actionManageVersions_${r}`}><span>${o.headers.manageVersions}</span></calcite-tooltip>`),t`<calcite-block open .heading=${r}>${k}${C}${m}${h}</calcite-block>`}};E("arcgis-version-management-service-item",v);export{v as ArcgisVersionManagementServiceItem};
